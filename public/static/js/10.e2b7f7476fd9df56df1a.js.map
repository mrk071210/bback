{"version":3,"sources":["webpack:///source/admin/src/views/SystemManagement/Role/Components/Search.vue","webpack:///./source/admin/src/views/SystemManagement/Role/Components/Search.vue","webpack:///source/admin/src/views/SystemManagement/Role/index.vue","webpack:///./source/admin/src/views/SystemManagement/Role/index.vue","webpack:///./source/admin/src/views/SystemManagement/Role/index.vue?d44b","webpack:///./source/admin/src/views/SystemManagement/Role/Components/RoleMenuRes.vue?7cdd","webpack:///./source/admin/src/views/SystemManagement/Role/Components/Search.vue?0116","webpack:///./source/admin/src/views/SystemManagement/Role/Components/RoleUpdate.vue?d28a","webpack:///source/admin/src/views/SystemManagement/Role/Components/RoleMenuRes.vue","webpack:///./source/admin/src/views/SystemManagement/Role/Components/RoleMenuRes.vue","webpack:///./source/admin/src/views/SystemManagement/Role/Components/RoleLineRes.vue?f651","webpack:///source/admin/src/views/SystemManagement/Role/Components/RoleUpdate.vue","webpack:///./source/admin/src/views/SystemManagement/Role/Components/RoleUpdate.vue","webpack:///source/admin/src/views/SystemManagement/Role/Components/RoleLineRes.vue","webpack:///./source/admin/src/views/SystemManagement/Role/Components/RoleLineRes.vue"],"names":["Search","name","data","searchForm","rolesName","rolesEnable","rolesRemark","mounted","this","search","methods","$emit","assign_default","resetForm","formName","$refs","resetFields","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","Search_default","a","__webpack_exports__","Role","mixins","comp","buttonData","tableData","selectRow","editRole","isShowRoleDialog","isShowRoleLineDialog","isShowRoleMenuDialog","isListLoading","isCreate","pagination","pageNum","pageSize","total","searchParams","activated","roleTable","doLayout","queryList","params","getRoles","extends_default","isButtonIsDisabled","length","_this","Object","role","then","res","error","item","rest","handleEdit","index","row","handleAdd","menuAuth","lineAuth","handleDel","_this2","$confirm","type","roleUuid","deleteRoles","catch","batchRemove","_this3","roleIds","map","push","rolesUuid","_this4","$message","message","changePage","indexMethod","formatStatus","roleEnable","formatCreateDate","moment_default","roleCreateTime","format","components","NavButton","navButton","NavPremissonButton","navPremissonButton","CommonWrapper","commonWrapper","CommonTable","commonTable","RoleManagementSearch","RoleUpdate","RoleLineRes","RoleMenuRes","Role_default","module","exports","render","_vm","_h","$createElement","_c","_self","attrs","icon","on","click","_v","staticClass","flex","slot","directives","rawName","value","expression","ref","height","stripe","border","tooltip-effect","selection-change","selected","label","width","sortable","prop","formatter","min-width","show-tooltip-when-overflow","scopedSlots","_u","key","fn","scope","effect","content","placement","size","round","$event","stopPropagation","$index","background","layout","current-page","page-size","update:currentPage","$set","update:current-page","current-change","show","roleData","update:show","update:roleData","update:role-data","updateList","staticRenderFns","title","visible","isVisible","close","cancel","treeData","node-key","props","defaultProps","show-checkbox","default-checked-keys","checkedNodes","default-expanded-keys","expandNodes","check","handleCheckNode","save","model","label-width","span","clearable","callback","$$v","filterable","nativeOn","close-on-click-modal","close-on-press-escape","update:visible","roleForm","rules","formRules","maxlength","placeholder","_l","rows","offset","originalTreeData","Boolean","required","watch","isShow","initLineTree","roleParentId","generateTree","checkedNodesId","forEach","node","pId","id","checked","needToCheckedNodes","getOnlyChildrenNodes","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","err","return","tree","setCheckedKeys","nodeIds","filter","nodeId","children","indeterminate","getCheckedKeys","halfCheckedNodes","getHalfCheckedKeys","allCheckedNodes","concat","roleResourceRoleId","roleResourceResourceId","join","create_default","RoleMenuRes_default","check-change","initRolesForm","roleName","roleRemark","roleType","trigger","min","max","roleTypeList","default","validate","isValid","submitType","submitText","RoleUpdate_default","getCheckdNodesArr","Nodes","checkedNodesList","levelsType","getCheckedNodes","checkdNodesArr","parmas","roleList","lineArr","console","log","RoleLineRes_default"],"mappings":"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","file":"static/js/10.e2b7f7476fd9df56df1a.js","sourcesContent":["<template>\r\n     <el-form :model=\"searchForm\" ref=\"searchForm\"  label-width=\"80px\" >\r\n            <el-row>\r\n                <el-col :span=\"6\">\r\n                    <el-form-item label=\"角色名称\"  prop=\"rolesName\">\r\n                      <el-input v-model=\"searchForm.rolesName\"  clearable></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                  <el-form-item label=\"状态\" prop=\"rolesEnable\">\r\n                    <el-select filterable clearable v-model=\"searchForm.rolesEnable\">\r\n                      <el-option class=\"radio\" value=\"1\" label=\"启用\"></el-option>\r\n                      <el-option class=\"radio\" value=\"0\" label=\"禁用\"></el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <!-- <el-col :span=\"6\">\r\n                    <el-form-item label=\"描述\"  prop=\"rolesRemark\">\r\n                      <el-input v-model=\"searchForm.rolesRemark\"></el-input>\r\n                    </el-form-item>\r\n                </el-col> -->\r\n                <el-col :span=\"6\" class=\"flex-right\">\r\n                    <el-button type=\"primary\" @click.native=\"search\">查询</el-button>\r\n                    <el-button @click=\"resetForm('searchForm')\">重置</el-button>\r\n                </el-col>\r\n            </el-row>\r\n          </el-form>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * Roles Search Component\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.03.20\r\n */\r\nexport default {\r\n  name: 'RoleManagementSearch',\r\n  data () {\r\n    return {\r\n      searchForm: {\r\n        rolesName: '',\r\n        rolesEnable: '',\r\n        rolesRemark: ''\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.search()\r\n  },\r\n  methods: {\r\n    // 检索\r\n    search: function () {\r\n      this.$emit('search', Object.assign({}, this.searchForm))\r\n    },\r\n    // 重置\r\n    resetForm (formName) {\r\n      this.$refs[formName].resetFields()\r\n      this.$emit('rest', Object.assign({}, this.searchForm))\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.el-form-item{\r\n   margin-bottom:10px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/SystemManagement/Role/Components/Search.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-aca8d32e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"D:\\\\\\\\workspace\\\\\\\\wms_web\\\\\\\\source\\\\\\\\admin\\\\\\\\src\\\\\\\\common\\\\\\\\style\\\\\\\\common.scss\\\"]}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Search.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-aca8d32e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-aca8d32e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/SystemManagement/Role/Components/Search.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n      <!-- <header-breadcrumb :breadData=\"$route.matched\" /> -->\r\n      <nav-button>\r\n        <el-button-group>\r\n           <el-button icon=\"fdddfont icon-add-new\" @click=\"handleAdd\">新增</el-button>\r\n        </el-button-group>\r\n      </nav-button>\r\n     <!-- 查询 -->\r\n      <common-wrapper>\r\n        <role-management-search class=\"search\" @search=\"queryList\" @rest=\"rest\"/>\r\n      </common-wrapper>\r\n     <!-- 用户列表 -->\r\n      <common-wrapper>\r\n        <common-table :flex=\"230\">\r\n          <template slot=\"table\">\r\n            <el-table\r\n              ref=\"roleTable\"\r\n              height=\"100%\"\r\n              stripe\r\n              :border=\"true\"\r\n              tooltip-effect=\"light\"\r\n              v-loading=\"isListLoading\"\r\n              :data=\"tableData\"\r\n              @selection-change=\"selected => selectRow = selected\">\r\n                <!-- <el-table-column type=\"selection\" width=\"30\"></el-table-column> -->\r\n                <el-table-column type=\"index\" :index=\"indexMethod\" label=\"序号\" width=\"50\"></el-table-column>\r\n                <el-table-column sortable prop=\"roleName\" label=\"角色名称\" width=\"130\"></el-table-column>\r\n                <!-- <el-table-column sortable prop=\"roleCreateUser\" label=\"创建人\" width=\"120\"></el-table-column> -->\r\n                <el-table-column prop=\"roleEnable\" label=\"状态\" :formatter=\"formatStatus\" width=\"80\"></el-table-column>\r\n                <el-table-column sortable prop=\"roleCreateTime\" label=\"创建时间\" :formatter=\"formatCreateDate\" width=\"150\"></el-table-column>\r\n                <el-table-column prop=\"roleRemark\" label=\"角色描述\" min-width=\"150\" :show-tooltip-when-overflow=\"true\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"190\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-tooltip class=\"item\" effect=\"light\" content=\"菜单授权\"  placement=\"bottom\">\r\n                      <el-button size=\"mini\" round icon=\"fdddfont icon-shouquan\" @click.stop=\"menuAuth(scope.$index, scope.row)\"></el-button>\r\n                    </el-tooltip>\r\n                    <el-tooltip class=\"item\" effect=\"light\" content=\"编辑\"  placement=\"bottom\">\r\n                      <el-button size=\"mini\" round icon=\"fdddfont icon-modify\" @click.stop=\"handleEdit(scope.$index, scope.row)\"></el-button>\r\n                    </el-tooltip>\r\n                    <el-tooltip class=\"item\" effect=\"light\" content=\"删除\"  placement=\"bottom\">\r\n                      <el-button size=\"mini\" round icon=\"fdddfont icon-delete\" @click.stop=\"handleDel(scope.$index, scope.row)\"></el-button>\r\n                    </el-tooltip>\r\n                  </template>\r\n                </el-table-column>\r\n            </el-table>\r\n          </template>\r\n          <template slot=\"pagination\">\r\n                <el-pagination   background   layout=\"total, prev, pager, next\"\r\n                :current-page.sync=\"pagination.pageNum\"\r\n                :page-size=\"pagination.pageSize\"\r\n                :total=\"pagination.total\"\r\n                @current-change=\"changePage\"\r\n                ></el-pagination>\r\n          </template>\r\n        </common-table>\r\n      </common-wrapper>\r\n\r\n      <!-- 角色新增/修改 -->\r\n      <role-update\r\n        :show.sync=\"isShowRoleDialog\"\r\n        :roleData.sync=\"editRole\"\r\n        :isCreate=\"isCreate\"\r\n        :searchParams=\"searchParams\"\r\n         @updateList=\"queryList\"\r\n      />\r\n\r\n      <!-- 菜单授权 -->\r\n      <role-menu-res\r\n        :show.sync=\"isShowRoleMenuDialog\"\r\n        :roleData.sync=\"editRole\"\r\n        :searchParams=\"searchParams\"\r\n         @updateList=\"queryList\"\r\n      />\r\n\r\n      <!-- 角色线路授权 -->\r\n      <role-line-res\r\n        :show.sync=\"isShowRoleLineDialog\"\r\n        :roleData.sync=\"editRole\"\r\n         @updateList=\"queryList\"\r\n      />\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * Role Management Module\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.03.20\r\n */\r\nimport moment from 'moment'\r\n// 全局混入\r\nimport {mixins} from '@/mixins'\r\n// 自定义组件\r\nimport NavButton from '@/components/navButton'\r\nimport NavPremissonButton from '@/components/navButton/navPremissonButton'\r\nimport CommonWrapper from '@/components/commonWrapper'\r\nimport CommonTable from '@/components/commonTable'\r\nimport RoleManagementSearch from './Components/Search'\r\nimport RoleUpdate from './Components/RoleUpdate'\r\nimport RoleLineRes from './Components/RoleLineRes'\r\nimport RoleMenuRes from './Components/RoleMenuRes'\r\n\r\nimport { getRoleList, deleteRole } from '@/api/role'\r\n\r\nexport default {\r\n  name: 'RoleManagement',\r\n  mixins: [mixins],\r\n  data () {\r\n    return {\r\n      comp: this,\r\n      buttonData: [],\r\n      tableData: [],\r\n      selectRow: [], // 列表选中列\r\n      editRole: {}, // 需要编辑的角色对象\r\n      isShowRoleDialog: false, // 新增/编辑窗口打开状态\r\n      isShowRoleLineDialog: false,\r\n      isShowRoleMenuDialog: false,\r\n      isListLoading: false, // 列表加载\r\n      isCreate: true, // 编辑窗口展示新增or编辑\r\n      pagination: { // 翻页数据\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        total: 0\r\n      },\r\n      searchParams: {} // 查询参数\r\n    }\r\n  },\r\n  activated () {\r\n    this.$refs.roleTable.doLayout()\r\n  },\r\n  mounted () {},\r\n  methods: {\r\n    // 查询和初始化查询\r\n    // 查询/翻页公用方法\r\n    queryList (params) {\r\n      const searchParams = this.searchParams = params\r\n      this.getRoles(\r\n        {\r\n          ...searchParams,\r\n          pageNum: this.pagination.pageNum,\r\n          pageSize: this.pagination.pageSize\r\n        }\r\n      )\r\n    },\r\n    isButtonIsDisabled () {\r\n      return !!this.selectRow.length\r\n    },\r\n    // 获取列表\r\n    getRoles (params) {\r\n      this.isListLoading = true\r\n      getRoleList(params).then(res => {\r\n        if(!res.error){\r\n          if(res.item.length == 0 && res.pageNum > 1){\r\n            this.pagination.pageNum = 1\r\n            params.pageNum = 1\r\n            this.getRoles(params)\r\n            return\r\n          }\r\n          this.tableData = res.item\r\n          this.pagination.total = res.total\r\n          this.pagination.pageNum = res.pageNum\r\n          this.pagination.pageSize = res.pageSize\r\n          this.isListLoading = false\r\n        }\r\n      })\r\n    },\r\n    rest (params) {\r\n      const searchParams = this.searchParams = params\r\n      this.getRoles(\r\n        {\r\n          ...searchParams,\r\n          pageNum: 1,\r\n          pageSize: this.pagination.pageSize\r\n        }\r\n      )\r\n    },\r\n    // 显示编辑界面\r\n    handleEdit (index, row) {\r\n      this.isCreate = false\r\n      this.editRole = row\r\n      this.isShowRoleDialog = true\r\n    },\r\n    // 显示新增界面\r\n    handleAdd () {\r\n      this.isCreate = true\r\n      this.isShowRoleDialog = true\r\n    },\r\n    // 菜单授权\r\n    menuAuth (index, row) {\r\n      this.editRole = row\r\n      this.isShowRoleMenuDialog = true\r\n    },\r\n    // 线路授权\r\n    lineAuth (index, row) {\r\n      this.editRole = row\r\n      this.isShowRoleLineDialog = true\r\n    },\r\n    // 单行删除\r\n    handleDel (index, row) {\r\n      this.$confirm('确认删除该角色吗?', '提示', {\r\n        type: 'warning'\r\n      }).then(() => {\r\n        let params = {\r\n          roleUuid: row.roleUuid\r\n        }\r\n        this.deleteRoles(params)\r\n      }).catch(() => {})\r\n    },\r\n    // 批量删除\r\n    batchRemove () {\r\n      this.$confirm('确认删除选中的角色吗？', '提示', {\r\n        type: 'warning'\r\n      }).then(() => {\r\n        let roleIds = []\r\n        this.selectRow.map(row => roleIds.push(row.rolesUuid))\r\n        this.isListLoading = true\r\n        this.deleteRoles(roleIds).then(() => {\r\n          this.isListLoading = false\r\n        })\r\n      }).catch(() => {})\r\n    },\r\n    // 删除接口方法\r\n    deleteRoles (roleIds) {\r\n      return deleteRole(roleIds).then((res) => {\r\n        if (!res.error) {\r\n          this.$message({\r\n            message: '删除成功',\r\n            type: 'success'\r\n          })\r\n          this.queryList(this.searchParams)\r\n        }\r\n      })\r\n    },\r\n    // 列表翻页\r\n    changePage (pageNum) {\r\n      this.pagination.pageNum = pageNum\r\n      this.queryList(this.searchParams)\r\n    },\r\n    // 生成列表序号\r\n    indexMethod (index) {\r\n      return (index + 1) + (this.pagination.pageNum - 1) * this.pagination.pageSize\r\n    },\r\n    // 列表状态显示格式化\r\n    formatStatus (row) {\r\n      return row.roleEnable === 1 ? '启用' : row.roleEnable === 0 ? '禁用' : '未知'\r\n    },\r\n    // 列表日期格式化\r\n    formatCreateDate (row) {\r\n      return moment(row.roleCreateTime).format('YYYY-MM-DD')\r\n    }\r\n  },\r\n  components: {\r\n    NavButton,\r\n    NavPremissonButton,\r\n    CommonWrapper,\r\n    CommonTable,\r\n    RoleManagementSearch,\r\n    RoleUpdate,\r\n    RoleLineRes,\r\n    RoleMenuRes\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/SystemManagement/Role/index.vue","var normalizeComponent = require(\"!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71e0e7f6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/SystemManagement/Role/index.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('nav-button',[_c('el-button-group',[_c('el-button',{attrs:{\"icon\":\"fdddfont icon-add-new\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"新增\")])],1)],1),_vm._v(\" \"),_c('common-wrapper',[_c('role-management-search',{staticClass:\"search\",on:{\"search\":_vm.queryList,\"rest\":_vm.rest}})],1),_vm._v(\" \"),_c('common-wrapper',[_c('common-table',{attrs:{\"flex\":230}},[_c('template',{slot:\"table\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isListLoading),expression:\"isListLoading\"}],ref:\"roleTable\",attrs:{\"height\":\"100%\",\"stripe\":\"\",\"border\":true,\"tooltip-effect\":\"light\",\"data\":_vm.tableData},on:{\"selection-change\":function (selected) { return _vm.selectRow = selected; }}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"index\":_vm.indexMethod,\"label\":\"序号\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"sortable\":\"\",\"prop\":\"roleName\",\"label\":\"角色名称\",\"width\":\"130\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleEnable\",\"label\":\"状态\",\"formatter\":_vm.formatStatus,\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"sortable\":\"\",\"prop\":\"roleCreateTime\",\"label\":\"创建时间\",\"formatter\":_vm.formatCreateDate,\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleRemark\",\"label\":\"角色描述\",\"min-width\":\"150\",\"show-tooltip-when-overflow\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"190\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"light\",\"content\":\"菜单授权\",\"placement\":\"bottom\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"round\":\"\",\"icon\":\"fdddfont icon-shouquan\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.menuAuth(scope.$index, scope.row)}}})],1),_vm._v(\" \"),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"light\",\"content\":\"编辑\",\"placement\":\"bottom\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"round\":\"\",\"icon\":\"fdddfont icon-modify\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleEdit(scope.$index, scope.row)}}})],1),_vm._v(\" \"),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"light\",\"content\":\"删除\",\"placement\":\"bottom\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"round\":\"\",\"icon\":\"fdddfont icon-delete\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleDel(scope.$index, scope.row)}}})],1)]}}])})],1)],1),_vm._v(\" \"),_c('template',{slot:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next\",\"current-page\":_vm.pagination.pageNum,\"page-size\":_vm.pagination.pageSize,\"total\":_vm.pagination.total},on:{\"update:currentPage\":function($event){return _vm.$set(_vm.pagination, \"pageNum\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.pagination, \"pageNum\", $event)},\"current-change\":_vm.changePage}})],1)],2)],1),_vm._v(\" \"),_c('role-update',{attrs:{\"show\":_vm.isShowRoleDialog,\"roleData\":_vm.editRole,\"isCreate\":_vm.isCreate,\"searchParams\":_vm.searchParams},on:{\"update:show\":function($event){_vm.isShowRoleDialog=$event},\"update:roleData\":function($event){_vm.editRole=$event},\"update:role-data\":function($event){_vm.editRole=$event},\"updateList\":_vm.queryList}}),_vm._v(\" \"),_c('role-menu-res',{attrs:{\"show\":_vm.isShowRoleMenuDialog,\"roleData\":_vm.editRole,\"searchParams\":_vm.searchParams},on:{\"update:show\":function($event){_vm.isShowRoleMenuDialog=$event},\"update:roleData\":function($event){_vm.editRole=$event},\"update:role-data\":function($event){_vm.editRole=$event},\"updateList\":_vm.queryList}}),_vm._v(\" \"),_c('role-line-res',{attrs:{\"show\":_vm.isShowRoleLineDialog,\"roleData\":_vm.editRole},on:{\"update:show\":function($event){_vm.isShowRoleLineDialog=$event},\"update:roleData\":function($event){_vm.editRole=$event},\"update:role-data\":function($event){_vm.editRole=$event},\"updateList\":_vm.queryList}})],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-71e0e7f6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/SystemManagement/Role/index.vue\n// module id = 8imF\n// module chunks = 10","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"width\":\"600px\",\"title\":\"菜单授权\",\"visible\":_vm.isVisible},on:{\"close\":_vm.cancel}},[_c('div',{staticClass:\"tree-content\"},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.treeData,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"show-checkbox\":true,\"default-checked-keys\":_vm.checkedNodes,\"default-expanded-keys\":_vm.expandNodes},on:{\"check\":_vm.handleCheckNode}})],1),_vm._v(\" \"),_c('template',{staticClass:\"flex-right\",slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],2)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-64c2ef51\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/SystemManagement/Role/Components/RoleMenuRes.vue\n// module id = HHPP\n// module chunks = 10 77","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"searchForm\",attrs:{\"model\":_vm.searchForm,\"label-width\":\"80px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"rolesName\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.searchForm.rolesName),callback:function ($$v) {_vm.$set(_vm.searchForm, \"rolesName\", $$v)},expression:\"searchForm.rolesName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"rolesEnable\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\"},model:{value:(_vm.searchForm.rolesEnable),callback:function ($$v) {_vm.$set(_vm.searchForm, \"rolesEnable\", $$v)},expression:\"searchForm.rolesEnable\"}},[_c('el-option',{staticClass:\"radio\",attrs:{\"value\":\"1\",\"label\":\"启用\"}}),_vm._v(\" \"),_c('el-option',{staticClass:\"radio\",attrs:{\"value\":\"0\",\"label\":\"禁用\"}})],1)],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"flex-right\",attrs:{\"span\":6}},[_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.search($event)}}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('searchForm')}}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-aca8d32e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/SystemManagement/Role/Components/Search.vue\n// module id = Qsx1\n// module chunks = 10 55","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"width\":\"600px\",\"title\":(_vm.isCreate ? '新增' : '编辑') + '角色',\"visible\":_vm.isVisible,\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.isVisible=$event},\"close\":_vm.cancel}},[_c('el-form',{ref:\"roleForm\",attrs:{\"model\":_vm.roleForm,\"rules\":_vm.formRules,\"label-width\":\"80px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{attrs:{\"maxlength\":\"50\"},model:{value:(_vm.roleForm.roleName),callback:function ($$v) {_vm.$set(_vm.roleForm, \"roleName\", $$v)},expression:\"roleForm.roleName\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"类型\",\"prop\":\"roleType\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择角色类型\"},model:{value:(_vm.roleForm.roleType),callback:function ($$v) {_vm.$set(_vm.roleForm, \"roleType\", $$v)},expression:\"roleForm.roleType\"}},_vm._l((_vm.roleTypeList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"roleEnable\"}},[_c('el-radio-group',{model:{value:(_vm.roleForm.roleEnable),callback:function ($$v) {_vm.$set(_vm.roleForm, \"roleEnable\", $$v)},expression:\"roleForm.roleEnable\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"启用\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"禁用\")])],1)],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleRemark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"maxlength\":\"200\",\"placeholder\":\"请输入角色描述，最长200字符\"},model:{value:(_vm.roleForm.roleRemark),callback:function ($$v) {_vm.$set(_vm.roleForm, \"roleRemark\", $$v)},expression:\"roleForm.roleRemark\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":6,\"offset\":18}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-d820055c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/SystemManagement/Role/Components/RoleUpdate.vue\n// module id = TXIJ\n// module chunks = 10 129","<template>\r\n    <el-dialog\r\n        width=\"600px\"\r\n        title=\"菜单授权\"\r\n        :visible=\"isVisible\"\r\n        @close=\"cancel\"\r\n    >\r\n        <div class=\"tree-content\">\r\n            <el-tree\r\n            ref=\"tree\"\r\n            :data=\"treeData\"\r\n            node-key=\"id\"\r\n            :props=\"defaultProps\"\r\n            :show-checkbox=\"true\"\r\n            :default-checked-keys=\"checkedNodes\"\r\n            :default-expanded-keys=\"expandNodes\"\r\n            @check=\"handleCheckNode\"\r\n        ></el-tree>\r\n        </div>\r\n        <template slot=\"footer\" class=\"flex-right\">\r\n            <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n            <el-button @click=\"cancel\">取消</el-button>\r\n        </template>\r\n    </el-dialog>\r\n</template>\r\n<script>\r\n/**\r\n * RolesMenu Tree Resouces Component\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.03.20\r\n */\r\nimport { generateTree } from '@/utils/generateTree'\r\n// api\r\nimport { getRolesMenuRes, updateRolesMenuRes, getRolesMenuAuthRes } from '@/api/role'\r\n\r\nexport default {\r\n  name: 'RoleMenuRes',\r\n  data () {\r\n    return {\r\n      isVisible: false,\r\n      treeData: [],\r\n      originalTreeData: null,\r\n      checkedNodes: [],\r\n      expandNodes: [],\r\n      defaultProps: {\r\n        label: 'name'\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    roleData: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    searchParams: {\r\n      type: Object\r\n    }\r\n\r\n  },\r\n  watch: {\r\n    show (isShow) {\r\n      if (isShow) {\r\n        this.initLineTree()\r\n      }\r\n      this.isVisible = isShow\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    initLineTree () {\r\n      this.checkedNodes = []\r\n      this.originalTreeData = []\r\n      this.treeData = []\r\n      const roleParentId = this.roleData.roleUuid\r\n      getRolesMenuRes({roleParentId}).then(res => {\r\n        this.originalTreeData = res\r\n        this.treeData = generateTree(res)\r\n        let checkedNodes = []\r\n        let checkedNodesId = []\r\n        res.forEach(node => {\r\n          // if (node.checked) this.checkedNodes.push(node.id)\r\n          if (node.pId === '') this.expandNodes.push(node.id)\r\n          if (node.checked === true) checkedNodes.push(node)\r\n        })\r\n        const needToCheckedNodes = this.getOnlyChildrenNodes(checkedNodes)\r\n        for(let item of needToCheckedNodes){\r\n          checkedNodesId.push(item.id)\r\n        }\r\n        this.$refs.tree.setCheckedKeys(checkedNodesId,true)\r\n      })\r\n        .then(() => {\r\n\r\n        //   // 查找已授权菜单数据,并默认勾选/my/info/get/my/info/get\r\n        //   const roleUuid = this.roleData.roleUuid\r\n        //   getRolesMenuAuthRes({roleUuid}).then(res => {\r\n        //     // if (res && res.length) {\r\n        //     //   this.checkedNodes = res\r\n        //     // } else {\r\n        //     //   this.checkedNodes = []\r\n        //     // }\r\n        //     const needToCheckedNodes = this.getOnlyChildrenNodes(res)\r\n        //     this.$refs.tree.setCheckedKeys(needToCheckedNodes)\r\n        //     // console.log('needToCheckedNodes', needToCheckedNodes)\r\n        //   })\r\n        })\r\n    },\r\n    /**\r\n     * 过滤后端获取到的所有节点中，仅为最末子节点的节点数据\r\n     * @param {nodeIds}\r\n     * @return [Array]\r\n     */\r\n    getOnlyChildrenNodes (nodeIds) {\r\n      return nodeIds.filter(nodeId => !nodeId.children.length)\r\n    },\r\n    handleCheckNode (data, checked, indeterminate) {\r\n      // console.log(data, checked, indeterminate)\r\n      const checkedNodes = this.$refs.tree.getCheckedKeys()\r\n      const halfCheckedNodes = this.$refs.tree.getHalfCheckedKeys()\r\n      const allCheckedNodes = checkedNodes.concat(halfCheckedNodes)\r\n      this.checkedNodes = allCheckedNodes\r\n      // console.log('checkedNodes', this.checkedNodes)\r\n    },\r\n    save () {\r\n      this.handleCheckNode()\r\n      const params = {\r\n        roleResourceRoleId: this.roleData.roleUuid,\r\n        roleResourceResourceId: this.checkedNodes.join(\",\")\r\n      }\r\n      updateRolesMenuRes(params).then(res => {\r\n        this.$message({\r\n          message: `菜单授权成功!`,\r\n          type: 'success'\r\n        })\r\n        this.$emit('updateList',this.searchParams)\r\n        this.cancel()\r\n      })\r\n    },\r\n    cancel () {\r\n      this.$emit('update:show', false)\r\n      this.$emit('update:roleData', Object.create(null))\r\n      this.isVisible = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.tree-content{\r\n    max-height:400px;\r\n    overflow-y:auto;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/SystemManagement/Role/Components/RoleMenuRes.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-64c2ef51\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"D:\\\\\\\\workspace\\\\\\\\wms_web\\\\\\\\source\\\\\\\\admin\\\\\\\\src\\\\\\\\common\\\\\\\\style\\\\\\\\common.scss\\\"]}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./RoleMenuRes.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleMenuRes.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleMenuRes.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-64c2ef51\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./RoleMenuRes.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-64c2ef51\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/SystemManagement/Role/Components/RoleMenuRes.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"width\":\"600px\",\"title\":\"线路授权\",\"visible\":_vm.isVisible},on:{\"close\":_vm.cancel}},[_c('div',{staticClass:\"tree-content\"},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.treeData,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"show-checkbox\":\"\",\"default-checked-keys\":_vm.checkedNodes,\"default-expanded-keys\":_vm.expandNodes},on:{\"check-change\":_vm.handleCheckNode}})],1),_vm._v(\" \"),_c('template',{staticClass:\"flex-right\",slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],2)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3d509722\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/SystemManagement/Role/Components/RoleLineRes.vue\n// module id = kIbC\n// module chunks = 10 96","<template>\r\n    <el-dialog\r\n    width=\"600px\"\r\n    :title=\"(isCreate ? '新增' : '编辑') + '角色'\"\r\n    :visible.sync=\"isVisible\"\r\n    :close-on-click-modal=\"false\"\r\n    :close-on-press-escape=\"false\"\r\n    @close=\"cancel\"\r\n    >\r\n       <el-form ref=\"roleForm\" :model=\"roleForm\" :rules=\"formRules\" label-width=\"80px\">\r\n           <el-row>\r\n               <el-col :span=\"12\">\r\n                    <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n                        <el-input v-model=\"roleForm.roleName\" maxlength=\"50\"/>\r\n                    </el-form-item>\r\n               </el-col>\r\n           </el-row>\r\n         <el-row>\r\n           <el-col :span=\"12\">\r\n             <el-form-item label=\"类型\" prop=\"roleType\">\r\n               <el-select v-model=\"roleForm.roleType\" placeholder=\"请选择角色类型\">\r\n                 <el-option\r\n                   v-for=\"(item,index) in roleTypeList\"\r\n                   :key=\"index\"\r\n                   :label=\"item.label\"\r\n                   :value=\"item.value\">\r\n                 </el-option>\r\n               </el-select>\r\n             </el-form-item>\r\n           </el-col>\r\n               <el-col :span=\"12\">\r\n                   <el-form-item label=\"状态\" prop=\"roleEnable\">\r\n                        <el-radio-group v-model=\"roleForm.roleEnable\">\r\n                            <el-radio :label='1'>启用</el-radio>\r\n                            <el-radio :label='0'>禁用</el-radio>\r\n                        </el-radio-group>\r\n                    </el-form-item>\r\n               </el-col>\r\n           </el-row>\r\n           <el-row>\r\n               <el-col :span=\"24\">\r\n                   <el-form-item label=\"角色描述\" prop=\"roleRemark\">\r\n                    <el-input type=\"textarea\" :rows=\"2\" v-model=\"roleForm.roleRemark\" maxlength=\"200\" placeholder=\"请输入角色描述，最长200字符\"/>\r\n                   </el-form-item>\r\n               </el-col>\r\n\r\n           </el-row>\r\n            <el-row>\r\n                <el-col :span=\"6\" :offset=\"18\">\r\n                    <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n                    <el-button @click=\"cancel\">取消</el-button>\r\n                </el-col>\r\n            </el-row>\r\n       </el-form>\r\n    </el-dialog>\r\n</template>\r\n<script>\r\n/**\r\n * Roles Add/Edit Component\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.03.20\r\n */\r\n// api\r\nimport { createRole, updateRole } from '@/api/role'\r\n\r\n//\r\nconst initRolesForm = {\r\n  roleName: '',\r\n  roleEnable: 1,\r\n  roleRemark: '',\r\n  roleType: ''\r\n}\r\n\r\nexport default {\r\n  name: 'RoleUpdate',\r\n  data () {\r\n    return {\r\n      isVisible: false,\r\n      roleForm: Object.assign({}, initRolesForm),\r\n      formRules: {\r\n        roleName: [{required: true, message: '请输入角色名称', trigger: 'change'},\r\n          { min: 1, max: 20, message: '长度在 1 到 20 个字符', trigger: 'change' }],\r\n        roleRemark: [{ min: 1, max: 200, message: '长度在 1 到 200 个字符', trigger: 'change' }],\r\n        roleType: [{required: true, message: '请选择角色类型', trigger: 'change'}],\r\n        roleEnable: [{required: true, message: '请选择角色状态', trigger: 'change'}]\r\n      },\r\n      roleTypeList: [\r\n        {\r\n          value: '0',\r\n          label: '系统管理员'\r\n        },\r\n        {\r\n          value: '1',\r\n          label: '商户'\r\n        },\r\n        {\r\n          value: '2',\r\n          label: '仓库管理员'\r\n        },\r\n        {\r\n          value: '3',\r\n          label: '财务管理员'\r\n        },\r\n        {\r\n          value: '5',\r\n          label: '调度管理员'\r\n        },\r\n        {\r\n          value: '6',\r\n          label: '配送管理员'\r\n        },\r\n        {\r\n          value: '7',\r\n          label: '司机'\r\n        },\r\n        {\r\n          value: '11',\r\n          label: '安装工'\r\n        },\r\n        {\r\n          value: '9',\r\n          label: '财务'\r\n        },\r\n        {\r\n          value: '8',\r\n          label: '项目总监'\r\n        },\r\n        {\r\n          value: '12',\r\n          label: '供应商'\r\n        },\r\n        {\r\n          value: '13',\r\n          label: '维修工'\r\n        },\r\n        {\r\n          value: '14',\r\n          label: '客服'\r\n        },{\r\n          value: '15',\r\n          label: '合伙人'\r\n        },{\r\n          value: '16',\r\n          label: '中心总'\r\n        },{\r\n              value: '17',\r\n              label: '招商'\r\n          }\r\n      ]\r\n    }\r\n  },\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    roleData: {\r\n      type: Object\r\n    },\r\n    isCreate: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    searchParams: {\r\n      type: Object\r\n    }\r\n  },\r\n  watch: {\r\n    show (isShow) {\r\n      if (isShow) {\r\n        if (this.isCreate) {\r\n          this.roleForm = Object.assign({}, initRolesForm)\r\n        } else {\r\n          this.roleForm = Object.assign({}, this.roleData)\r\n        }\r\n      }\r\n      //\r\n      this.isVisible = isShow\r\n    }\r\n  },\r\n  methods: {\r\n    save () {\r\n      this.$refs.roleForm.validate(isValid => {\r\n        if (isValid) {\r\n          const params = Object.assign({}, this.roleForm)\r\n          const submitType = this.isCreate ? createRole : updateRole\r\n          const submitText = this.isCreate ? '新增' : '编辑'\r\n          submitType(params).then(res => {\r\n            this.$message({\r\n              message: `${submitText}角色成功!`,\r\n              type: 'success'\r\n            })\r\n            this.cancel()\r\n            this.$emit('updateList', this.searchParams)\r\n          })\r\n        }\r\n      })\r\n    },\r\n    cancel () {\r\n      this.roleForm = Object.assign({}, initRolesForm)\r\n      this.$refs.roleForm.resetFields()\r\n      this.$emit('update:show', false)\r\n      this.$emit('update:roleData', Object.create(null))\r\n      this.isVisible = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/SystemManagement/Role/Components/RoleUpdate.vue","var normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleUpdate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleUpdate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d820055c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./RoleUpdate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/SystemManagement/Role/Components/RoleUpdate.vue\n// module id = null\n// module chunks = ","<template>\r\n    <el-dialog\r\n        width=\"600px\"\r\n        title=\"线路授权\"\r\n        :visible=\"isVisible\"\r\n        @close=\"cancel\"\r\n    >\r\n        <div class=\"tree-content\">\r\n            <el-tree\r\n            ref=\"tree\"\r\n            :data=\"treeData\"\r\n            node-key=\"id\"\r\n            :props=\"defaultProps\"\r\n            show-checkbox\r\n            :default-checked-keys=\"checkedNodes\"\r\n            :default-expanded-keys=\"expandNodes\"\r\n            @check-change=\"handleCheckNode\"\r\n        ></el-tree>\r\n        </div>\r\n        <template slot=\"footer\" class=\"flex-right\">\r\n            <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n            <el-button @click=\"cancel\">取消</el-button>\r\n        </template>\r\n    </el-dialog>\r\n</template>\r\n<script>\r\n/**\r\n * RolesLine Tree Resouces Component\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.03.20\r\n */\r\nimport { generateTree } from '@/utils/generateTree'\r\n// api\r\nimport { getRolesLineRes, updateRolesLineRes, getRolesLineAuthRes } from '@/api/role'\r\n\r\nexport default {\r\n  name: 'RoleLineRes',\r\n  data () {\r\n    return {\r\n      isVisible: false,\r\n      treeData: [],\r\n      checkedNodes: [],\r\n      expandNodes: [],\r\n      defaultProps: {\r\n        label: 'name'\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    roleData: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n\r\n  },\r\n  watch: {\r\n    show (isShow) {\r\n      if (isShow) {\r\n        this.initLineTree()\r\n      }\r\n      this.isVisible = isShow\r\n    }\r\n  },\r\n  methods: {\r\n    initLineTree () {\r\n      const roleParentId = this.roleData.roleParentId\r\n      getRolesLineRes({roleParentId}).then(res => {\r\n        this.treeData = generateTree(res)\r\n        res.forEach(node => {\r\n          // if (node.checked) this.checkedNodes.push(node.id)\r\n          if (node.pId === '') this.expandNodes.push(node.id)\r\n        })\r\n      })\r\n        .then(() => {\r\n        // 查找已授权线路数据,并默认勾选\r\n          const roleUuid = this.roleData.roleUuid\r\n          getRolesLineAuthRes({roleUuid}).then(res => {\r\n            if (res && res.length) {\r\n              this.checkedNodes = res\r\n            } else {\r\n              this.checkedNodes = []\r\n            }\r\n            this.$refs.tree.setCheckedKeys(this.checkedNodes)\r\n          })\r\n        })\r\n    },\r\n    handleCheckNode (data, checked, indeterminate) {\r\n    //   console.log(data, checked, indeterminate)\r\n    },\r\n    getCheckdNodesArr (Nodes) {\r\n      let checkedNodesList = []\r\n      Nodes.forEach(node => {\r\n        if (node.levelsType === 'LINE') {\r\n          checkedNodesList.push(node.id)\r\n        }\r\n      })\r\n      return checkedNodesList\r\n    },\r\n    save () {\r\n      const checkedNodes = this.$refs.tree.getCheckedNodes()\r\n      let checkdNodesArr = this.getCheckdNodesArr(checkedNodes)\r\n      const parmas = {\r\n        roleList: [this.roleData.rolesUuid],\r\n        lineArr: checkdNodesArr\r\n      }\r\n      console.log('parmas', parmas)\r\n      updateRolesLineRes(parmas).then(res => {\r\n        this.$message({\r\n          message: `授权线路成功!`,\r\n          type: 'success'\r\n        })\r\n        this.$emit('updateList')\r\n        this.cancel()\r\n      })\r\n    },\r\n    cancel () {\r\n      this.$emit('update:show', false)\r\n      this.$emit('update:roleData', Object.create(null))\r\n      this.isVisible = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.tree-content{\r\n    max-height:400px;\r\n    overflow-y:auto;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/SystemManagement/Role/Components/RoleLineRes.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3d509722\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"D:\\\\\\\\workspace\\\\\\\\wms_web\\\\\\\\source\\\\\\\\admin\\\\\\\\src\\\\\\\\common\\\\\\\\style\\\\\\\\common.scss\\\"]}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./RoleLineRes.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleLineRes.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleLineRes.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3d509722\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./RoleLineRes.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3d509722\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/SystemManagement/Role/Components/RoleLineRes.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
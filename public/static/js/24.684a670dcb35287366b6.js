webpackJsonp([24,58,133],{"5eCU":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"仓库",prop:"warehouseUuid"}},[a("el-select",{attrs:{placeholder:"请选择仓库"},on:{change:e.getMerchantsList},model:{value:e.searchForm.warehouseUuid,callback:function(t){e.$set(e.searchForm,"warehouseUuid",t)},expression:"searchForm.warehouseUuid"}},e._l(e.warehouseList,function(t,r){return a("el-option",{key:r,attrs:{label:t.warehouseName,value:t.warehouseUuid}},[e._v(e._s(t.warehouseName))])}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商户",prop:"merchantUuid"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择商户",filterable:""},on:{change:e.merchantChange},model:{value:e.searchForm.merchantUuid,callback:function(t){e.$set(e.searchForm,"merchantUuid",t)},expression:"searchForm.merchantUuid"}},e._l(e.merchantsList,function(t,r){return a("el-option",{key:r,attrs:{label:t.userName,value:t.userUuid}},[e._v(e._s(t.userName))])}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌",prop:"productBrand"}},[a("el-select",{attrs:{placeholder:"请选择品牌",clearable:"",filterable:""},on:{change:e.brandChange},model:{value:e.searchForm.productBrand,callback:function(t){e.$set(e.searchForm,"productBrand",t)},expression:"searchForm.productBrand"}},e._l(e.brandList,function(t,r){return a("el-option",{key:r,attrs:{label:t,value:t}},[e._v(e._s(t))])}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开始日期",prop:"beginDate"}},[a("el-date-picker",{staticClass:"w100p",attrs:{type:"date",align:"right",clearable:"","unlink-panels":"","range-separator":"至",placeholder:"请选择开始日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",size:"mini"},model:{value:e.searchForm.beginDate,callback:function(t){e.$set(e.searchForm,"beginDate",t)},expression:"searchForm.beginDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结束日期",prop:"endDate"}},[a("el-date-picker",{staticClass:"w100p",attrs:{type:"date",align:"right",clearable:"","unlink-panels":"","range-separator":"至",placeholder:"请选择结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",size:"mini"},model:{value:e.searchForm.endDate,callback:function(t){e.$set(e.searchForm,"endDate",t)},expression:"searchForm.endDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"型号",prop:"productModelName"}},[a("el-select",{attrs:{placeholder:"请选择型号",clearable:"",filterable:""},model:{value:e.searchForm.productModelName,callback:function(t){e.$set(e.searchForm,"productModelName",t)},expression:"searchForm.productModelName"}},e._l(e.modelList,function(t,r){return a("el-option",{key:r,attrs:{label:t,value:t}},[e._v(e._s(t))])}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"货品类型",prop:"productType"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择货品类型"},model:{value:e.searchForm.productType,callback:function(t){e.$set(e.searchForm,"productType",t)},expression:"searchForm.productType"}},[a("el-option",{attrs:{label:"小件",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"套件",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"单品",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"flex-right",attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]}},"7RFY":function(e,t){},GIUx:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("common-wrapper",[a("stock-management-search",{staticClass:"search",attrs:{warehouseList:e.warehouseList,merchantsList:e.merchantsList,modelBrand:e.modelBrand,brandList:e.brandList,allModelList:e.modelList},on:{getMerchants:e.getMerchantsList,getBrandModel:e.getBrandModel,search:e.queryList,rest:e.rest}})],1),e._v(" "),a("nav-button",[a("el-button-group",[a("el-button",{attrs:{icon:"fdddfont icon-add-new"},on:{click:e.handleExport}},[e._v("导出库存明细")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击选择列表数据查看明细详情",placement:"right"}},[a("el-button",{attrs:{icon:"fdddfont icon-shouquan",disabled:!e.isButtonIsDisabled},on:{click:e.handelDetail}},[e._v("查看明细详情")])],1)],1)],1),e._v(" "),a("common-wrapper",[a("common-table",{attrs:{flex:310}},[a("template",{slot:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isListLoading,expression:"isListLoading"}],ref:"userTable",attrs:{height:"100%",border:!0,stripe:"","highlight-current-row":"",data:e.tableData,"tooltip-effect":"light"},on:{"row-click":e.getUserDetail,"current-change":function(t){return e.selectRow=t}}},[a("el-table-column",{attrs:{sortable:"",prop:"productMerchant",label:"商户"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"productBrand",label:"品牌"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"productName",label:"货品名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"productItemName",label:"子件名",width:"100","show-tooltip-when-overflow":!0}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"productModel",label:"型号","show-tooltip-when-overflow":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"productColor",label:"颜色","show-tooltip-when-overflow":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"productStandard",label:"规格","show-tooltip-when-overflow":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"productType",label:"货品类型",formatter:e.productTypeFormatter}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"productCount",label:"包装数"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"goodCount",label:"剩余数量"}})],1)],1)],2)],1),e._v(" "),a("stock-detail",{attrs:{show:e.isDetailVisible,searchData:e.modifyStock},on:{"update:show":function(t){e.isDetailVisible=t},"update:searchData":function(t){e.modifyStock=t},"update:search-data":function(t){e.modifyStock=t}}})],1)},staticRenderFns:[]}},La5t:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"90%",title:"库存详情",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"lock-scroll":!0},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[a("common-wrapper",[a("common-table",{attrs:{flex:350}},[a("template",{slot:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isListLoading,expression:"isListLoading"}],ref:"DetailTable",attrs:{height:"100%",stripe:"",border:!0,"tooltip-effect":"light","highlight-current-row":"",data:e.tableData}},[a("el-table-column",{attrs:{prop:"productMerchant",label:"商户","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productBrand",label:"品牌"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"货品名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productItemName",label:"子件名","show-overflow-tooltip":!0,"min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productModel",label:"型号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productColor",label:"颜色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productStandard",label:"规格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"storageName",label:"库位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productRemarks",label:"备注","min-width":"120","show-tooltip-when-overflow":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiveDate",label:"入库时间",formatter:e.formatDate,width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productRetainTime",label:"货物存货时间",width:"120"}})],1)],1)],2)],1)],1)},staticRenderFns:[]}},YwWY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("aA9S"),o=a.n(r),s=a("fBur"),n=a("ryJa"),i=a.n(n),l={name:"StockManagementSearch",data:function(){return{modelList:[],searchForm:{warehouseUuid:"",merchantUuid:"",productBrand:"",entryTime:[],beginDate:"",endDate:"",productModelName:"",productType:"",productRemark:""}}},props:{warehouseList:{type:Array,required:!0},merchantsList:{type:Array,required:!0},brandList:{type:Array},allModelList:{type:Array},modelBrand:{type:Array}},watch:{allModelList:function(e){this.modelList=o()({},e)}},activated:function(){this.searchForm={warehouseUuid:"",merchantUuid:"",productBrand:"",entryTime:[],beginDate:"",endDate:"",productModelName:"",productType:"",productRemark:""},this.searchForm.warehouseUuid=Object(s.b)("warehouseUuid"),this.$emit("getBrandModel",{warehouseUuid:Object(s.b)("warehouseUuid")}),this.search()},mounted:function(){this.searchForm.warehouseUuid=Object(s.b)("warehouseUuid"),this.search()},methods:{search:function(){if(this.searchForm.endDate&&this.searchForm.beginDate&&(i()(this.searchForm.endDate).isBefore(this.searchForm.beginDate)||i()(this.searchForm.endDate).isSame(this.searchForm.beginDate)))return this.$message({message:"结束日期不能早于开始日期，请重新选择！",type:"warning"}),void(this.searchForm.endDate=null);this.$emit("search",o()({},this.searchForm))},getMerchantsList:function(e){Object(s.e)("warehouseUuid",e),this.searchForm.merchantUuid="",this.$emit("getMerchants",o()({},this.searchForm)),this.$emit("getBrandModel",{warehouseUuid:Object(s.b)("warehouseUuid")})},merchantChange:function(e){this.searchForm.productBrand="",this.searchForm.productModelName="",this.$emit("getBrandModel",{warehouseUuid:Object(s.b)("warehouseUuid"),merchantUuid:this.searchForm.merchantUuid})},brandChange:function(e){if(this.searchForm.productModelName="",""===e)this.modelList=o()({},this.allModelList);else{var t;t=this.modelBrand.find(function(t){return t.productBrand===e}),this.modelList=t.productModel}},closeSearch:function(e){this.$emit("closeSearch")},resetForm:function(e){this.$refs[e].resetFields(),this.searchForm.warehouseUuid=Object(s.b)("warehouseUuid"),this.$emit("rest",o()({},this.searchForm))}}},c=a("5eCU"),u=a.n(c);var d=function(e){a("7RFY")},h=a("C7Lr")(l,u.a,!1,d,"data-v-9ef20a62",null);t.default=h.exports},ZW3F:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Q+Ik"),o=a.n(r),s=a("HzJ8"),n=a.n(s),i=a("aA9S"),l=a.n(i),c=a("KH7x"),u=a.n(c),d=a("IYkF"),h=a.n(d),m=a("ryJa"),p=a.n(m),b=a("I8tE"),f=a("0+j4"),g=a("aIe1"),v={name:"StockDetail",components:{CommonWrapper:f.a,CommonTable:g.a},data:function(){return{isVisible:!1,id:"",tableData:[],isListLoading:!1,pagination:{pageNum:1,pageSize:10,total:0}}},props:{show:{type:Boolean,default:!1},modifyUser:{type:Object},searchData:{type:Object}},watch:{show:function(e){this.isVisible=e},modifyUser:function(e){if(e){var t=h()(null),a=!0,r=!1,s=void 0;try{for(var i,c=n()(o()(e));!(a=(i=c.next()).done);a=!0){var d=i.value,m=u()(d,2),p=m[0],b=m[1];void 0!==this.userForm[p]&&(t[p]=b)}}catch(e){r=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw s}}this.userForm.userUuid=e.userUuid,this.userForm=l()({},this.userForm,t)}},searchData:function(e){console.log("res",e),this.isListLoading=!0,e?this.getDetail(e):console.log("resnull")}},methods:{changePage:function(e){this.pagination.pageNum=e,this.getDetail(this.searchData)},cancel:function(){this.isVisible=!1,this.$emit("update:show",!1),this.$emit("update:searchData",null)},getDetail:function(e){var t=this;Object(b.z)(e).then(function(e){t.tableData=e,t.isListLoading=!1})},formatDate:function(e){if(e.receiveDate)return p()(e.receiveDate).utcOffset(8).format("YYYY-MM-DD HH:mm:ss")},formatMinute:function(e){if(e.productRetainTime){var t=Number(e.productRetainTime.split("分")[0]);return(Math.floor(t/60).toString().length<2?"0"+Math.floor(t/60).toString():Math.floor(t/60).toString())+":"+((t%60).toString().length<2?"0"+(t%60).toString():(t%60).toString())}}}},w=a("La5t"),y=a.n(w),L=a("C7Lr")(v,y.a,!1,null,null,null);t.default=L.exports},ZkXC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("rVsN"),o=a.n(r),s=a("4YfN"),n=a.n(s),i=a("ryJa"),l=a.n(i),c=a("dF+P"),u=a("Jky9"),d=a("Jns3"),h=a("0+j4"),m=a("aIe1"),p=a("YwWY"),b=a("ZW3F"),f=(a("fBur"),a("4+6g")),g=a("I8tE"),v={name:"StockManagement",mixins:[c.a],data:function(){return{comp:this,buttonData:[],tableData:[],selectRow:null,isListLoading:!1,warehouseList:this.$store.getters.warehouseList,merchantsList:[],brandList:[],modelList:[],modelBrand:[],isCreateFormVisible:!1,isDetailVisible:!1,isRoleAuthVisible:!1,modifyStock:null,pagination:{pageNum:1,pageSize:10,total:0},searchParams:{}}},mounted:function(){this.getMerchantsList()},computed:{isButtonIsDisabled:function(){return null!==this.selectRow}},methods:{queryList:function(e){var t=this.searchParams=e;this.getStockManagement(n()({},t,{pageNum:this.pagination.pageNum,pageSize:this.pagination.pageSize}))},getStockManagement:function(e){var t=this;this.isListLoading=!0,Object(g.A)(e).then(function(e){t.tableData=e,t.$refs.userTable.setCurrentRow(t.tableData[0]),t.pagination.total=e.total,t.isListLoading=!1})},getMerchantsList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{warehouseUuid:this.searchParams.warehouseUuid};return new o.a(function(a){Object(f.f)(t).then(function(t){t.error||(e.merchantsList=t,a())})})},getBrandModel:function(e){var t=this;Object(f.h)(e).then(function(e){e.error||(t.brandList=[],t.modelList=[],e.forEach(function(e,a){t.brandList.push(e.productBrand),e.productModel.forEach(function(e){t.modelList.push(e)})}),t.modelBrand=e)})},rest:function(e){var t=this.searchParams=e;this.getStockManagement(n()({},t,{pageNum:1,pageSize:this.pagination.pageSize}))},handelDetail:function(){var e=this.searchParams,t=this.selectRow;this.modifyStock=n()({},e,t),this.isDetailVisible=!0},isButtonDisabled:function(){return this.selectRow.id},getUserDetail:function(e,t){},changePage:function(e){this.pagination.pageNum=e,this.queryList(this.searchParams)},formatDate:function(e){},productTypeFormatter:function(e){return"1"===e.productType?"套件":"0"===e.productType?"小件":"2"===e.productType?"单品":"未知"},handleExport:function(){var e=this.searchParams;Object(g.B)(e).then(function(e){var t=e.data,a=new Blob([t],{type:"application/ms-excel"}),r="库存明细统计"+l()(new Date).format("YYYYMMDDHHmm")+".xls";if("download"in document.createElement("a")){var o=document.createElement("a");o.download=r,o.style.display="none",o.href=URL.createObjectURL(a),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(a,r)})}},components:{NavButton:u.a,NavPremissonButton:d.a,CommonWrapper:h.a,CommonTable:m.a,StockManagementSearch:p.default,StockDetail:b.default}},w=a("GIUx"),y=a.n(w),L=a("C7Lr")(v,y.a,!1,null,null,null);t.default=L.exports}});
//# sourceMappingURL=24.684a670dcb35287366b6.js.map
{"version":3,"sources":["webpack:///./source/admin/src/views/BasicInformation/Line/Components/LineUpdate.vue?168f","webpack:///source/admin/src/views/BasicInformation/Line/Components/LineUpdate.vue","webpack:///./source/admin/src/views/BasicInformation/Line/Components/LineUpdate.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","width","title","visible","isVisible","close-on-click-modal","close-on-press-escape","on","update:visible","$event","close","cancel","ref","model","lineForm","rules","formRules","label-width","span","label","prop","placeholder","value","callback","$$v","$set","expression","_v","change","getLineList","lineOrgUuid","_l","item","key","orgUuid","orgName","lineUuid","lineName","firstChange","disabled","endChange","line","index","required","message","trigger","type","checkbldDeviceLine","bldDeviceLineId","_n","offset","click","save","staticRenderFns","LineUpdate","name","data","firstTimes","endTimes","lineOrgs","lines","parLineUuid","lineIsvalid","lineFirstTime","lineLastTime","lineDevices","bldOriginalLineId","props","showEdit","Boolean","default","roleData","Object","watch","isShow","assign_default","mounted","_this","allTime","parseInt","split","i","zeroTime","tenTime","concatTime","concatzeroTime","push","common","then","res","lineDropFlag","methods","val","length","j","_this2","params","_this3","$refs","validate","isValid","management","error","$message","$emit","resetFields","console","log","addRow","deletRow","splice","Component","__webpack_require__","normalizeComponent","LineUpdate_default","a","__webpack_exports__"],"mappings":"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","file":"static/js/138.2d3a87343374d0aa87ef.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"width\":\"640px\",\"title\":\"编辑线路信息\",\"visible\":_vm.isVisible,\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.isVisible=$event},\"close\":_vm.cancel}},[_c('el-form',{ref:\"lineForm\",attrs:{\"model\":_vm.lineForm,\"rules\":_vm.formRules,\"label-width\":\"110px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"线路名称\",\"prop\":\"lineName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入线路名称\"},model:{value:(_vm.lineForm.lineName),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineName\", $$v)},expression:\"lineForm.lineName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"所属机构\",\"prop\":\"lineOrgUuid\"}},[_c('el-select',{on:{\"change\":function($event){return _vm.getLineList(_vm.lineForm.lineOrgUuid)}},model:{value:(_vm.lineForm.lineOrgUuid),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineOrgUuid\", $$v)},expression:\"lineForm.lineOrgUuid\"}},_vm._l((_vm.lineOrgs),function(item){return _c('el-option',{key:item.orgUuid,attrs:{\"label\":item.orgName,\"value\":item.orgUuid}})}),1)],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"是否可用\",\"prop\":\"lineIsvalid\"}},[_c('el-select',{model:{value:(_vm.lineForm.lineIsvalid),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineIsvalid\", $$v)},expression:\"lineForm.lineIsvalid\"}},[_c('el-option',{attrs:{\"label\":\"启用\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":\"0\"}})],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"所属线路\",\"prop\":\"parLineUuid\"}},[_c('el-select',{model:{value:(_vm.lineForm.parLineUuid),callback:function ($$v) {_vm.$set(_vm.lineForm, \"parLineUuid\", $$v)},expression:\"lineForm.parLineUuid\"}},_vm._l((_vm.lines),function(item){return _c('el-option',{key:item.lineUuid,attrs:{\"label\":item.lineName,\"value\":item.lineUuid}})}),1)],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"首班时间\",\"prop\":\"lineFirstTime\"}},[_c('el-select',{attrs:{\"placeholder\":\"起始时间\"},on:{\"change\":_vm.firstChange},model:{value:(_vm.lineForm.lineFirstTime),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineFirstTime\", $$v)},expression:\"lineForm.lineFirstTime\"}},_vm._l((_vm.firstTimes),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value,\"disabled\":item.disabled}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"末班时间\",\"prop\":\"lineLastTime\"}},[_c('el-select',{attrs:{\"placeholder\":\"结束时间\"},on:{\"change\":_vm.endChange},model:{value:(_vm.lineForm.lineLastTime),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineLastTime\", $$v)},expression:\"lineForm.lineLastTime\"}},_vm._l((_vm.endTimes),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value,\"disabled\":item.disabled}})}),1)],1)],1)],1),_vm._v(\" \"),_vm._l((_vm.lineForm.lineDevices),function(line,index){return _c('el-row',{key:index},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"设备线路编号\",\"prop\":'lineDevices.' + index + '.' + 'bldDeviceLineId',\"rules\":[{required: true, message: '请输入设备线路编号', trigger: 'blur' }, {type: 'number',message: '设备线路编号必须为数字值'}]}},[_c('el-input',{attrs:{\"placeholder\":\"请输入设备线路编号\"},on:{\"change\":function($event){return _vm.checkbldDeviceLine(line.bldDeviceLineId)}},model:{value:(line.bldDeviceLineId),callback:function ($$v) {_vm.$set(line, \"bldDeviceLineId\", _vm._n($$v))},expression:\"line.bldDeviceLineId\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"线路编号\",\"prop\":'lineDevices.' + index + '.' + 'bldOriginalLineId',\"rules\":{required: true, message: '请输入线路编号', trigger: 'blur'}}},[_c('el-input',{attrs:{\"placeholder\":\"请输入线路编号\"},model:{value:(line.bldOriginalLineId),callback:function ($$v) {_vm.$set(line, \"bldOriginalLineId\", $$v)},expression:\"line.bldOriginalLineId\"}})],1)],1)],1)}),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":6,\"offset\":18}},[_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)],2)],1)],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-6773e250\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/BasicInformation/Line/Components/LineUpdate.vue\n// module id = SgIg\n// module chunks = 18 138","<template>\r\n    <div>\r\n      <el-dialog\r\n      width=\"640px\"\r\n      title=\"编辑线路信息\"\r\n      :visible.sync=\"isVisible\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      @close=\"cancel\"\r\n      >\r\n        <el-form ref=\"lineForm\" :model=\"lineForm\" :rules=\"formRules\" label-width=\"110px\">\r\n\r\n           <el-row>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"线路名称\" prop=\"lineName\">\r\n                      <el-input v-model=\"lineForm.lineName\" placeholder=\"请输入线路名称\" />\r\n                 </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                  <el-form-item label=\"所属机构\" prop=\"lineOrgUuid\">\r\n                    <el-select v-model=\"lineForm.lineOrgUuid\" @change=\"getLineList(lineForm.lineOrgUuid)\">\r\n                      <el-option\r\n                        v-for=\"item in lineOrgs\"\r\n                        :key=\"item.orgUuid\"\r\n                        :label=\"item.orgName\"\r\n                        :value=\"item.orgUuid\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"是否可用\" prop=\"lineIsvalid\">\r\n                      <el-select v-model=\"lineForm.lineIsvalid\">\r\n                        <el-option label=\"启用\" value=\"1\"></el-option>\r\n                        <el-option label=\"禁用\" value=\"0\"></el-option>\r\n                      </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"所属线路\" prop=\"parLineUuid\">\r\n                    <el-select v-model=\"lineForm.parLineUuid\">\r\n                      <el-option\r\n                        v-for=\"item in lines\"\r\n                        :key=\"item.lineUuid\"\r\n                        :label=\"item.lineName\"\r\n                        :value=\"item.lineUuid\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n             <el-row>\r\n              <el-col :span=\"12\">\r\n                  <el-form-item label=\"首班时间\" prop=\"lineFirstTime\">\r\n                      <!-- <el-time-select\r\n                        placeholder=\"起始时间\"\r\n                        v-entity=\"lineForm.lineFirstTime\"\r\n                        :picker-options=\"{\r\n                          start: '05:00',\r\n                          step: '00:15',\r\n                          end: '23:00',\r\n                          maxTime: lineForm.lineLastTime}\"\r\n                        >\r\n                      </el-time-select> -->\r\n                      <el-select v-model=\"lineForm.lineFirstTime\" placeholder=\"起始时间\" @change=\"firstChange\">\r\n                        <el-option\r\n                        v-for=\"item in firstTimes\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        :disabled=\"item.disabled\">\r\n                        </el-option>\r\n                      </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                  <el-form-item label=\"末班时间\" prop=\"lineLastTime\">\r\n                      <!-- <el-time-select\r\n                        placeholder=\"结束时间\"\r\n                        v-entity=\"lineForm.lineLastTime\"\r\n                        :picker-options=\"{\r\n                          start: '05:00',\r\n                          step: '00:15',\r\n                          end: '23:00',\r\n                          minTime: lineForm.lineFirstTime\r\n                        }\">\r\n                      </el-time-select> -->\r\n                      <el-select v-model=\"lineForm.lineLastTime\" placeholder=\"结束时间\" @change=\"endChange\">\r\n                        <el-option\r\n                        v-for=\"item in endTimes\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        :disabled=\"item.disabled\">\r\n                        </el-option>\r\n                      </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <template>\r\n                <el-row v-for=\"(line, index) in lineForm.lineDevices\" :key=\"index\">\r\n                    <!-- <el-col :span=\"12\" v-for=\"(item, i) in line\" :key=\"index + '-' + i\">\r\n                      <el-form-item :label=\"i === 'bldOriginalLineId' ? '线路编号' : '设备线路编号'\"\r\n                      :prop=\"'lineDevices.' + index + '.' + i\"\r\n                      :rules=\"{required: true, message: '数据不能空，且为数字值', trigger: 'blur', type: 'number'}\">\r\n                         <el-input v-entity.number=\"line[i]\" :placeholder=\"i === 'bldOriginalLineId' ? '请输入线路编号' : '请输入设备线路编号'\" />\r\n                      </el-form-item>\r\n                    </el-col> -->\r\n                    <!-- <el-col :span=\"1\" style=\"margin-left:10px;\">\r\n                      <el-button @click.prevent=\"deletRow(line,index)\" :disabled=\"index === 0\">删除</el-button>\r\n                    </el-col> -->\r\n                    <el-col :span=\"12\" >\r\n                      <el-form-item label=\"设备线路编号\"\r\n                      :prop=\"'lineDevices.' + index + '.' + 'bldDeviceLineId'\"\r\n                      :rules=\"[{required: true, message: '请输入设备线路编号', trigger: 'blur' }, {type: 'number',message: '设备线路编号必须为数字值'}]\">\r\n                         <el-input v-model.number=\"line.bldDeviceLineId\" placeholder=\"请输入设备线路编号\" @change=\"checkbldDeviceLine(line.bldDeviceLineId)\"/>\r\n                      </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"12\" >\r\n                      <el-form-item label=\"线路编号\"\r\n                      :prop=\"'lineDevices.' + index + '.' + 'bldOriginalLineId'\"\r\n                      :rules=\"{required: true, message: '请输入线路编号', trigger: 'blur'}\">\r\n                         <el-input v-model=\"line.bldOriginalLineId\" placeholder=\"请输入线路编号\" />\r\n                      </el-form-item>\r\n                    </el-col>\r\n              </el-row>\r\n            </template>\r\n            <el-row>\r\n                <el-col :span=\"6\" :offset=\"18\">\r\n                    <!-- <el-button type=\"primary\" @click=\"addRow\">新增编号</el-button> -->\r\n                    <el-button @click=\"cancel\">取消</el-button>\r\n                    <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n                </el-col>\r\n            </el-row>\r\n       </el-form>\r\n      </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\n// api\r\nimport { getAllOrgList, linesList } from '@/api/common'\r\nimport { updateLine } from '@/api/management'\r\nexport default {\r\n  name: 'LineUpdate',\r\n  data () {\r\n    return {\r\n      firstTimes: [],\r\n      endTimes: [],\r\n      lineOrgs: [],\r\n      lines: [],\r\n      isVisible: false,\r\n      lineForm: {\r\n        lineName: '', // 线路名称\r\n        parLineUuid: '', //  线路的父线路\r\n        lineIsvalid: '', // 删除标记1：启用0：禁用\r\n        lineOrgUuid: '', // 组织机构主键id\r\n        lineFirstTime: '', // 首班时间\r\n        lineLastTime: '', // 末班时间\r\n        lineDevices: [{\r\n          bldDeviceLineId: '', // 设备线路编\r\n          bldOriginalLineId: '' // 线路编号\r\n        }]\r\n      },\r\n      formRules: {\r\n        lineName: [{required: true, message: '请输入线路名称', trigger: 'blur'}],\r\n        lineOrgUuid: [{required: true, message: '请选择所属机构', trigger: 'change'}],\r\n        lineIsvalid: [{required: true, message: '请选择是否可用', trigger: 'change'}]\r\n      }\r\n\r\n    }\r\n  },\r\n  props: {\r\n    showEdit: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    roleData: {\r\n      type: Object\r\n    }\r\n  },\r\n  watch: {\r\n    showEdit (isShow) {\r\n      this.lineForm = Object.assign({}, this.roleData)\r\n      this.isVisible = isShow\r\n    }\r\n  },\r\n  mounted () {\r\n    const startTime = '5:00'\r\n    const endTime = '23:15'\r\n    const stepTime = '15'\r\n    let intTime = (parseInt(endTime.split(':')[0]) - (parseInt(startTime.split(':')[0]))) * (60 / parseInt(stepTime))\r\n    let floatTime = parseInt(endTime.split(':')[1]) / parseInt(stepTime) - parseInt(startTime.split(':')[1]) / parseInt(stepTime)\r\n    let allTime = intTime + floatTime\r\n    for (let i = 0; i < allTime; i++) {\r\n      var zeroTime = parseInt(startTime.split(':')[1]) // 15\r\n      var tenTime = parseInt(startTime.split(':')[0]) // 5\r\n      zeroTime += parseInt(stepTime) * i % 60\r\n      tenTime += parseInt(parseInt(stepTime) * i / 60)\r\n      if (zeroTime === 60) {\r\n        zeroTime = 0\r\n        tenTime += 1\r\n      }\r\n      var concatTime = tenTime < 10 ? '0' + tenTime : tenTime\r\n      var concatzeroTime = zeroTime < 10 ? '0' + zeroTime : zeroTime\r\n      this.firstTimes.push({value: concatTime + ':' + concatzeroTime, label: concatTime + ':' + concatzeroTime, disabled: false, index: i})\r\n      this.endTimes.push({value: concatTime + ':' + concatzeroTime, label: concatTime + ':' + concatzeroTime, disabled: false, index: i})\r\n    }\r\n    getAllOrgList().then(res => {\r\n      this.lineOrgs = res\r\n    })\r\n    const params = {\r\n      lineOrgUuid: '',\r\n      lineIsvalid: '1',\r\n      lineDropFlag: 0\r\n    }\r\n    linesList(params).then(res => {\r\n      this.lines = res\r\n    })\r\n  },\r\n  methods: {\r\n    firstChange (val) {\r\n      for (let i = 0; i < this.endTimes.length; i++) {\r\n        this.endTimes[i].disabled = false\r\n        if (this.endTimes[i].value === val) {\r\n          for (var j = 0; j <= i; j++) {\r\n            this.endTimes[j].disabled = true\r\n            if (this.endTimes[j].value === this.lineForm.lineLastTime) {\r\n              this.lineForm.lineLastTime = ''\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    endChange (val) {\r\n    //   console.log(val)\r\n    },\r\n    // 通过组织机构的id和启用，是否删除来获取当前线路\r\n    getLineList (lineOrgUuid) {\r\n      this.lineForm.parLineUuid = ''\r\n      this.lines = []\r\n      const params = {lineOrgUuid: lineOrgUuid, lineIsvalid: '1', lineDropFlag: 0}\r\n      linesList(params).then(res => {\r\n        this.lines = res\r\n      })\r\n    },\r\n    save () {\r\n      this.$refs.lineForm.validate(isValid => {\r\n        if (isValid) {\r\n          const params = Object.assign({}, this.lineForm)\r\n          updateLine(params).then(res => {\r\n            // console.log(res)\r\n            if (!res.error) {\r\n              this.$message({\r\n                message: `编辑路线成功!`,\r\n                type: 'success'\r\n              })\r\n              this.cancel()\r\n              this.$emit('updateList')\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    cancel () {\r\n      this.$refs.lineForm.resetFields()\r\n      this.$emit('update:showEdit', false)\r\n      this.isVisible = false\r\n    },\r\n    checkbldDeviceLine (val) {\r\n      console.log(val)\r\n    },\r\n    addRow () {\r\n      this.lineForm.lineDevices.push({bldDeviceLineId: '', bldOriginalLineId: ''})\r\n    },\r\n    deletRow (line, index) {\r\n      this.lineForm.lineDevices.splice(index, 1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/BasicInformation/Line/Components/LineUpdate.vue","var normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./LineUpdate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./LineUpdate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6773e250\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./LineUpdate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/BasicInformation/Line/Components/LineUpdate.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
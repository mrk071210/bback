{"version":3,"sources":["webpack:///source/admin/src/views/BasicInformation/Line/Components/LineCreate.vue","webpack:///./source/admin/src/views/BasicInformation/Line/Components/LineCreate.vue","webpack:///./source/admin/src/views/BasicInformation/Line/Components/LineCreate.vue?1365"],"names":["LineCreate","name","data","firstTimes","endTimes","lineOrgs","lines","isVisible","lineForm","lineName","parLineUuid","lineIsvalid","lineOrgUuid","lineFirstTime","lineLastTime","lineDevices","bldDeviceLineId","bldOriginalLineId","formRules","required","message","trigger","props","showCreate","type","Boolean","default","watch","isShow","this","mounted","_this","allTime","parseInt","split","i","zeroTime","tenTime","concatTime","concatzeroTime","push","value","label","disabled","index","Object","common","then","res","lineDropFlag","methods","firstChange","val","length","j","endChange","getLineList","_this2","params","save","_this3","$refs","validate","isValid","assign_default","management","error","$message","cancel","$emit","resetFields","checkbldDeviceLine","console","log","addRow","deletRow","line","splice","Component","__webpack_require__","normalizeComponent","LineCreate_default","a","__webpack_exports__","module","exports","render","_vm","_h","$createElement","_c","_self","attrs","width","title","visible","close-on-click-modal","close-on-press-escape","on","update:visible","$event","close","ref","model","rules","label-width","span","prop","placeholder","callback","$$v","$set","expression","_v","change","_l","item","key","orgUuid","orgName","lineUuid","_n","offset","click","staticRenderFns"],"mappings":"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","file":"static/js/139.cf35c3fd63b24cfdab66.js","sourcesContent":["<template>\r\n    <div>\r\n      <el-dialog\r\n      width=\"640px\"\r\n      title=\"新增线路信息\"\r\n      :visible.sync=\"isVisible\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      @close=\"cancel\"\r\n      >\r\n        <el-form ref=\"lineForm\" :model=\"lineForm\" :rules=\"formRules\" label-width=\"110px\">\r\n\r\n           <el-row>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"线路名称\" prop=\"lineName\">\r\n                      <el-input v-model=\"lineForm.lineName\" placeholder=\"请输入线路名称\" />\r\n                 </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                  <el-form-item label=\"所属机构\" prop=\"lineOrgUuid\">\r\n                    <el-select v-model=\"lineForm.lineOrgUuid\" @change=\"getLineList(lineForm.lineOrgUuid)\">\r\n                      <el-option\r\n                        v-for=\"item in lineOrgs\"\r\n                        :key=\"item.orgUuid\"\r\n                        :label=\"item.orgName\"\r\n                        :value=\"item.orgUuid\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"是否可用\" prop=\"lineIsvalid\">\r\n                      <el-select v-model=\"lineForm.lineIsvalid\">\r\n                        <el-option label=\"启用\" value=\"1\"></el-option>\r\n                        <el-option label=\"禁用\" value=\"0\"></el-option>\r\n                      </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"所属线路\" prop=\"parLineUuid\">\r\n                    <el-select v-model=\"lineForm.parLineUuid\">\r\n                      <el-option\r\n                        v-for=\"item in lines\"\r\n                        :key=\"item.lineUuid\"\r\n                        :label=\"item.lineName\"\r\n                        :value=\"item.lineUuid\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"12\">\r\n                  <el-form-item label=\"首班时间\" prop=\"lineFirstTime\">\r\n                      <!-- <el-time-select\r\n                        placeholder=\"起始时间\"\r\n                        v-entity=\"lineForm.lineFirstTime\"\r\n                        :picker-options=\"{\r\n                          start: '05:00',\r\n                          step: '00:15',\r\n                          end: '23:00',\r\n                          maxTime: lineForm.lineLastTime}\"\r\n                        >\r\n                      </el-time-select> -->\r\n                      <el-select v-model=\"lineForm.lineFirstTime\" placeholder=\"起始时间\" @change=\"firstChange\">\r\n                        <el-option\r\n                        v-for=\"item in firstTimes\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        :disabled=\"item.disabled\">\r\n                        </el-option>\r\n                      </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                  <el-form-item label=\"末班时间\" prop=\"lineLastTime\">\r\n                      <!-- <el-time-select\r\n                        placeholder=\"结束时间\"\r\n                        v-entity=\"lineForm.lineLastTime\"\r\n                        :picker-options=\"{\r\n                          start: '05:00',\r\n                          step: '00:15',\r\n                          end: '23:00',\r\n                          minTime: lineForm.lineFirstTime\r\n                        }\">\r\n                      </el-time-select> -->\r\n                      <el-select v-model=\"lineForm.lineLastTime\" placeholder=\"结束时间\" @change=\"endChange\">\r\n                        <el-option\r\n                        v-for=\"item in endTimes\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        :disabled=\"item.disabled\">\r\n                        </el-option>\r\n                      </el-select>\r\n                  </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <template>\r\n                <el-row v-for=\"(line, index) in lineForm.lineDevices\" :key=\"index\">\r\n                    <!-- {{line, index}} -->\r\n                   <!-- <el-col :span=\"12\" v-for=\"(item, i) in line\" :key=\"index + '-' + i\"> -->\r\n                      <!-- <el-form-item :label=\"i === 'bldOriginalLineId' ? '线路编号' : '设备线路编号'\"\r\n                      :prop=\"'lineDevices.' + index + '.' + i\"\r\n                      :rules=\"{required: true, message: '数据不能空，且为数字值', trigger: 'blur', type: 'number'}\">\r\n                         <el-input v-entity.number=\"line[i]\" :placeholder=\"i === 'bldOriginalLineId' ? '请输入线路编号' : '请输入设备线路编号'\" />\r\n                      </el-form-item> -->\r\n                    <!-- </el-col> -->\r\n                    <!-- <el-col :span=\"1\" style=\"margin-left:10px;\">\r\n                      <el-button @click.prevent=\"deletRow(line,index)\" :disabled=\"index === 0\">删除</el-button>\r\n                    </el-col> -->\r\n                    <el-col :span=\"12\" >\r\n                      <el-form-item label=\"设备线路编号\"\r\n                      :prop=\"'lineDevices.' + index + '.' + 'bldDeviceLineId'\"\r\n                      :rules=\"[{required: true, message: '请输入设备线路编号', trigger: 'blur' }, {type: 'number',message: '设备线路编号必须为数字值'}]\">\r\n                         <el-input v-model.number=\"line.bldDeviceLineId\" placeholder=\"请输入设备线路编号\" @change=\"checkbldDeviceLine(line.bldDeviceLineId)\"/>\r\n                      </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"12\" >\r\n                      <el-form-item label=\"线路编号\"\r\n                      :prop=\"'lineDevices.' + index + '.' + 'bldOriginalLineId'\"\r\n                      :rules=\"{required: true, message: '请输入线路编号', trigger: 'blur'}\">\r\n                         <el-input v-model=\"line.bldOriginalLineId\" placeholder=\"请输入线路编号\" />\r\n                      </el-form-item>\r\n                    </el-col>\r\n              </el-row>\r\n            </template>\r\n            <el-row>\r\n                <el-col :span=\"6\" :offset=\"18\">\r\n                    <!-- <el-button type=\"primary\" @click=\"addRow\">新增编号</el-button> -->\r\n                    <el-button @click=\"cancel\">取消</el-button>\r\n                    <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n                </el-col>\r\n            </el-row>\r\n       </el-form>\r\n      </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\n// api\r\nimport { getAllOrgList, linesList } from '@/api/common'\r\nimport { createLine } from '@/api/management'\r\nexport default {\r\n  name: 'LineCreate',\r\n  data () {\r\n    return {\r\n      firstTimes: [],\r\n      endTimes: [],\r\n      lineOrgs: [],\r\n      lines: [],\r\n      isVisible: false,\r\n      lineForm: {\r\n        lineName: '', // 线路名称\r\n        parLineUuid: '', //  线路的父线路\r\n        lineIsvalid: '', // 删除标记1：启用0：禁用\r\n        lineOrgUuid: '', // 组织机构主键id\r\n        lineFirstTime: '', // 首班时间\r\n        lineLastTime: '', // 末班时间\r\n        lineDevices: [{\r\n          bldDeviceLineId: '', // 设备线路编\r\n          bldOriginalLineId: '' // 线路编号\r\n        }]\r\n      },\r\n      formRules: {\r\n        lineName: [{required: true, message: '请输入线路名称', trigger: 'blur'}],\r\n        lineOrgUuid: [{required: true, message: '请选择所属机构', trigger: 'change'}],\r\n        lineIsvalid: [{required: true, message: '请选择是否可用', trigger: 'change'}]\r\n      }\r\n\r\n    }\r\n  },\r\n  props: {\r\n    showCreate: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  watch: {\r\n    showCreate (isShow) {\r\n      this.isVisible = isShow\r\n    }\r\n  },\r\n  mounted () {\r\n    const startTime = '5:00'\r\n    const endTime = '23:15'\r\n    const stepTime = '15'\r\n    let intTime = (parseInt(endTime.split(':')[0]) - (parseInt(startTime.split(':')[0]))) * (60 / parseInt(stepTime))\r\n    let floatTime = parseInt(endTime.split(':')[1]) / parseInt(stepTime) - parseInt(startTime.split(':')[1]) / parseInt(stepTime)\r\n    let allTime = intTime + floatTime\r\n    for (let i = 0; i < allTime; i++) {\r\n      var zeroTime = parseInt(startTime.split(':')[1]) // 15\r\n      var tenTime = parseInt(startTime.split(':')[0]) // 5\r\n      zeroTime += parseInt(stepTime) * i % 60\r\n      tenTime += parseInt(parseInt(stepTime) * i / 60)\r\n      if (zeroTime === 60) {\r\n        zeroTime = 0\r\n        tenTime += 1\r\n      }\r\n      var concatTime = tenTime < 10 ? '0' + tenTime : tenTime\r\n      var concatzeroTime = zeroTime < 10 ? '0' + zeroTime : zeroTime\r\n      this.firstTimes.push({value: concatTime + ':' + concatzeroTime, label: concatTime + ':' + concatzeroTime, disabled: false, index: i})\r\n      this.endTimes.push({value: concatTime + ':' + concatzeroTime, label: concatTime + ':' + concatzeroTime, disabled: false, index: i})\r\n    }\r\n\r\n    getAllOrgList().then(res => {\r\n      this.lineOrgs = res\r\n    })\r\n    const params = {\r\n      lineOrgUuid: '',\r\n      lineIsvalid: '1',\r\n      lineDropFlag: 0\r\n    }\r\n    linesList(params).then(res => {\r\n      this.lines = res\r\n    })\r\n  },\r\n  methods: {\r\n    firstChange (val) {\r\n      for (let i = 0; i < this.endTimes.length; i++) {\r\n        this.endTimes[i].disabled = false\r\n        if (this.endTimes[i].value === val) {\r\n          for (var j = 0; j <= i; j++) {\r\n            this.endTimes[j].disabled = true\r\n            if (this.endTimes[j].value === this.lineForm.lineLastTime) {\r\n              this.lineForm.lineLastTime = ''\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    endChange (val) {\r\n    //   console.log(val)\r\n    },\r\n    // 通过组织机构的id和启用，是否删除来获取当前线路\r\n    getLineList (lineOrgUuid) {\r\n      this.lineForm.parLineUuid = ''\r\n      this.lines = []\r\n      const params = {lineOrgUuid: lineOrgUuid, lineIsvalid: '1', lineDropFlag: 0}\r\n      linesList(params).then(res => {\r\n        this.lines = res\r\n      })\r\n    },\r\n    save () {\r\n      this.$refs.lineForm.validate(isValid => {\r\n        if (isValid) {\r\n          const params = Object.assign({}, this.lineForm)\r\n          createLine(params).then(res => {\r\n            if (!res.error) {\r\n              this.$message({\r\n                message: `新增路线成功!`,\r\n                type: 'success'\r\n              })\r\n              this.cancel()\r\n              this.$emit('createList')\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    cancel () {\r\n      this.$refs.lineForm.resetFields()\r\n      this.$emit('update:showCreate', false)\r\n      this.isVisible = false\r\n    },\r\n    checkbldDeviceLine (val) {\r\n      console.log(val)\r\n    },\r\n    addRow () {\r\n      this.lineForm.lineDevices.push({bldDeviceLineId: '', bldOriginalLineId: ''})\r\n    },\r\n    deletRow (line, index) {\r\n      this.lineForm.lineDevices.splice(index, 1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/BasicInformation/Line/Components/LineCreate.vue","var normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./LineCreate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./LineCreate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d62af84\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./LineCreate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/BasicInformation/Line/Components/LineCreate.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"width\":\"640px\",\"title\":\"新增线路信息\",\"visible\":_vm.isVisible,\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.isVisible=$event},\"close\":_vm.cancel}},[_c('el-form',{ref:\"lineForm\",attrs:{\"model\":_vm.lineForm,\"rules\":_vm.formRules,\"label-width\":\"110px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"线路名称\",\"prop\":\"lineName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入线路名称\"},model:{value:(_vm.lineForm.lineName),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineName\", $$v)},expression:\"lineForm.lineName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"所属机构\",\"prop\":\"lineOrgUuid\"}},[_c('el-select',{on:{\"change\":function($event){return _vm.getLineList(_vm.lineForm.lineOrgUuid)}},model:{value:(_vm.lineForm.lineOrgUuid),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineOrgUuid\", $$v)},expression:\"lineForm.lineOrgUuid\"}},_vm._l((_vm.lineOrgs),function(item){return _c('el-option',{key:item.orgUuid,attrs:{\"label\":item.orgName,\"value\":item.orgUuid}})}),1)],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"是否可用\",\"prop\":\"lineIsvalid\"}},[_c('el-select',{model:{value:(_vm.lineForm.lineIsvalid),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineIsvalid\", $$v)},expression:\"lineForm.lineIsvalid\"}},[_c('el-option',{attrs:{\"label\":\"启用\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":\"0\"}})],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"所属线路\",\"prop\":\"parLineUuid\"}},[_c('el-select',{model:{value:(_vm.lineForm.parLineUuid),callback:function ($$v) {_vm.$set(_vm.lineForm, \"parLineUuid\", $$v)},expression:\"lineForm.parLineUuid\"}},_vm._l((_vm.lines),function(item){return _c('el-option',{key:item.lineUuid,attrs:{\"label\":item.lineName,\"value\":item.lineUuid}})}),1)],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"首班时间\",\"prop\":\"lineFirstTime\"}},[_c('el-select',{attrs:{\"placeholder\":\"起始时间\"},on:{\"change\":_vm.firstChange},model:{value:(_vm.lineForm.lineFirstTime),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineFirstTime\", $$v)},expression:\"lineForm.lineFirstTime\"}},_vm._l((_vm.firstTimes),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value,\"disabled\":item.disabled}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"末班时间\",\"prop\":\"lineLastTime\"}},[_c('el-select',{attrs:{\"placeholder\":\"结束时间\"},on:{\"change\":_vm.endChange},model:{value:(_vm.lineForm.lineLastTime),callback:function ($$v) {_vm.$set(_vm.lineForm, \"lineLastTime\", $$v)},expression:\"lineForm.lineLastTime\"}},_vm._l((_vm.endTimes),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value,\"disabled\":item.disabled}})}),1)],1)],1)],1),_vm._v(\" \"),_vm._l((_vm.lineForm.lineDevices),function(line,index){return _c('el-row',{key:index},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"设备线路编号\",\"prop\":'lineDevices.' + index + '.' + 'bldDeviceLineId',\"rules\":[{required: true, message: '请输入设备线路编号', trigger: 'blur' }, {type: 'number',message: '设备线路编号必须为数字值'}]}},[_c('el-input',{attrs:{\"placeholder\":\"请输入设备线路编号\"},on:{\"change\":function($event){return _vm.checkbldDeviceLine(line.bldDeviceLineId)}},model:{value:(line.bldDeviceLineId),callback:function ($$v) {_vm.$set(line, \"bldDeviceLineId\", _vm._n($$v))},expression:\"line.bldDeviceLineId\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"线路编号\",\"prop\":'lineDevices.' + index + '.' + 'bldOriginalLineId',\"rules\":{required: true, message: '请输入线路编号', trigger: 'blur'}}},[_c('el-input',{attrs:{\"placeholder\":\"请输入线路编号\"},model:{value:(line.bldOriginalLineId),callback:function ($$v) {_vm.$set(line, \"bldOriginalLineId\", $$v)},expression:\"line.bldOriginalLineId\"}})],1)],1)],1)}),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":6,\"offset\":18}},[_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)],2)],1)],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-5d62af84\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/BasicInformation/Line/Components/LineCreate.vue\n// module id = Zag4\n// module chunks = 18 139"],"sourceRoot":""}
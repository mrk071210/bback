webpackJsonp([135],{omvA:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"600px",title:"角色授权",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[a("common-wrapper",{staticStyle:{margin:"10px 0"}},[a("common-table",[a("template",{slot:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isListLoading,expression:"isListLoading"}],ref:"roleTable",attrs:{height:"350px",stripe:"",data:e.tableData},on:{"selection-change":function(t){return e.selectRow=t}}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rolesName",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rolesEnable",label:"状态",formatter:e.formatStatus}}),e._v(" "),a("el-table-column",{attrs:{prop:"rolesCreateTime",label:"创建时间",formatter:e.formatCreateDate}})],1)],1),e._v(" "),a("template",{slot:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pagination.pageNum,"page-size":e.pagination.pageSize,total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageNum",t)},"current-change":e.changePage}})],1)],2)],1),e._v(" "),a("el-alert",{attrs:{title:"您勾选的角色信息将覆盖账号原角色信息.",type:"warning","show-icon":"",closable:!1}}),e._v(" "),a("template",{slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:!e.selectRow.length},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],2)},staticRenderFns:[]}},pEy0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("HzJ8"),i=a.n(n),o=a("4YfN"),s=a.n(o),r=a("ryJa"),l=a.n(r),c=a("0+j4"),u=a("aIe1"),p=a("bJK+"),g=a("baPR"),m={name:"UserRoleAuth",data:function(){return{isVisible:!1,tableData:[],selectRow:[],isListLoading:!1,pagination:{pageNum:1,pageSize:10,total:0}}},props:{show:{type:Boolean,required:!0},selectedUsers:{type:Array,required:!0}},watch:{show:function(e){e&&this.queryList(),this.isVisible=e}},methods:{queryList:function(e){var t=this.searchParams=e;this.getRoles(s()({},t,{pageNum:this.pagination.pageNum,pageSize:this.pagination.pageSize}))},getRoles:function(e){var t=this;this.isListLoading=!0,Object(g.c)(e).then(function(e){t.tableData=e.list,t.pagination.total=e.total,t.pagination.pageNum=e.pageNum,t.pagination.pageSize=e.pageSize,t.isListLoading=!1;var a=!0,n=!1,o=void 0;try{for(var s,r=i()(t.tableData);!(a=(s=r.next()).done);a=!0){var l=s.value;l.checked&&t.$refs.roleTable.toggleRowSelection(l,!0)}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}})},changePage:function(e){this.pagination.pageNum=e,this.queryList(this.searchParams)},indexMethod:function(e){return e+1+(this.pagination.pageNum-1)*this.pagination.pageSize},formatStatus:function(e,t){return"1"===e.rolesEnable?"正常":"0"===e.rolesEnable?"禁用":"未知"},formatCreateDate:function(e){return l()(e.rolesCreateTime).utcOffset(8).format("YYYY-MM-DD")},save:function(){var e=this,t=this.selectedUsers.map(function(e){return e.userUuid}),a=this.selectRow.map(function(e){return e.roleUuid});Object(p.e)({checkUserList:t,checkedRoleIds:a}).then(function(t){t.error||(e.$message({message:"用户授权成功!",type:"success"}),e.cancel(),e.$emit("updateList"))})},cancel:function(){this.$emit("update:show",!1),this.isVisible=!1}},components:{CommonWrapper:c.a,CommonTable:u.a}},h=a("omvA"),d=a.n(h),f=a("C7Lr")(m,d.a,!1,null,null,null);t.default=f.exports}});
//# sourceMappingURL=135.df51191998ec2235335b.js.map
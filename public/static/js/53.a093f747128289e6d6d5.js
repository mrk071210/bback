webpackJsonp([53],{"9p8o":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("rVsN"),o=a.n(r),l=a("0+j4"),n=a("aIe1"),i=a("m/nF"),s=a("Qw0R"),c={name:"DriverDetail",props:{row:Object},data:function(){return{tableVisible:!1,tableData:[],pageCount:10,currentPage:1,totalCount:null,driverData:{driverName:"",lineName:"",driverOrg:""},styleWH:{width:400,height:400},videoOpts:{src:"",poster:"",preload:!0,controls:!0,muted:!1,autoplay:!1,loop:!1,width:"100%",height:""}}},beforeCreate:function(){},mounted:function(){this.$nextTick(function(){var t=this;this.getVideoData(this.row.warnUuid).then(function(e){t.videoOpts.src=e.url,t.videoOpts.poster=e.poster}),this.getTableData()})},methods:{getVideoData:function(t){var e=this;return new o.a(function(a){Object(s.c)({warnUuid:t}).then(function(t){e.driverData.driverName=t.driverName,e.driverData.lineName=t.lineName,e.driverData.driverOrg=t.driverOrg,a(t)})})},getTableData:function(){var t=this,e={warnUuid:this.row.warnUuid,pageNum:this.currentPage,pageSize:this.pageCount};Object(s.d)(e).then(function(e){t.tableVisible=!0,t.tableData=e.list,t.pageCount=parseInt(e.pageSize),t.currentPage=parseInt(e.pageNum),t.totalCount=parseInt(e.total)})},handleCurrentPage:function(t){this.currentPage=t,this.getTableData()},handleLineData:function(t){this.getVideoData(t)}},components:{CommonWrapper:l.a,CommonTable:n.a,BaiduMapCom:i.default}},u=a("IL09"),p=a.n(u);var d=function(t){a("VIFX")},v=a("C7Lr")(c,p.a,!1,d,"data-v-b6829b5e",null);e.default=v.exports},IL09:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-content"},[a("el-row",[a("el-col",{attrs:{span:14}},[a("common-wrapper",{directives:[{name:"loading",rawName:"v-loading",value:!t.tableVisible,expression:"!tableVisible"}]},[a("common-table",{attrs:{flex:170,minHeight:400}},[a("template",{slot:"table"},[a("el-table",{ref:"table",attrs:{data:t.tableData,"default-sort":{prop:"registerTime",order:"descending"},stripe:""}},[a("el-table-column",{attrs:{prop:"orgName",label:"所属公司"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lineName",label:"线路名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"plateNum",label:"车牌号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"warnType",label:"监测类型"}}),t._v(" "),a("el-table-column",{attrs:{label:"地图定位"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"right",trigger:"click"}},[a("baidu-map-com",{attrs:{row:e.row,styleWH:t.styleWH}}),t._v(" "),a("el-button",{attrs:{slot:"reference",icon:"el-icon-location-outline",circle:""},slot:"reference"})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"触发时间","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-view",round:""},on:{click:function(a){return t.handleLineData(e.row.warnUuid)}}})]}}])})],1)],1),t._v(" "),a("template",{slot:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageCount,layout:"total, prev, pager, next",total:t.totalCount},on:{"current-change":t.handleCurrentPage}})],1)],2)],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("common-wrapper",{staticClass:"commonH"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"list-box"},[a("ul",{staticClass:"list-block"},[a("li",[t._v("司机姓名")]),a("li",[t._v(t._s(t.driverData.driverName))])]),t._v(" "),a("ul",{staticClass:"list-block"},[a("li",[t._v("当前线路")]),a("li",[t._v(t._s(t.driverData.lineName))])]),t._v(" "),a("ul",{staticClass:"list-block"},[a("li",[t._v("所属公司")]),a("li",[t._v(t._s(t.driverData.driverOrg))])])])]),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"player"},[a("video",{attrs:{src:t.videoOpts.src,poster:t.videoOpts.poster,controls:t.videoOpts.controls,preload:t.videoOpts.preload,autoplay:t.videoOpts.autoplay,loop:t.videoOpts.loop,width:t.videoOpts.width},domProps:{muted:t.videoOpts.muted}},[t._v("\n                    您的浏览器不支持 video 标签。\n                  ")])])])],1)],1)],1)],1)],1)},staticRenderFns:[]}},VIFX:function(t,e){}});
//# sourceMappingURL=53.a093f747128289e6d6d5.js.map
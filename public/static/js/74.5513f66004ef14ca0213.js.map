{"version":3,"sources":["webpack:///./source/admin/src/views/SystemManagement/Menu/Components/Tree.vue?1bfc","webpack:///source/admin/src/views/SystemManagement/Menu/Components/Tree.vue","webpack:///./source/admin/src/views/SystemManagement/Menu/Components/Tree.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","ref","on","click","createOrg","_v","editOrg","deleteOrg","staticClass","addRoot","attrs","data","orgTreeData","node-key","props","defaultProps","default-expand-all","expand-on-click-node","render-content","customRender","node-contextmenu","showContextMenu","node-click","handleNodeClick","staticRenderFns","Tree","name","contextmenuSelectedNode","label","clickedNodeData","type","Object","computed","extends_default","vuex_esm","selectedNode","systemColor","theme","systemTheme","mounted","initOrgTree","methods","_this","systemparams","then","res","generateTree","node","nodeCom","$emit","event","tree","$refs","contextMenu","treeMenu","setCurrentKey","id","show","top","clientY","left","clientX","update","_this2","_contextmenuSelectedN","$confirm","confirmButtonText","cancelButtonText","resourceUuid","error","$message","message","catch","createElement","_ref","h","store","_babel_helper_vue_jsx_merge_props_2_0_3_babel_helper_vue_jsx_merge_props_default","class","directives","arg","getCurrentNode","style","backgroundColor","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","Tree_default","a","__webpack_exports__"],"mappings":"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","file":"static/js/74.5513f66004ef14ca0213.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-contextmenu',{ref:\"treeMenu\"},[_c('v-contextmenu-item',{on:{\"click\":_vm.createOrg}},[_vm._v(\"新增菜单\")]),_vm._v(\" \"),_c('v-contextmenu-item',{on:{\"click\":_vm.editOrg}},[_vm._v(\"修改菜单\")]),_vm._v(\" \"),_c('v-contextmenu-item',{on:{\"click\":_vm.deleteOrg}},[_vm._v(\"删除菜单\")])],1),_vm._v(\" \"),_c('el-button',{staticClass:\"addRoot\",on:{\"click\":_vm.addRoot}},[_vm._v(\"创建根节点\")]),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.orgTreeData,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"default-expand-all\":\"\",\"expand-on-click-node\":false,\"render-content\":_vm.customRender},on:{\"node-contextmenu\":_vm.showContextMenu,\"node-click\":_vm.handleNodeClick}})],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-6a3bb3b9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/SystemManagement/Menu/Components/Tree.vue\n// module id = d8Xt\n// module chunks = 12 74","<template>\r\n  <div>\r\n      <v-contextmenu ref=\"treeMenu\">\r\n        <v-contextmenu-item @click=\"createOrg\">新增菜单</v-contextmenu-item>\r\n        <v-contextmenu-item @click=\"editOrg\">修改菜单</v-contextmenu-item>\r\n        <v-contextmenu-item @click=\"deleteOrg\">删除菜单</v-contextmenu-item>\r\n      </v-contextmenu>\r\n      <el-button @click=\"addRoot\" class=\"addRoot\">创建根节点</el-button>\r\n      <el-tree\r\n        ref=\"tree\"\r\n        :data=\"orgTreeData\"\r\n        node-key=\"id\"\r\n        :props=\"defaultProps\"\r\n        default-expand-all\r\n        :expand-on-click-node=\"false\"\r\n        @node-contextmenu=\"showContextMenu\"\r\n        @node-click=\"handleNodeClick\"\r\n        :render-content=\"customRender\"\r\n      >\r\n      </el-tree>\r\n  </div>\r\n</template>\r\n<script>\r\n/**\r\n * System Menu Tree Component\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.06.13\r\n */\r\nimport { mapGetters } from 'vuex'\r\nimport { baseTheme } from '@/utils/theme'\r\nimport { generateTree } from '@/utils/generateTree'\r\n// api\r\nimport { systemMenuTreeList, systemMenuDelete } from '@/api/systemparams'\r\n\r\nexport default {\r\n  name: 'SystemMenuTree',\r\n  data () {\r\n    return {\r\n      orgTreeData: [],\r\n      contextmenuSelectedNode: null,\r\n      defaultProps: {\r\n        label: 'name'\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    clickedNodeData: {\r\n      type: Object\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['systemTheme']),\r\n    selectedNode () {\r\n      return this.clickedNodeData\r\n    },\r\n    systemColor () {\r\n      return baseTheme[this.systemTheme]\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initOrgTree()\r\n  },\r\n  methods: {\r\n    initOrgTree () {\r\n      systemMenuTreeList().then(res => {\r\n        this.orgTreeData = generateTree(res)\r\n      })\r\n    },\r\n    // 节点点击事件\r\n    handleNodeClick (data, node, nodeCom) {\r\n      this.$emit('nodeClick', { data, node, nodeCom })\r\n    },\r\n    // 节点右键弹出菜单\r\n    showContextMenu (event, data, node, nodeCom) {\r\n      if (node) {\r\n        const tree = this.$refs.tree\r\n        const contextMenu = this.$refs.treeMenu\r\n        // 右键设置当前树节点为选中状态\r\n        this.contextmenuSelectedNode = data\r\n        tree.setCurrentKey(data.id)\r\n        // 弹出菜单\r\n        contextMenu.show({top: event.clientY, left: event.clientX})\r\n      }\r\n    },\r\n    update () {\r\n      this.initOrgTree()\r\n    //   console.log('tree updated.')\r\n    },\r\n    // 新增根节点\r\n    addRoot () {\r\n      this.$emit('update:isCreate', true)\r\n      this.$emit('openDialog', 'MenuUpdate', {addRoot:true})\r\n    },\r\n    // 菜单 -- 新增\r\n    createOrg () {\r\n      this.$emit('update:isCreate', true)\r\n      this.$emit('openDialog', 'MenuUpdate', this.contextmenuSelectedNode)\r\n    },\r\n    // 菜单 -- 编辑\r\n    editOrg () {\r\n      this.$emit('update:isCreate', false)\r\n      this.$emit('openDialog', 'MenuUpdate', this.contextmenuSelectedNode)\r\n    },\r\n    // 菜单 -- 删除\r\n    deleteOrg () {\r\n      const { name, id } = this.contextmenuSelectedNode\r\n      if (id) {\r\n        this.$confirm(`确认要删除:[${name}]菜单吗?`, '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          systemMenuDelete({ resourceUuid: id }).then(res => {\r\n            if (!res.error) {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '删除成功!'\r\n              })\r\n              this.initOrgTree()\r\n              this.$emit('updateTree', 'delete')\r\n            }\r\n          })\r\n        }).catch(() => {})\r\n      }\r\n    },\r\n    // 树节点自定义渲染格式 (JSX)\r\n    customRender (createElement, {node, data, store}) {\r\n      // directive 参数参考指令钩子函数中的定义: https://cn.vuejs.org/v2/guide/custom-directive.html\r\n      const directives = [{name: 'contextmenu', arg: 'treeMenu'}]\r\n      return (\r\n        <span class=\"custom-tree-node\" { ...{directives} } >\r\n          <span>{node.label}</span>\r\n          {\r\n            (this.$refs.tree.getCurrentNode() && data.id === this.$refs.tree.getCurrentNode().id) &&\r\n            <span class=\"active\" style={{backgroundColor: this.systemColor}}></span>\r\n          }\r\n        </span>\r\n      )\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.custom-tree-node {\r\n  position:relative;\r\n  width:100%;\r\n\r\n  .active {\r\n    position: absolute;\r\n    display: inline-block;\r\n    width:10px;\r\n    height:10px;\r\n    right:10px;\r\n    top:3px;\r\n    border-radius:10px;\r\n  }\r\n  .addRoot{\r\n    margin-left: 20px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/SystemManagement/Menu/Components/Tree.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6a3bb3b9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"D:\\\\\\\\workspace\\\\\\\\wms_web\\\\\\\\source\\\\\\\\admin\\\\\\\\src\\\\\\\\common\\\\\\\\style\\\\\\\\common.scss\\\"]}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Tree.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6a3bb3b9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Tree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6a3bb3b9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/SystemManagement/Menu/Components/Tree.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
webpackJsonp([82],{Fb61:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("aA9S"),a=t.n(o),s=t("uTPb"),i=(t("4+6g"),t("KWYu")),l={orgName:"",orgShortName:"",orgType:"",orgParentName:"",orgParentUuid:"",orgSortIndex:"1",orgEnabled:1,orgDesc:""},n={name:"OrgUpdate",data:function(){return{showDetailMode:!0,isVisible:!1,isFormDisabled:!1,organization:[],orgForm:a()({},l),orgFormRules:{orgName:[{required:!0,message:"请填写机构名称",trigger:"blur"},{max:30,message:"最大长度为30字符",trigger:"blur"}],orgShortName:[{required:!0,message:"请填写机构简称",trigger:"blur"},{validator:s.a.isShortString,message:"请输入一到六位英文字母",trigger:"blur"}],orgType:[{required:!0,message:"请选择机构类型",trigger:"blur"}],orgSortIndex:[{required:!0,message:"请输入顺序号",trigger:"blur"},{validator:s.a.strNumber,trigger:"blur"},{max:3,message:"不能超过3位数字",trigger:"blur"}]}}},props:{show:{type:Boolean,required:!0,default:!1},nodeData:{type:Object,required:!0},isCreate:{type:Boolean,required:!0}},mounted:function(){},watch:{show:function(e){e&&(this.isCreate?this.setToCreateState():this.setToEditState()),this.isVisible=e}},methods:{setToCreateState:function(){this.nodeData?(this.orgForm=a()({},l),this.orgForm.orgParentName=this.nodeData.orgName,this.orgForm.orgParentUuid=this.nodeData.id):(this.$message({message:"未找到父节点,无法在此情况下创建组织结构.",type:"error"}),this.isFormDisabled=!0)},setToEditState:function(){this.nodeData.id;var e=this.nodeData;this.orgForm=a()({},e),this.orgForm.orgShortName=this.nodeData.name,this.orgForm.orgParentName=this.nodeData.pName||this.nodeData.name,this.orgForm.orgParentUuid=this.nodeData.pId,this.orgForm.orgSortIndex=this.nodeData.sortIndex,this.orgForm.orgEnabled=parseInt(this.nodeData.orgEnabled),this.orgForm.orgUuid=this.nodeData.id},save:function(){var e=this;this.$refs.orgForm.validate(function(r){if(r){var t=e.isCreate?"新增":"修改",o=a()({},e.orgForm);console.log(o),Object(i.a)(o).then(function(r){r.error||(e.$message({message:t+"成功!",type:"success"}),e.$emit("updateTree"),e.isCreate||(o.sortIndex=o.orgSortIndex,o.name=o.orgShortName,console.log(o),e.$emit("updateDetail",o)),e.cancel())})}})},cancel:function(){this.isVisible=!1,this.$emit("update:show",!1),this.orgForm=a()({},l),this.$refs.orgForm.resetFields()}}},g=t("llM8"),m=t.n(g);var d=function(e){t("x1v5")},c=t("C7Lr")(n,m.a,!1,d,"data-v-5ab4268e",null);r.default=c.exports},llM8:function(e,r){e.exports={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-dialog",{attrs:{width:"670px",title:(e.isCreate?"新增":"编辑")+"机构",visible:e.isVisible},on:{"update:visible":function(r){e.isVisible=r},close:e.cancel}},[t("div",{staticClass:"org-form"},[t("el-form",{ref:"orgForm",attrs:{inline:!0,model:e.orgForm,rules:e.orgFormRules,disabled:e.isFormDisabled,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"机构名称",prop:"orgName"}},[t("el-input",{attrs:{clearable:""},model:{value:e.orgForm.orgName,callback:function(r){e.$set(e.orgForm,"orgName",r)},expression:"orgForm.orgName"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"机构简称",prop:"orgShortName"}},[t("el-input",{attrs:{clearable:""},model:{value:e.orgForm.orgShortName,callback:function(r){e.$set(e.orgForm,"orgShortName",r)},expression:"orgForm.orgShortName"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"上级机构",prop:"orgParentName"}},[t("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.orgForm.orgParentName,callback:function(r){e.$set(e.orgForm,"orgParentName",r)},expression:"orgForm.orgParentName"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"机构描述",prop:"orgDesc"}},[t("el-input",{staticStyle:{width:"495px"},attrs:{type:"textarea",maxlength:"200",rows:5,placeholder:"填写机构描述，最长200字符",clearable:""},model:{value:e.orgForm.orgDesc,callback:function(r){e.$set(e.orgForm,"orgDesc",r)},expression:"orgForm.orgDesc"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{staticClass:"flex-right",attrs:{span:24}},[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)])},staticRenderFns:[]}},x1v5:function(e,r){}});
//# sourceMappingURL=82.dc6705b58322dcbcca6c.js.map
{"version":3,"sources":["webpack:///./source/admin/src/views/BasicInformation/Driver/Components/DriverUpdate.vue?cc87","webpack:///source/admin/src/views/BasicInformation/Driver/Components/DriverUpdate.vue","webpack:///./source/admin/src/views/BasicInformation/Driver/Components/DriverUpdate.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","width","title","isCreate","visible","isVisible","close-on-click-modal","close-on-press-escape","on","update:visible","$event","close","cancel","ref","model","driverForm","rules","formRules","label-width","span","label","prop","change","getLineList","drvOrgUuid","value","callback","$$v","$set","expression","_l","item","key","orgUuid","orgName","_v","lineUuid","lineName","placeholder","_n","offset","type","click","save","staticRenderFns","initDriversForm","drvLineUuid","drvName","drvEmployeeId","drvCardNum","drvIcCard","drvMobilePhone","drvEmergeContactPhone","drvSex","DriverUpdate","name","data","lineOrgs","lines","assign_default","required","message","trigger","validator","extendValidate","cellPhone","props","show","Boolean","default","roleData","Object","watch","isShow","mounted","_this","common","then","res","lineOrgUuid","lineIsvalid","lineDropFlag","methods","_this2","params","_this3","$refs","validate","isValid","submitType","management","submitText","$message","$emit","resetFields","Component","__webpack_require__","normalizeComponent","DriverUpdate_default","a","__webpack_exports__"],"mappings":"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","file":"static/js/140.e6e1b2cda811a2c6a716.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"width\":\"640px\",\"title\":(_vm.isCreate ? '新增' : '编辑') + '司机信息',\"visible\":_vm.isVisible,\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.isVisible=$event},\"close\":_vm.cancel}},[_c('el-form',{ref:\"driverForm\",attrs:{\"model\":_vm.driverForm,\"rules\":_vm.formRules,\"label-width\":\"110px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"所属机构\",\"prop\":\"drvOrgUuid\"}},[_c('el-select',{on:{\"change\":function($event){return _vm.getLineList(_vm.driverForm.drvOrgUuid)}},model:{value:(_vm.driverForm.drvOrgUuid),callback:function ($$v) {_vm.$set(_vm.driverForm, \"drvOrgUuid\", $$v)},expression:\"driverForm.drvOrgUuid\"}},_vm._l((_vm.lineOrgs),function(item){return _c('el-option',{key:item.orgUuid,attrs:{\"label\":item.orgName,\"value\":item.orgUuid}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"所属线路\",\"prop\":\"drvLineUuid\"}},[_c('el-select',{model:{value:(_vm.driverForm.drvLineUuid),callback:function ($$v) {_vm.$set(_vm.driverForm, \"drvLineUuid\", $$v)},expression:\"driverForm.drvLineUuid\"}},_vm._l((_vm.lines),function(item){return _c('el-option',{key:item.lineUuid,attrs:{\"label\":item.lineName,\"value\":item.lineUuid}})}),1)],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"司机姓名\",\"prop\":\"drvName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入司机姓名\"},model:{value:(_vm.driverForm.drvName),callback:function ($$v) {_vm.$set(_vm.driverForm, \"drvName\", $$v)},expression:\"driverForm.drvName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"员工编号\",\"prop\":\"drvEmployeeId\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入员工编号\"},model:{value:(_vm.driverForm.drvEmployeeId),callback:function ($$v) {_vm.$set(_vm.driverForm, \"drvEmployeeId\", $$v)},expression:\"driverForm.drvEmployeeId\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"驾驶证编号\",\"prop\":\"drvCardNum\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入司机驾驶证编号\"},model:{value:(_vm.driverForm.drvCardNum),callback:function ($$v) {_vm.$set(_vm.driverForm, \"drvCardNum\", $$v)},expression:\"driverForm.drvCardNum\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"IC卡号\",\"prop\":\"drvIcCard\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入IC卡号\"},model:{value:(_vm.driverForm.drvIcCard),callback:function ($$v) {_vm.$set(_vm.driverForm, \"drvIcCard\", $$v)},expression:\"driverForm.drvIcCard\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"司机电话\",\"prop\":\"drvMobilePhone\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入司机电话\"},model:{value:(_vm.driverForm.drvMobilePhone),callback:function ($$v) {_vm.$set(_vm.driverForm, \"drvMobilePhone\", _vm._n($$v))},expression:\"driverForm.drvMobilePhone\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"紧急联系人电话\",\"prop\":\"drvEmergeContactPhone\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入紧急联系人电话\"},model:{value:(_vm.driverForm.drvEmergeContactPhone),callback:function ($$v) {_vm.$set(_vm.driverForm, \"drvEmergeContactPhone\", _vm._n($$v))},expression:\"driverForm.drvEmergeContactPhone\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"司机电话\",\"prop\":\"drvSex\"}},[_c('el-radio-group',{model:{value:(_vm.driverForm.drvSex),callback:function ($$v) {_vm.$set(_vm.driverForm, \"drvSex\", $$v)},expression:\"driverForm.drvSex\"}},[_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"男\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"0\"}},[_vm._v(\"女\")])],1)],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":6,\"offset\":18}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-cd9f8b10\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/BasicInformation/Driver/Components/DriverUpdate.vue\n// module id = KiQ/\n// module chunks = 25 140","<template>\r\n    <div>\r\n      <el-dialog\r\n      width=\"640px\"\r\n      :title=\"(isCreate ? '新增' : '编辑') + '司机信息'\"\r\n      :visible.sync=\"isVisible\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      @close=\"cancel\"\r\n      >\r\n        <el-form ref=\"driverForm\" :model=\"driverForm\" :rules=\"formRules\" label-width=\"110px\">\r\n           <el-row>\r\n               <el-col :span=\"12\">\r\n                  <el-form-item label=\"所属机构\" prop=\"drvOrgUuid\">\r\n                    <el-select v-model=\"driverForm.drvOrgUuid\" @change=\"getLineList(driverForm.drvOrgUuid)\">\r\n                      <el-option\r\n                        v-for=\"item in lineOrgs\"\r\n                        :key=\"item.orgUuid\"\r\n                        :label=\"item.orgName\"\r\n                        :value=\"item.orgUuid\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n                 <el-col :span=\"12\">\r\n                    <el-form-item label=\"所属线路\" prop=\"drvLineUuid\">\r\n                        <el-select v-model=\"driverForm.drvLineUuid\">\r\n                        <el-option\r\n                            v-for=\"item in lines\"\r\n                            :key=\"item.lineUuid\"\r\n                            :label=\"item.lineName\"\r\n                            :value=\"item.lineUuid\">\r\n                        </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n             <el-row>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"司机姓名\" prop=\"drvName\">\r\n                      <el-input v-model=\"driverForm.drvName\" placeholder=\"请输入司机姓名\" />\r\n                  </el-form-item>\r\n                </el-col>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"员工编号\" prop=\"drvEmployeeId\">\r\n                      <el-input v-model=\"driverForm.drvEmployeeId\" placeholder=\"请输入员工编号\" />\r\n                 </el-form-item>\r\n               </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"驾驶证编号\" prop=\"drvCardNum\">\r\n                      <el-input v-model=\"driverForm.drvCardNum\" placeholder=\"请输入司机驾驶证编号\" />\r\n                  </el-form-item>\r\n                </el-col>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"IC卡号\" prop=\"drvIcCard\">\r\n                      <el-input v-model=\"driverForm.drvIcCard\" placeholder=\"请输入IC卡号\" />\r\n                 </el-form-item>\r\n               </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"司机电话\" prop=\"drvMobilePhone\">\r\n                      <el-input v-model.number=\"driverForm.drvMobilePhone\" placeholder=\"请输入司机电话\" />\r\n                  </el-form-item>\r\n                </el-col>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"紧急联系人电话\" prop=\"drvEmergeContactPhone\">\r\n                      <el-input v-model.number=\"driverForm.drvEmergeContactPhone\" placeholder=\"请输入紧急联系人电话\" />\r\n                 </el-form-item>\r\n               </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"12\">\r\n                 <el-form-item label=\"司机电话\" prop=\"drvSex\">\r\n                      <el-radio-group v-model=\"driverForm.drvSex\">\r\n                        <el-radio label=\"1\">男</el-radio>\r\n                        <el-radio label=\"0\">女</el-radio>\r\n                     </el-radio-group>\r\n                  </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n            <el-row>\r\n                <el-col :span=\"6\" :offset=\"18\">\r\n                    <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n                    <el-button @click=\"cancel\">取消</el-button>\r\n                </el-col>\r\n            </el-row>\r\n       </el-form>\r\n      </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\n// api\r\nimport { getAllOrgList, linesList } from '@/api/common'\r\nimport { createDriver, updateDriver } from '@/api/management'\r\n\r\nimport isvalidPhone from '@/utils/extendValidate/extendValidate'\r\nconst initDriversForm = {\r\n  drvOrgUuid: '', // 组织结构id\r\n  drvLineUuid: '', // 线路id\r\n  drvName: '', // 司机姓名\r\n  drvEmployeeId: '', // 员工编号\r\n  drvCardNum: '', // 驾驶证编号\r\n  drvIcCard: '', // IC卡号\r\n  drvMobilePhone: '', // 电话\r\n  drvEmergeContactPhone: '', // 紧急联系人电话\r\n  drvSex: '1' // 性别\r\n\r\n}\r\nexport default {\r\n  name: 'BusUpdate',\r\n  data () {\r\n    return {\r\n      lineOrgs: [],\r\n      lines: [],\r\n      isVisible: false,\r\n      driverForm: Object.assign({}, initDriversForm),\r\n      formRules: {\r\n        drvOrgUuid: [{required: true, message: '请选择所属机构', trigger: 'change'}],\r\n        drvLineUuid: [{required: true, message: '请选择线路', trigger: 'change'}],\r\n        drvName: [{required: true, message: '请输入司机姓名', trigger: 'blur'}],\r\n        drvEmployeeId: [{required: true, message: '请输入员工编号', trigger: 'blur'}],\r\n        drvMobilePhone: [{ validator: isvalidPhone.cellPhone, message: '手机号应为11位数字', trigger: 'blur' }],\r\n        drvEmergeContactPhone: [{ validator: isvalidPhone.cellPhone, message: '手机号应为11位数字', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    roleData: {\r\n      type: Object\r\n    },\r\n    isCreate: {\r\n      type: Boolean,\r\n      required: true\r\n    }\r\n  },\r\n  watch: {\r\n    show (isShow) {\r\n      if (isShow) {\r\n        if (this.isCreate) {\r\n          this.driverForm = Object.assign({}, initDriversForm)\r\n        } else {\r\n          this.driverForm = Object.assign({}, this.roleData)\r\n        }\r\n      }\r\n      this.isVisible = isShow\r\n    }\r\n  },\r\n  mounted () {\r\n    getAllOrgList().then(res => {\r\n      this.lineOrgs = res\r\n    })\r\n    const params = {lineOrgUuid: '', lineIsvalid: '1', lineDropFlag: 0}\r\n    linesList(params).then(res => {\r\n      this.lines = res\r\n    })\r\n  },\r\n  methods: {\r\n    // 通过组织机构的id和启用，是否删除来获取当前线路\r\n    getLineList (lineOrgUuid) {\r\n      this.driverForm.drvLineUuid = ''\r\n      this.lines = []\r\n      const params = {lineOrgUuid: lineOrgUuid, lineIsvalid: '1', lineDropFlag: 0}\r\n      linesList(params).then(res => {\r\n        this.lines = res\r\n      })\r\n    },\r\n    save () {\r\n      this.$refs.driverForm.validate(isValid => {\r\n        if (isValid) {\r\n          const params = Object.assign({}, this.driverForm)\r\n          const submitType = this.isCreate ? createDriver : updateDriver\r\n          const submitText = this.isCreate ? '新增' : '编辑'\r\n          submitType(params).then(res => {\r\n            this.$message({\r\n              message: `${submitText}司机成功!`,\r\n              type: 'success'\r\n            })\r\n            this.cancel()\r\n            this.$emit('updateList')\r\n          })\r\n        }\r\n      })\r\n    },\r\n    cancel () {\r\n      this.driverForm = Object.assign({}, initDriversForm)\r\n      this.$refs.driverForm.resetFields()\r\n      this.$emit('update:show', false)\r\n      this.isVisible = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/BasicInformation/Driver/Components/DriverUpdate.vue","var normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./DriverUpdate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./DriverUpdate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cd9f8b10\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./DriverUpdate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/BasicInformation/Driver/Components/DriverUpdate.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
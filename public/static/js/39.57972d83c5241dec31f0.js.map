{"version":3,"sources":["webpack:///./source/admin/src/views/SystemManagement/SystemParams/dict/Components/Tree.vue?abfd","webpack:///source/admin/src/views/SystemManagement/SystemParams/dict/Components/Tree.vue","webpack:///./source/admin/src/views/SystemManagement/SystemParams/dict/Components/Tree.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","ref","on","click","createOrg","_v","editOrg","attrs","disabled","contextmenuSelectedNode","pId","deleteOrg","data","orgTreeData","node-key","props","defaultProps","default-expand-all","expand-on-click-node","render-content","customRender","node-contextmenu","showContextMenu","node-click","handleNodeClick","staticRenderFns","Tree","name","label","clickedNodeData","type","Object","computed","extends_default","vuex_esm","selectedNode","systemColor","theme","systemTheme","mounted","initOrgTree","methods","_this","systemparams","then","res","generateTree","node","nodeCom","$emit","event","tree","$refs","contextMenu","treeMenu","setCurrentKey","id","show","top","clientY","left","clientX","update","_this2","_contextmenuSelectedN","$confirm","confirmButtonText","cancelButtonText","orgUuid","error","$message","message","catch","createElement","_ref","h","store","babel_helper_vue_jsx_merge_props_default","class","directives","arg","getCurrentNode","style","backgroundColor","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","Tree_default","a","__webpack_exports__"],"mappings":"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","file":"static/js/39.57972d83c5241dec31f0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-contextmenu',{ref:\"treeMenu\"},[_c('v-contextmenu-item',{on:{\"click\":_vm.createOrg}},[_vm._v(\"新建字典\")]),_vm._v(\" \"),_c('v-contextmenu-item',{on:{\"click\":_vm.editOrg}},[_vm._v(\"修改字典\")]),_vm._v(\" \"),_c('v-contextmenu-item',{attrs:{\"disabled\":_vm.contextmenuSelectedNode && _vm.contextmenuSelectedNode.pId === ''},on:{\"click\":_vm.deleteOrg}},[_vm._v(\"删除字典\")])],1),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.orgTreeData,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"default-expand-all\":\"\",\"expand-on-click-node\":false,\"render-content\":_vm.customRender},on:{\"node-contextmenu\":_vm.showContextMenu,\"node-click\":_vm.handleNodeClick}})],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0167302d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/SystemManagement/SystemParams/dict/Components/Tree.vue\n// module id = p0Yx\n// module chunks = 7 39","<template>\n  <div>\n\n      <v-contextmenu ref=\"treeMenu\">\n        <v-contextmenu-item @click=\"createOrg\">新建字典</v-contextmenu-item>\n        <v-contextmenu-item @click=\"editOrg\">修改字典</v-contextmenu-item>\n        <v-contextmenu-item @click=\"deleteOrg\" :disabled=\"contextmenuSelectedNode && contextmenuSelectedNode.pId === '' \">删除字典</v-contextmenu-item>\n      </v-contextmenu>\n\n      <el-tree\n        ref=\"tree\"\n        :data=\"orgTreeData\"\n        node-key=\"id\"\n        :props=\"defaultProps\"\n        default-expand-all\n        :expand-on-click-node=\"false\"\n        @node-contextmenu=\"showContextMenu\"\n        @node-click=\"handleNodeClick\"\n        :render-content=\"customRender\"\n      >\n      </el-tree>\n  </div>\n</template>\n<script>\n/**\n * Organization Tree Component\n * ----------------------\n * Author: zhou qi\n * Date: 2018.03.20\n */\nimport { mapGetters } from 'vuex'\nimport { baseTheme } from '@/utils/theme'\nimport { generateTree } from '@/utils/generateTree'\n// api\nimport { getDicTree, deleteDicNode } from '@/api/systemparams'\n\n\nexport default {\n  name: 'OrganizationTree',\n  data () {\n    return {\n      orgTreeData: [],\n      contextmenuSelectedNode: null,\n      defaultProps: {\n        label: 'name'\n      }\n    }\n  },\n  props: {\n    clickedNodeData: {\n      type: Object\n    }\n  },\n  computed: {\n    ...mapGetters(['systemTheme']),\n    selectedNode () {\n      return this.clickedNodeData\n    },\n    systemColor () {\n      return baseTheme[this.systemTheme]\n    }\n  },\n  mounted () {\n    this.initOrgTree()\n  },\n  methods: {\n    initOrgTree () {\n      getDicTree().then(res => {\n        this.orgTreeData = generateTree(res)\n      })\n    },\n    // 节点点击事件\n    handleNodeClick (data, node, nodeCom) {\n      this.$emit('nodeClick', { data, node, nodeCom })\n    },\n    // 节点右键弹出菜单\n    showContextMenu (event, data, node, nodeCom) {\n      if (node) {\n        const tree = this.$refs.tree\n        const contextMenu = this.$refs.treeMenu\n        // 右键设置当前树节点为选中状态\n        this.contextmenuSelectedNode = data\n        tree.setCurrentKey(data.id)\n        // 弹出菜单\n        contextMenu.show({top: event.clientY, left: event.clientX})\n      }\n    },\n    update () {\n      this.initOrgTree()\n      // console.log('tree updated.')\n    },\n    // 菜单 -- 新建\n    createOrg () {\n      this.$emit('update:isCreate', true)\n      this.$emit('openDialog', 'OrgUpdate', this.contextmenuSelectedNode)\n    },\n    // 菜单 -- 编辑\n    editOrg () {\n      this.$emit('update:isCreate', false)\n      this.$emit('openDialog', 'OrgUpdate', this.contextmenuSelectedNode)\n    },\n    // 菜单 -- 删除\n    deleteOrg () {\n      const { name, id } = this.contextmenuSelectedNode\n      if (id) {\n        this.$confirm(`此操作将删除字典:[${name}], 确认要删除吗?`, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          deleteDicNode({orgUuid: id}).then(res => {\n            if (!res.error) {\n              this.$message({\n                type: 'success',\n                message: '删除成功!'\n              })\n              this.initOrgTree()\n              this.$emit('updateTree', 'delete')\n            }\n          })\n        }).catch(() => {})\n      }\n    },\n    // 树节点自定义渲染格式 (JSX)\n    customRender (createElement, {node, data, store}) {\n      // directive 参数参考指令钩子函数中的定义: https://cn.vuejs.org/v2/guide/custom-directive.html\n      const directives = [{name: 'contextmenu', arg: 'treeMenu'}]\n      return (\n        <span class=\"custom-tree-node\" { ...{directives} } >\n          <span>{node.label}</span>\n          {\n            (this.$refs.tree.getCurrentNode() && data.id === this.$refs.tree.getCurrentNode().id) &&\n            <span class=\"active\" style={{backgroundColor: this.systemColor}}></span>\n          }\n        </span>\n      )\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.custom-tree-node {\n  position:relative;\n  width:100%;\n\n  .active {\n    position: absolute;\n    display: inline-block;\n    width:10px;\n    height:10px;\n    right:10px;\n    top:3px;\n    border-radius:10px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/SystemManagement/SystemParams/dict/Components/Tree.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0167302d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"/Users/mrk/Desktop/xhcode/okr_web/source/admin/src/common/style/common.scss\\\"]}!../../../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Tree.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0167302d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Tree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0167302d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/SystemManagement/SystemParams/dict/Components/Tree.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
webpackJsonp([43],{T2UM:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("rVsN"),a=o.n(r),i=o("aA9S"),n=o.n(i),l=o("ryJa"),s=o.n(l),c=o("aIe1"),d=o("VkjD"),u=o("ycWN"),p=o("I8tE"),m=o("Ips9"),f=(o("4+6g"),o("fBur"),o("rHLQ")),b={name:"OrderDetail",data:function(){return{isVisible:!1,orderInfo:{},existModel:[],tableData:[],qrCodeVisible:!1,paramsList:[],isListLoading:!1}},props:{show:{type:Boolean,default:!1},selectedOrderInfo:{type:Object}},watch:{show:function(e){e&&(this.isVisible=e,this.orderInfo=n()({},this.selectedOrderInfo),this.tableData=[].concat(this.orderInfo.goodsReceiveItems))}},methods:{getTemplate:function(){var e=this;return new a.a(function(t){var o={merchantUuid:e.orderInfo.goodsReceiveMerchantId};e.existModel=[],e.isListLoading=!0,Object(p.g)(o).then(function(o){e.isListLoading=!1,o.forEach(function(e){delete e.productItemUuid}),e.existModel=[].concat(o),t()})})},getMerchantName:function(e){return this.merchantsList.find(function(t){return t.userUuid===e}).userName},cancel:function(){this.orderInfo={},this.tableData=[],this.existModel=[],this.$refs.orderInfo.resetFields(),this.$emit("update:show",!1),this.isVisible=!1},PackFormatter:function(e){return"1"===e.receiveItemPack?"有包装":"2"===e.receiveItemPack?"无包装":"其他"},typeFormatter:function(e){return"0"===e.productType?"小件":"1"===e.productType?"套件":"2"===e.productType?"单品":"未知"},itemFormatter:function(e){if("1"==e.productType&&e.productItems.length){var t=e.productItems.find(function(t){return e.productItemUuid===t.productItemUuid});return t?t.productItemName:""}},formatTime:function(e){if(e)return s()(e).utcOffset(8).format("YYYY-MM-DD")},printCode:function(){var e=this,t={orderAccount:[this.orderInfo.goodsReceiveUuid]};Object(m.d)(t).then(function(t){e.paramsList=[],e.paramsList=t,e.qrCodeVisible=!0})},addCode:function(e,t){var o=this;this.$confirm("提醒 条码补打会导致货品数量增加，确定要补打吗？","提示",{type:"warning"}).then(function(){o.$prompt("请输入补打数量","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[1-9]{1}\d{0,4}$/,inputErrorMessage:"条码数量应在0-99999之间"}).then(function(r){var a=r.value,i={goodReceiveItemUuid:e.receiveItemUuid,count:a};Object(m.a)(i).then(function(r){r.error||(o.paramsList=[],o.paramsList=r,o.qrCodeVisible=!0,e.receiveItemCount=Number(e.receiveItemCount)+Number(a),o.$emit("updateCount",a,t))})}).catch(function(){})}).catch(function(){})}},components:{QrCode:f.default,CommonTable:c.a,TemplateCreate:d.default,TemplateImport:u.default}},v=o("to5v"),h=o.n(v);var I=function(e){o("ywEJ")},w=o("C7Lr")(b,h.a,!1,I,null,null);t.default=w.exports},to5v:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{width:"95%",title:"查看收货单",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[o("el-form",{ref:"orderInfo",attrs:{inline:"",model:e.orderInfo}},[o("el-row",[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"商户:","label-width":"60px"}},[o("span",[e._v(e._s(e.orderInfo.goodsReceiveMerchant))])])],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:"送达时间:","label-width":"100px"}},[o("span",[e._v(e._s(e.formatTime(e.orderInfo.goodsReceiveDate)))])])],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"备注:","label-width":"60px"}},[o("span",[e._v(e._s(e.orderInfo.goodsReceiveRemark))])])],1),e._v(" "),o("el-col",{staticClass:"text-r",attrs:{span:5}},[o("el-button",{attrs:{type:"primary",disabled:!1},on:{click:e.printCode}},[e._v("打印条码")])],1)],1),e._v(" "),o("el-row",[o("div",[o("common-table",[o("template",{slot:"table"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isListLoading,expression:"isListLoading"}],ref:"orderTable",attrs:{"max-height":"400",stripe:"",border:!0,"tooltip-effect":"light",data:e.tableData}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{prop:"productBrand",label:"品牌","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{prop:"productModel",label:"型号","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{prop:"productName",label:"货品名称","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{prop:"productStandard",label:"规格","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{prop:"productColor",label:"颜色"}}),e._v(" "),o("el-table-column",{attrs:{prop:"receiveItemPack",label:"包装形式",formatter:e.PackFormatter}}),e._v(" "),o("el-table-column",{attrs:{prop:"productType",label:"货品类型",formatter:e.typeFormatter}}),e._v(" "),o("el-table-column",{attrs:{prop:"productItemUuid",label:"子件",formatter:e.itemFormatter,"show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{prop:"receiveItemCount",label:"数量"}}),e._v(" "),o("el-table-column",{attrs:{prop:"receiveItemRemark",label:"备注",width:"150","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{disabled:"2"==e.orderInfo.goodsReceviceAuditing,type:"text",rules:"small"},nativeOn:{click:function(o){return o.preventDefault(),e.addCode(t.row,t.$index)}}},[e._v("\n                      条码补打\n                    ")])]}}])})],1)],1)],2)],1)])],1)],1),e._v(" "),o("qr-code",{attrs:{show:e.qrCodeVisible,paramsList:e.paramsList,tableData:e.tableData},on:{"update:show":function(t){e.qrCodeVisible=t}}})],1)},staticRenderFns:[]}},ywEJ:function(e,t){}});
//# sourceMappingURL=43.c58abe7fa0d65332f43b.js.map
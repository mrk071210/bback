webpackJsonp([25,60,140],{"+SPB":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("rVsN"),i=r.n(a),o=r("4YfN"),n=r.n(o),l=r("ryJa"),s=r.n(l),d=r("dF+P"),u=r("Jky9"),c=r("Jns3"),p=r("0+j4"),v=r("aIe1"),m=r("C0aK"),h=r("cYU1"),f=r("aQ5O"),g=r("8ZKe"),b=r("X2t0"),w=r("z7pT"),F={name:"DriverManagement",mixins:[d.a],data:function(){return{comp:this,buttonData:[],tableData:[],selectRow:[],editRole:{},isShowRoleDialog:!1,isListLoading:!1,isCreate:!0,showUpload:!1,uploadFileUrl:"/excel/uploadFile",limit:1,size:.5,acceptType:".xls",pojo:"TDriver",isShowDown:!0,isHasToken:!0,showUploadTable:!1,uploadData:{},pagination:{pageNum:1,pageSize:10,total:0},searchParams:{}}},activated:function(){this.$refs.roleTable.doLayout()},mounted:function(){},methods:{queryList:function(e){var t=this.searchParams=e;this.getRoles(n()({},t,{pageNum:this.pagination.pageNum,pageSize:this.pagination.pageSize}))},getRoles:function(e){var t=this;this.isListLoading=!0,Object(w.k)(e).then(function(e){t.tableData=e.list,t.pagination.total=e.total,t.pagination.pageNum=e.pageNum,t.pagination.pageSize=e.pageSize,t.isListLoading=!1})},rest:function(e){var t=this.searchParams=e;this.getRoles(n()({},t,{pageNum:1,pageSize:this.pagination.pageSize}))},changePage:function(e){this.pagination.pageNum=e,this.queryList(this.searchParams)},indexMethod:function(e){return e+1+(this.pagination.pageNum-1)*this.pagination.pageSize},formatCreateDate:function(e){if(e.drvUpdateTime)return s()(e.drvUpdateTime).utcOffset(8).format("YYYY-MM-DD")},isButtonDisabled:function(){return!!this.selectRow.length},handleAdd:function(){this.isCreate=!0,this.isShowRoleDialog=!0},handleEdit:function(e,t){this.isCreate=!1,this.editRole=t,this.isShowRoleDialog=!0},deleteDrivers:function(e){var t=this;return Object(w.h)(e).then(function(e){e.error||(t.$message({message:"删除成功",type:"success"}),t.queryList())})},batchRemove:function(){var e=this;this.$confirm("确认删除选中的司机吗？","提示",{type:"warning"}).then(function(){var t=[];e.selectRow.map(function(e){return t.push(e.drvUuid)}),e.isListLoading=!0,e.deleteDrivers(t).then(function(){e.isListLoading=!1}).catch(function(){})})},handleDel:function(e,t){var r=this;this.$confirm("确认删除该司机吗?","提示",{type:"warning"}).then(function(){r.deleteDrivers([t.drvUuid])}).catch(function(){})},validDriver:function(e,t){var r=this,a="0"===t.drvIsvalid?"启用":"禁用";this.$confirm("确认状态修改为"+a+"?","提示",{type:"warning"}).then(function(){var e={drvUuid:t.drvUuid,drvIsvalid:t.drvIsvalid};Object(w.n)(e).then(function(e){console.log(e),r.queryList()})}).catch(function(){})},exportsFile:function(){this.showUpload=!0},getUploadData:function(e){var t=this;setTimeout(function(){t.showUploadTable=!0},500),new i.a(function(t,r){t(e)}).then(function(e){t.uploadData=e})},exportsLog:function(){this.$nextPage({title:"导入日志详情",props:{modelName:"司机信息批量导入"},component:b.default,cache:!0})}},components:{NavButton:u.a,NavPremissonButton:c.a,CommonWrapper:p.a,CommonTable:v.a,DriverManagementSearch:m.default,DriverUpdate:h.default,UploadFile:f.default,UploadFileTable:g.default}},U=r("pbJS"),_=r.n(U),y=r("C7Lr")(F,_.a,!1,null,null,null);t.default=y.exports},C0aK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("aA9S"),i=r.n(a),o=r("4+6g"),n={name:"DriverManagementSearch",data:function(){return{lineOrgs:[],lines:[],searchForm:{drvOrgUuid:"",drvLineUuid:"",drvName:"",drvEmployeeId:""}}},mounted:function(){var e=this;Object(o.g)().then(function(t){e.lineOrgs=t});Object(o.j)({lineOrgUuid:"",lineIsvalid:"1",lineDropFlag:0}).then(function(t){e.lines=t}),this.search()},methods:{getLineList:function(e){var t=this;this.searchForm.drvLineUuid="",this.lines=[];var r={lineOrgUuid:e,lineIsvalid:"1",lineDropFlag:0};Object(o.j)(r).then(function(e){t.lines=e})},search:function(){this.$emit("search",i()({},this.searchForm))},resetForm:function(e){this.$refs[e].resetFields(),this.$emit("rest",i()({},this.searchForm))}}},l=r("cpKq"),s=r.n(l);var d=function(e){r("Yqgw")},u=r("C7Lr")(n,s.a,!1,d,"data-v-9b305072",null);t.default=u.exports},"KiQ/":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{width:"640px",title:(e.isCreate?"新增":"编辑")+"司机信息",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[r("el-form",{ref:"driverForm",attrs:{model:e.driverForm,rules:e.formRules,"label-width":"110px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属机构",prop:"drvOrgUuid"}},[r("el-select",{on:{change:function(t){return e.getLineList(e.driverForm.drvOrgUuid)}},model:{value:e.driverForm.drvOrgUuid,callback:function(t){e.$set(e.driverForm,"drvOrgUuid",t)},expression:"driverForm.drvOrgUuid"}},e._l(e.lineOrgs,function(e){return r("el-option",{key:e.orgUuid,attrs:{label:e.orgName,value:e.orgUuid}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属线路",prop:"drvLineUuid"}},[r("el-select",{model:{value:e.driverForm.drvLineUuid,callback:function(t){e.$set(e.driverForm,"drvLineUuid",t)},expression:"driverForm.drvLineUuid"}},e._l(e.lines,function(e){return r("el-option",{key:e.lineUuid,attrs:{label:e.lineName,value:e.lineUuid}})}),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"司机姓名",prop:"drvName"}},[r("el-input",{attrs:{placeholder:"请输入司机姓名"},model:{value:e.driverForm.drvName,callback:function(t){e.$set(e.driverForm,"drvName",t)},expression:"driverForm.drvName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"员工编号",prop:"drvEmployeeId"}},[r("el-input",{attrs:{placeholder:"请输入员工编号"},model:{value:e.driverForm.drvEmployeeId,callback:function(t){e.$set(e.driverForm,"drvEmployeeId",t)},expression:"driverForm.drvEmployeeId"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"驾驶证编号",prop:"drvCardNum"}},[r("el-input",{attrs:{placeholder:"请输入司机驾驶证编号"},model:{value:e.driverForm.drvCardNum,callback:function(t){e.$set(e.driverForm,"drvCardNum",t)},expression:"driverForm.drvCardNum"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"IC卡号",prop:"drvIcCard"}},[r("el-input",{attrs:{placeholder:"请输入IC卡号"},model:{value:e.driverForm.drvIcCard,callback:function(t){e.$set(e.driverForm,"drvIcCard",t)},expression:"driverForm.drvIcCard"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"司机电话",prop:"drvMobilePhone"}},[r("el-input",{attrs:{placeholder:"请输入司机电话"},model:{value:e.driverForm.drvMobilePhone,callback:function(t){e.$set(e.driverForm,"drvMobilePhone",e._n(t))},expression:"driverForm.drvMobilePhone"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"紧急联系人电话",prop:"drvEmergeContactPhone"}},[r("el-input",{attrs:{placeholder:"请输入紧急联系人电话"},model:{value:e.driverForm.drvEmergeContactPhone,callback:function(t){e.$set(e.driverForm,"drvEmergeContactPhone",e._n(t))},expression:"driverForm.drvEmergeContactPhone"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"司机电话",prop:"drvSex"}},[r("el-radio-group",{model:{value:e.driverForm.drvSex,callback:function(t){e.$set(e.driverForm,"drvSex",t)},expression:"driverForm.drvSex"}},[r("el-radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("女")])],1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:6,offset:18}},[r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},Yqgw:function(e,t){},cYU1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("aA9S"),i=r.n(a),o=r("4+6g"),n=r("z7pT"),l=r("uTPb"),s={drvOrgUuid:"",drvLineUuid:"",drvName:"",drvEmployeeId:"",drvCardNum:"",drvIcCard:"",drvMobilePhone:"",drvEmergeContactPhone:"",drvSex:"1"},d={name:"BusUpdate",data:function(){return{lineOrgs:[],lines:[],isVisible:!1,driverForm:i()({},s),formRules:{drvOrgUuid:[{required:!0,message:"请选择所属机构",trigger:"change"}],drvLineUuid:[{required:!0,message:"请选择线路",trigger:"change"}],drvName:[{required:!0,message:"请输入司机姓名",trigger:"blur"}],drvEmployeeId:[{required:!0,message:"请输入员工编号",trigger:"blur"}],drvMobilePhone:[{validator:l.a.cellPhone,message:"手机号应为11位数字",trigger:"blur"}],drvEmergeContactPhone:[{validator:l.a.cellPhone,message:"手机号应为11位数字",trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1},roleData:{type:Object},isCreate:{type:Boolean,required:!0}},watch:{show:function(e){e&&(this.isCreate?this.driverForm=i()({},s):this.driverForm=i()({},this.roleData)),this.isVisible=e}},mounted:function(){var e=this;Object(o.g)().then(function(t){e.lineOrgs=t});Object(o.j)({lineOrgUuid:"",lineIsvalid:"1",lineDropFlag:0}).then(function(t){e.lines=t})},methods:{getLineList:function(e){var t=this;this.driverForm.drvLineUuid="",this.lines=[];var r={lineOrgUuid:e,lineIsvalid:"1",lineDropFlag:0};Object(o.j)(r).then(function(e){t.lines=e})},save:function(){var e=this;this.$refs.driverForm.validate(function(t){if(t){var r=i()({},e.driverForm),a=e.isCreate?n.d:n.t,o=e.isCreate?"新增":"编辑";a(r).then(function(t){e.$message({message:o+"司机成功!",type:"success"}),e.cancel(),e.$emit("updateList")})}})},cancel:function(){this.driverForm=i()({},s),this.$refs.driverForm.resetFields(),this.$emit("update:show",!1),this.isVisible=!1}}},u=r("KiQ/"),c=r.n(u),p=r("C7Lr")(d,c.a,!1,null,null,null);t.default=p.exports},cpKq:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"机构",prop:"drvOrgUuid"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getLineList(e.searchForm.drvOrgUuid)}},model:{value:e.searchForm.drvOrgUuid,callback:function(t){e.$set(e.searchForm,"drvOrgUuid",t)},expression:"searchForm.drvOrgUuid"}},e._l(e.lineOrgs,function(e){return r("el-option",{key:e.orgUuid,attrs:{label:e.orgName,value:e.orgUuid}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"线路",prop:"drvLineUuid"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.drvLineUuid,callback:function(t){e.$set(e.searchForm,"drvLineUuid",t)},expression:"searchForm.drvLineUuid"}},e._l(e.lines,function(e){return r("el-option",{key:e.lineUuid,attrs:{label:e.lineName,value:e.lineUuid}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"员工姓名",prop:"drvName"}},[r("el-input",{attrs:{placeholder:"请输入员工姓名"},model:{value:e.searchForm.drvName,callback:function(t){e.$set(e.searchForm,"drvName",t)},expression:"searchForm.drvName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"员工编号",prop:"drvEmployeeId"}},[r("el-input",{attrs:{placeholder:"请输入员工编号"},model:{value:e.searchForm.drvEmployeeId,callback:function(t){e.$set(e.searchForm,"drvEmployeeId",t)},expression:"searchForm.drvEmployeeId"}})],1)],1),e._v(" "),r("el-col",{staticClass:"flex-right",attrs:{span:6}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[e._v("查询")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]}},pbJS:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("nav-button",[r("el-button-group",[r("nav-premisson-button",{attrs:{comp:e.comp,buttonData:e.buttonData}})],1)],1),e._v(" "),r("common-wrapper",[r("driver-management-search",{staticClass:"search",on:{search:e.queryList,rest:e.rest}})],1),e._v(" "),r("common-wrapper",[r("common-table",{attrs:{flex:230}},[r("template",{slot:"table"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isListLoading,expression:"isListLoading"}],ref:"roleTable",attrs:{height:"100%",stripe:"",data:e.tableData},on:{"selection-change":function(t){return e.selectRow=t}}},[r("el-table-column",{attrs:{type:"selection","min-width":"30"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号","min-width":"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"drvEmployeeId",label:"司机编号","min-width":"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"drvName",label:"司机姓名","min-width":"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"drvSex",label:"司机性别","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.row.drvSex,expression:"scope.row.drvSex === '1'"}]},[e._v("男")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"0"===t.row.drvSex,expression:"scope.row.drvSex === '0'"}]},[e._v("女")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"lineName",label:"线路","min-width":"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"orgName",label:"所属机构","min-width":"140"}}),e._v(" "),r("el-table-column",{attrs:{label:"启禁状态","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{round:""},on:{click:function(r){return e.validDriver(t.$index,t.row)}}},[e._v(e._s("0"===t.row.drvIsvalid?"禁用":"启用"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"drvUpdateTime",label:"更新时间",formatter:e.formatCreateDate,"min-width":"180"}}),e._v(" "),r("el-table-column",{attrs:{label:"更新人","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.drvUpdateUser||null))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",round:"",icon:"fdddfont icon-modify"},on:{click:function(r){return r.stopPropagation(),e.handleEdit(t.$index,t.row)}}}),e._v(" "),r("el-button",{attrs:{size:"mini",round:"",icon:"fdddfont icon-delete"},on:{click:function(r){return r.stopPropagation(),e.handleDel(t.$index,t.row)}}})]}}])})],1)],1),e._v(" "),r("template",{slot:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pagination.pageNum,"page-size":e.pagination.pageSize,total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageNum",t)},"current-change":e.changePage}})],1)],2)],1),e._v(" "),r("driver-update",{attrs:{show:e.isShowRoleDialog,roleData:e.editRole,isCreate:e.isCreate},on:{"update:show":function(t){e.isShowRoleDialog=t},"update:roleData":function(t){e.editRole=t},"update:role-data":function(t){e.editRole=t},updateList:e.queryList}}),e._v(" "),r("upload-file",{attrs:{showUpload:e.showUpload,uploadFileUrl:e.uploadFileUrl,limit:e.limit,size:e.size,acceptType:e.acceptType,pojo:e.pojo,isShowDown:e.isShowDown,isHasToken:e.isHasToken},on:{"update:showUpload":function(t){e.showUpload=t},"update:show-upload":function(t){e.showUpload=t},complete:e.getUploadData}}),e._v(" "),e.uploadData.data?r("upload-file-table",{attrs:{showUploadTable:e.showUploadTable,pojo:e.pojo,uploadData:e.uploadData},on:{"update:showUploadTable":function(t){e.showUploadTable=t},"update:show-upload-table":function(t){e.showUploadTable=t},"update:uploadData":function(t){e.uploadData=t},"update:upload-data":function(t){e.uploadData=t},updateList:e.queryList}}):e._e()],1)},staticRenderFns:[]}}});
//# sourceMappingURL=25.5542f15e16e81711e9ac.js.map
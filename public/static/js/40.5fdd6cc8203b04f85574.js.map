{"version":3,"sources":["webpack:///./source/admin/src/views/DeviceState/Components/Search.vue?f3ca","webpack:///./source/admin/src/views/DeviceState/index.vue?b0f1","webpack:///source/admin/src/views/DeviceState/Components/Search.vue","webpack:///./source/admin/src/views/DeviceState/Components/Search.vue","webpack:///source/admin/src/views/DeviceState/index.vue","webpack:///./source/admin/src/views/DeviceState/index.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","ref","attrs","inline","model","searchForm","rules","searchRule","label-width","size","label","prop","width","multiple","collapse-tags","placeholder","value","callback","$$v","$set","expression","_l","line","key","lineUuid","lineName","_v","bus","busUuid","busPlateNumber","staticStyle","margin-left","type","on","click","search","staticRenderFns","staticClass","span","style","color","systemColor","_s","deviceOnlineState","onlineDeviceCount","deviceCount","toFixed","directives","name","rawName","isListLoading","flex","slot","height","data","tableData","stripe","scopedSlots","_u","fn","scope","placement","trigger","row","styleWH","icon","circle","$event","showPop","onlineStatus","formatter","formatTime","background","layout","current-page","pagination","pageNum","page-size","pageSize","total","update:currentPage","update:current-page","current-change","handlePageChange","Search","lines","buses","busPlateNum","deviceOnlineStatus","mounted","_this","Object","common","then","res","methods","convertSearchParams","$emit","Component","__webpack_require__","normalizeComponent","Search_default","a","__webpack_exports__","DeviceState","isLoadingMap","isTableVisible","searchParams","computed","extends_default","vuex_esm","theme","systemTheme","device","parseInt","convertParams","params","p","getTableList","_this2","list","column","updateTime","moment_default","utcOffset","format","com","$index","$refs","showMap","components","CommonWrapper","commonWrapper","CommonTable","commonTable","DeviceStateSearch","BaiduMapCom","PositionMap","__vue_styles__","ssrContext","DeviceState_default"],"mappings":"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","file":"static/js/40.5fdd6cc8203b04f85574.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"searchForm\",attrs:{\"inline\":true,\"model\":_vm.searchForm,\"rules\":_vm.searchRule,\"label-width\":\"60px\",\"size\":\"mini\"}},[_c('el-form-item',{attrs:{\"label\":\"线路\",\"prop\":\"lineUuid\",\"width\":\"100%\"}},[_c('el-select',{attrs:{\"multiple\":\"\",\"collapse-tags\":\"\",\"placeholder\":\"请选择一条或者多条\",\"width\":\"100%\"},model:{value:(_vm.searchForm.lineUuid),callback:function ($$v) {_vm.$set(_vm.searchForm, \"lineUuid\", $$v)},expression:\"searchForm.lineUuid\"}},_vm._l((_vm.lines),function(line){return _c('el-option',{key:line.lineUuid,attrs:{\"label\":line.lineName,\"value\":line.lineUuid}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"车辆\",\"prop\":\"busPlateNum\"}},[_c('el-select',{attrs:{\"multiple\":\"\",\"collapse-tags\":\"\",\"placeholder\":\"请选择一条或者多条\"},model:{value:(_vm.searchForm.busPlateNum),callback:function ($$v) {_vm.$set(_vm.searchForm, \"busPlateNum\", $$v)},expression:\"searchForm.busPlateNum\"}},_vm._l((_vm.buses),function(bus){return _c('el-option',{key:bus.busUuid,attrs:{\"label\":bus.busPlateNumber,\"value\":bus.busPlateNumber}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"prop\":\"deviceOnlineStatus\"}},[_c('el-radio-group',{model:{value:(_vm.searchForm.deviceOnlineStatus),callback:function ($$v) {_vm.$set(_vm.searchForm, \"deviceOnlineStatus\", $$v)},expression:\"searchForm.deviceOnlineStatus\"}},[_c('el-radio',{attrs:{\"label\":\"\"}},[_vm._v(\"全部\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"在线\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"离线\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"margin-left\":\"20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.search}},[_vm._v(\"更新显示\")])],1)],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-34b6b1f3\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/DeviceState/Components/Search.vue\n// module id = 0fHA\n// module chunks = 40 132","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('common-wrapper',[_c('device-state-search',{on:{\"search\":_vm.search}})],1),_vm._v(\" \"),_c('common-wrapper',[_c('el-row',{staticClass:\"mid-content\"},[_c('el-col',{attrs:{\"span\":8}},[_vm._v(\"\\n        总在线设备: \"),_c('span',{style:({color: _vm.systemColor})},[_vm._v(_vm._s(_vm.deviceOnlineState.onlineDeviceCount))]),_vm._v(\" 台\\n      \")]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_vm._v(\"\\n        总设备数量: \"),_c('span',{style:({color: _vm.systemColor})},[_vm._v(_vm._s(_vm.deviceOnlineState.deviceCount))]),_vm._v(\" 台\\n      \")]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_vm._v(\"\\n        当前设备在线率: \"),_c('span',{style:({color: _vm.systemColor})},[_vm._v(_vm._s((_vm.deviceOnlineState.onlineDeviceCount / _vm.deviceOnlineState.deviceCount * 100).toFixed(2) + '%'))])])],1)],1),_vm._v(\" \"),_c('common-wrapper',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(!_vm.isListLoading),expression:\"!isListLoading\"}]},[_c('common-table',{attrs:{\"size\":\"small\",\"flex\":265}},[_c('template',{slot:\"table\"},[_c('el-table',{attrs:{\"height\":\"100%\",\"data\":_vm.tableData,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"deviceCode\",\"label\":\"设备编号\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"lineName\",\"label\":\"线路\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"busPlateNum\",\"label\":\"车辆\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"当前位置\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-popover',{attrs:{\"placement\":\"right\",\"trigger\":\"click\"}},[_c('baidu-map-com',{ref:(\"popover-\" + (scope.$index)),attrs:{\"row\":scope.row,\"styleWH\":_vm.styleWH}}),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"reference\",\"icon\":\"el-icon-location-outline\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.showPop(scope)}},slot:\"reference\"})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"onlineStatus\",\"label\":\"在线状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(_vm._s(scope.row.onlineStatus === '0' ? '离线' : '在线'))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"updateTime\",\"formatter\":_vm.formatTime,\"label\":\"更新时间\",\"width\":\"180\"}})],1)],1),_vm._v(\" \"),_c('template',{slot:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next\",\"current-page\":_vm.pagination.pageNum,\"page-size\":_vm.pagination.pageSize,\"total\":_vm.pagination.total},on:{\"update:currentPage\":function($event){return _vm.$set(_vm.pagination, \"pageNum\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.pagination, \"pageNum\", $event)},\"current-change\":_vm.handlePageChange}})],1)],2)],1)],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-62f369ed\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/DeviceState/index.vue\n// module id = BwWB\n// module chunks = 40","<template>\r\n    <el-form :inline=\"true\" :model=\"searchForm\" ref=\"searchForm\" :rules=\"searchRule\" label-width=\"60px\" size=\"mini\" >\r\n        <el-form-item label=\"线路\" prop=\"lineUuid\" width=\"100%\">\r\n            <el-select v-model=\"searchForm.lineUuid\" multiple collapse-tags  placeholder=\"请选择一条或者多条\" width=\"100%\">\r\n                <el-option v-for=\"line in lines\" :key=\"line.lineUuid\" :label=\"line.lineName\" :value=\"line.lineUuid\"></el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"车辆\" prop=\"busPlateNum\">\r\n            <el-select v-model=\"searchForm.busPlateNum\" multiple collapse-tags  placeholder=\"请选择一条或者多条\">\r\n                <el-option v-for=\"bus in buses\" :key=\"bus.busUuid\" :label=\"bus.busPlateNumber\" :value=\"bus.busPlateNumber\"></el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n        <el-form-item style=\"margin-left:20px;\" prop=\"deviceOnlineStatus\">\r\n            <el-radio-group v-model=\"searchForm.deviceOnlineStatus\">\r\n                <el-radio label=\"\">全部</el-radio>\r\n                <el-radio :label=\"1\">在线</el-radio>\r\n                <el-radio :label=\"0\">离线</el-radio>\r\n            </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item style=\"margin-left:20px;\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"search\">更新显示</el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n</template>\r\n<script>\r\n// api\r\nimport { linesList, busesList } from '@/api/common'\r\nexport default {\r\n  name: 'DeviceStateSearch',\r\n  data () {\r\n    return {\r\n      lines: [],\r\n      buses: [],\r\n      searchForm: {\r\n        lineUuid: [],\r\n        busPlateNum: [],\r\n        deviceOnlineStatus: 1\r\n      },\r\n      searchRule: {}\r\n    }\r\n  },\r\n  mounted () {\r\n    // 初始化后先根据默认条件查询数据\r\n    linesList({}).then(res => {\r\n      this.lines = res\r\n    })\r\n    busesList({}).then(res => {\r\n      this.buses = res\r\n    })\r\n    this.search()\r\n  },\r\n  methods: {\r\n    // 转换查询参数为后端需要的参数格式\r\n    convertSearchParams () {\r\n      const searchParams = {\r\n        lineUuid: this.searchForm.lineUuid,\r\n        busPlateNum: this.searchForm.busPlateNum,\r\n        deviceOnlineStatus: this.searchForm.deviceOnlineStatus\r\n      }\r\n      return searchParams\r\n    },\r\n    search () {\r\n      this.$emit('search', this.convertSearchParams())\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/DeviceState/Components/Search.vue","var normalizeComponent = require(\"!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-34b6b1f3\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/DeviceState/Components/Search.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n   <common-wrapper>\r\n     <device-state-search @search=\"search\"></device-state-search>\r\n   </common-wrapper>\r\n   <common-wrapper>\r\n      <el-row class=\"mid-content\">\r\n        <el-col :span=\"8\">\r\n          总在线设备: <span :style=\"{color: systemColor}\">{{ deviceOnlineState.onlineDeviceCount }}</span> 台\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          总设备数量: <span :style=\"{color: systemColor}\">{{  deviceOnlineState.deviceCount }}</span> 台\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          当前设备在线率: <span :style=\"{color: systemColor}\">{{ (deviceOnlineState.onlineDeviceCount / deviceOnlineState.deviceCount * 100).toFixed(2) + '%' }}</span>\r\n        </el-col>\r\n      </el-row>\r\n    </common-wrapper>\r\n    <common-wrapper v-loading=\"!isListLoading\">\r\n        <common-table size=\"small\" :flex=\"265\">\r\n            <template slot=\"table\">\r\n            <el-table height=\"100%\" :data=\"tableData\" stripe >\r\n                <el-table-column type=\"index\" label=\"序号\" width=\"50\"></el-table-column>\r\n                <el-table-column prop=\"deviceCode\" label=\"设备编号\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"lineName\" label=\"线路\"></el-table-column>\r\n                <el-table-column prop=\"busPlateNum\" label=\"车辆\" width=\"180\"></el-table-column>\r\n                <el-table-column label=\"当前位置\">\r\n                  <template slot-scope=\"scope\">\r\n                      <el-popover\r\n                        placement=\"right\"\r\n                        trigger=\"click\"\r\n                        >\r\n                         <baidu-map-com :row=\"scope.row\" :styleWH=\"styleWH\" :ref=\"`popover-${scope.$index}`\"></baidu-map-com>\r\n                        <el-button  icon=\"el-icon-location-outline\" circle slot=\"reference\" @click=\"showPop(scope)\" ></el-button>\r\n                      </el-popover>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"onlineStatus\" label=\"在线状态\">\r\n                  <template slot-scope=\"scope\">\r\n                    <div>{{scope.row.onlineStatus === '0' ? '离线' : '在线'}}</div>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"updateTime\" :formatter=\"formatTime\" label=\"更新时间\"  width=\"180\"></el-table-column>\r\n            </el-table>\r\n            </template>\r\n            <template slot=\"pagination\">\r\n            <el-pagination\r\n              background\r\n              layout=\"total, prev, pager, next\"\r\n              :current-page.sync=\"pagination.pageNum\"\r\n              :page-size=\"pagination.pageSize\"\r\n              :total=\"pagination.total\"\r\n              @current-change=\"handlePageChange\"\r\n            ></el-pagination>\r\n            </template>\r\n        </common-table>\r\n    </common-wrapper>\r\n  </div>\r\n</template>\r\n<script>\r\n/**\r\n* DeviceState Module\r\n* ----------------------\r\n* Author: dengshijun\r\n* Date: 2018.05.14\r\n*/\r\nimport moment from 'moment'\r\nimport { mapGetters } from 'vuex'\r\nimport { baseTheme } from '@/utils/theme'\r\nimport CommonWrapper from '@/components/commonWrapper'\r\nimport CommonTable from '@/components/commonTable'\r\n\r\nimport DeviceStateSearch from './Components/Search'\r\nimport BaiduMapCom from '../Common/PositionMap/index'\r\n// api\r\nimport { deviceStatus, deviceStatusList } from '@/api/device'\r\nexport default {\r\n  name: 'DeviceState',\r\n  data () {\r\n    return {\r\n      // 设备在线状态数据\r\n      deviceOnlineState: {\r\n        deviceCount: 0,\r\n        onlineDeviceCount: 0\r\n      },\r\n      isListLoading: false,\r\n      isLoadingMap: false,\r\n      isTableVisible: false, // 表格数据\r\n      searchParams: null,\r\n      tableData: [],\r\n      pagination: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        total: 0\r\n      },\r\n      styleWH: {\r\n        width: 400,\r\n        height: 400\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['systemTheme']),\r\n    systemColor () {\r\n      return baseTheme[this.systemTheme]\r\n    }\r\n  },\r\n  mounted () {\r\n    // 获取设备设备在线状态\r\n    deviceStatus({}).then(res => {\r\n      this.deviceOnlineState.deviceCount = parseInt(res.deviceCount)\r\n      this.deviceOnlineState.onlineDeviceCount = parseInt(res.onlineDeviceCount)\r\n    })\r\n  },\r\n  methods: {\r\n    // 合并查询参数与翻页参数,生产最终的查询参数对象\r\n    convertParams (params) {\r\n      const p = params || this.searchParams\r\n      return {\r\n        ...p,\r\n        pageNum: this.pagination.pageNum,\r\n        pageSize: this.pagination.pageSize\r\n\r\n      }\r\n    },\r\n    // 查询调用\r\n    search (params) {\r\n      this.searchParams = params\r\n      this.getTableList(this.convertParams(params))\r\n    },\r\n    // 获取列表数据\r\n    getTableList (params) {\r\n      this.isListLoading = false\r\n      deviceStatusList(params).then(res => {\r\n        this.tableData = res.list\r\n        this.pagination.pageNum = parseInt(res.pageNum)\r\n        this.pagination.pageSize = parseInt(res.pageSize)\r\n        this.pagination.total = parseInt(res.total)\r\n        this.isListLoading = true\r\n      })\r\n    },\r\n    // 翻页事件\r\n    handlePageChange (pageNum) {\r\n      this.pagination.pageNum = pageNum\r\n      this.getTableList(this.convertParams())\r\n    },\r\n    formatTime: function (row, column) {\r\n      if (row.updateTime) {\r\n        return moment(row.updateTime).utcOffset(8).format('YYYY-MM-DD HH:mm:ss')\r\n      }\r\n    },\r\n    showPop (scope) {\r\n      const com = `popover-${scope.$index}`\r\n      this.$refs[com].showMap()\r\n    }\r\n  },\r\n  components: {\r\n    CommonWrapper,\r\n    CommonTable,\r\n    DeviceStateSearch,\r\n    BaiduMapCom\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.mid-content {\r\n  font-size:1.1rem;\r\n  padding:5px 0 20px 0;\r\n\r\n  .el-col {\r\n     display: flex;\r\n     justify-content: center;\r\n     align-items: center;\r\n\r\n     span {\r\n      display: inline-block;\r\n      margin-left:10px;\r\n      font-size:1.6rem;\r\n      font-weight:600;\r\n    }\r\n  }\r\n\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/DeviceState/index.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-62f369ed\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"D:\\\\\\\\workspace\\\\\\\\wms_web\\\\\\\\source\\\\\\\\admin\\\\\\\\src\\\\\\\\common\\\\\\\\style\\\\\\\\common.scss\\\"]}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-62f369ed\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-62f369ed\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/DeviceState/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
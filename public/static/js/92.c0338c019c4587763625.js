webpackJsonp([92],{R3qe:function(e,t){},tFbB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r("YTJj"),o=r.n(l),a=r("aA9S"),s=r.n(a),p=r("3cXf"),u=r.n(p),i=r("uTPb"),c=r("I8tE"),d=r("fBur"),n={name:"TemplateEdit",data:function(){return{isVisible:!1,templateForm:{warehouseUuid:"",productUuid:"",productMerchant:"",productBrand:"",productName:"",productModel:"",productStandard:"",productColor:"",productCount:"",productMain:"",productType:"",productMixtrue:"1",productItems:[],productCost:"",productChecked:"0"},formRules:{productMerchant:[{required:!0,message:"请输入商户",trigger:"blur"}],productBrand:[{required:!0,message:"请输入品牌",trigger:"blur"}],productName:[{required:!0,message:"请输入货品名称",trigger:"blur"}],productModel:[{required:!0,message:"请输入型号",trigger:"blur"}],productCost:[{required:!0,message:"请输入计件收费",trigger:"blur"},{validator:i.a.isPrice,message:"请输入正确的价格",trigger:"blur"}],productCount:[{required:!0,message:"请输入包装数",trigger:"blur"},{validator:i.a.isPositiveInteger,message:"请输入正确的数量",trigger:"blur"}],productType:[{required:!0,message:"请选择产品类型",trigger:"blur"}],productMixtrue:[{required:!0,message:"请选择是否允许混搭",trigger:"blur"}],productChecked:[{required:!0,message:"请选择质检方式",trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1},modifyTemplate:{type:Object},merchantsList:{type:Array},brandList:{type:Array}},watch:{show:function(e){this.isVisible=e,e&&(this.templateForm=JSON.parse(u()(this.modifyTemplate)),"0"==this.templateForm.productType&&(this.templateForm.productChecked="0"))}},methods:{save:function(){var e=this;this.$refs.templateForm.validate(function(t){if(t){var r=s()({},e.templateForm);Object(c.f)(r).then(function(t){t.error||(e.$message({message:"编辑模版成功!",type:"success"}),e.cancel(),e.$emit("getBrandModel",{warehouseUuid:Object(d.b)("warehouseUuid")}),e.$emit("updateList"))})}})},cancel:function(){this.$refs.templateForm.resetFields(),this.$emit("update:show",!1),this.$emit("update:modifyTemplate",null),this.isVisible=!1},renderHeader:function(e,t){var r=this;return o()(t),e("el-button",{class:["addBtn"],domProps:{innerHTML:"新增子件"},on:{click:function(){r.addChild()}}})},addChild:function(){var e=this.templateForm.productItems.length,t=e?parseInt(this.templateForm.productItems[e-1].productItemNumber)+1:1;this.templateForm.productItems.push({productItemNumber:t,productItemName:"子件"+t,productItemEnable:"1",productUuid:this.templateForm.productUuid})},delDisabled:function(e){return 0===e},delChild:function(e,t){this.templateForm.productItems.splice(e,1)}}},m=r("zDiX"),b=r.n(m);var f=function(e){r("R3qe")},h=r("C7Lr")(n,b.a,!1,f,"data-v-448fb288",null);t.default=h.exports},zDiX:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{width:"800px",title:"编辑产品模版",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:""},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[r("el-form",{ref:"templateForm",attrs:{inline:!0,model:e.templateForm,rules:e.formRules,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"商户",prop:"productMerchant"}},[r("el-select",{staticStyle:{width:"178px"},attrs:{placeholder:"请选择商户"},model:{value:e.templateForm.productMerchant,callback:function(t){e.$set(e.templateForm,"productMerchant",t)},expression:"templateForm.productMerchant"}},e._l(e.merchantsList,function(e,t){return r("el-option",{key:t,attrs:{disabled:e.disabled,label:e.userName,value:e.userUuid}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"品牌",prop:"productBrand"}},[r("el-select",{staticStyle:{width:"178px"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择品牌"},model:{value:e.templateForm.productBrand,callback:function(t){e.$set(e.templateForm,"productBrand",t)},expression:"templateForm.productBrand"}},e._l(e.brandList,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"货品名称",prop:"productName"}},[r("el-input",{model:{value:e.templateForm.productName,callback:function(t){e.$set(e.templateForm,"productName",t)},expression:"templateForm.productName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"型号",prop:"productModel"}},[r("el-input",{model:{value:e.templateForm.productModel,callback:function(t){e.$set(e.templateForm,"productModel",t)},expression:"templateForm.productModel"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"规格",prop:"productStandard"}},[r("el-input",{model:{value:e.templateForm.productStandard,callback:function(t){e.$set(e.templateForm,"productStandard",t)},expression:"templateForm.productStandard"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"颜色",prop:"productColor"}},[r("el-input",{model:{value:e.templateForm.productColor,callback:function(t){e.$set(e.templateForm,"productColor",t)},expression:"templateForm.productColor"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"包装数量",prop:"productCount"}},[r("el-input-number",{attrs:{"controls-position":"right",min:1,precision:0,step:1,max:99999,size:"mini"},model:{value:e.templateForm.productCount,callback:function(t){e.$set(e.templateForm,"productCount",t)},expression:"templateForm.productCount"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"允许混搭",prop:"productMixtrue"}},[r("el-select",{staticStyle:{width:"178px"},model:{value:e.templateForm.productMixtrue,callback:function(t){e.$set(e.templateForm,"productMixtrue",t)},expression:"templateForm.productMixtrue"}},[r("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"否",value:"0"}})],1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"是否质检",prop:"productChecked"}},[r("el-select",{staticStyle:{width:"178px"},attrs:{disabled:"0"==e.templateForm.productType},model:{value:e.templateForm.productChecked,callback:function(t){e.$set(e.templateForm,"productChecked",t)},expression:"templateForm.productChecked"}},[r("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"否",value:"0"}})],1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12,offset:3}},[r("el-table",{ref:"orderTable",attrs:{stripe:"","max-height":"200","empty-text":"无子件",data:e.templateForm.productItems}},[r("el-table-column",{attrs:{label:"编号",type:"index","header-align":"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"子件名","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{maxlength:"50"},model:{value:t.row.productItemName,callback:function(r){e.$set(t.row,"productItemName",r)},expression:"scope.row.productItemName"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{width:"100px","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",rules:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.delChild(t.$index)}}},[e._v("\n                  删除\n                ")])]}}])})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("提交")]),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=92.c0338c019c4587763625.js.map
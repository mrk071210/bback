webpackJsonp([142],{jRz4:function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",[i("el-dialog",{attrs:{width:"700px",title:"编辑车辆信息",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(s){e.isVisible=s},close:e.cancel}},[i("el-form",{ref:"busForm",attrs:{model:e.busForm,rules:e.formRules,"label-width":"110px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"所属机构",prop:"busOrgUuid"}},[i("el-select",{on:{change:function(s){return e.getLineList(e.busForm.busOrgUuid)}},model:{value:e.busForm.busOrgUuid,callback:function(s){e.$set(e.busForm,"busOrgUuid",s)},expression:"busForm.busOrgUuid"}},e._l(e.lineOrgs,function(e){return i("el-option",{key:e.orgUuid,attrs:{label:e.orgName,value:e.orgUuid}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"车牌号",prop:"busPlateNumber"}},[i("el-input",{attrs:{placeholder:"请输入车牌号"},model:{value:e.busForm.busPlateNumber,callback:function(s){e.$set(e.busForm,"busPlateNumber",s)},expression:"busForm.busPlateNumber"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"所属线路",prop:"busLineUuid"}},[i("el-select",{model:{value:e.busForm.busLineUuid,callback:function(s){e.$set(e.busForm,"busLineUuid",s)},expression:"busForm.busLineUuid"}},e._l(e.lines,function(e){return i("el-option",{key:e.lineUuid,attrs:{label:e.lineName,value:e.lineUuid}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"车辆自编号",prop:"busSelfCode"}},[i("el-input",{attrs:{placeholder:"请输入车辆自编号"},model:{value:e.busForm.busSelfCode,callback:function(s){e.$set(e.busForm,"busSelfCode",s)},expression:"busForm.busSelfCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"设备编号",prop:"busDevUuid"}},[i("el-select",{model:{value:e.busForm.busDevUuid,callback:function(s){e.$set(e.busForm,"busDevUuid",s)},expression:"busForm.busDevUuid"}},e._l(e.devices,function(e){return i("el-option",{key:e.devUuid,attrs:{label:e.devCode,value:e.devUuid}})}),1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:6,offset:18}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},pl1f:function(e,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=i("aA9S"),u=i.n(t),l=i("4+6g"),r=i("z7pT"),o=i("uTPb"),n={name:"BusUpdate",data:function(){return{lineOrgs:[],lines:[],devices:[],devUuid:"",isVisible:!1,busForm:{busOrgUuid:"",busLineUuid:"",busPlateNumber:"",busSelfCode:"",busDevUuid:""},formRules:{busOrgUuid:[{required:!0,message:"请选择所属机构",trigger:"change"}],busLineUuid:[{required:!0,message:"请选择线路",trigger:"change"}],busPlateNumber:[{required:!0,message:"请输入车牌号",trigger:"blur"},{validator:o.a.isVehicleNumber,message:"车牌号格式有误",trigger:"blur"}],busDevUuid:[{required:!0,message:"请输入设备编号",trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1},roleData:{type:Object}},watch:{show:function(e){var s=this;this.busForm=u()({},this.roleData),this.isVisible=e;var i={lineOrgUuid:this.busForm.busOrgUuid,lineIsvalid:"1",lineDropFlag:0};Object(l.j)(i).then(function(e){s.lines=e}),Object(l.d)({devUuid:this.busForm.busDevUuid}).then(function(e){s.devices=e})}},mounted:function(){var e=this;Object(l.g)().then(function(s){e.lineOrgs=s})},methods:{save:function(){var e=this;this.$refs.busForm.validate(function(s){if(s){var i=u()({},e.busForm);Object(r.r)(i).then(function(s){e.$message({message:"编辑路线成功!",type:"success"}),e.cancel(),e.$emit("updateList")})}})},cancel:function(){this.$refs.busForm.resetFields(),this.$emit("update:show",!1),this.isVisible=!1},getLineList:function(e){var s=this;this.busForm.busLineUuid="",this.lines=[];var i={lineOrgUuid:e,lineIsvalid:"1",lineDropFlag:0};Object(l.j)(i).then(function(e){s.lines=e})}}},a=i("jRz4"),b=i.n(a),c=i("C7Lr")(n,b.a,!1,null,null,null);s.default=c.exports}});
//# sourceMappingURL=142.f77d949e646be6763b95.js.map
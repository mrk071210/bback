webpackJsonp([40,132],{"0fHA":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm,rules:e.searchRule,"label-width":"60px",size:"mini"}},[a("el-form-item",{attrs:{label:"线路",prop:"lineUuid",width:"100%"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择一条或者多条",width:"100%"},model:{value:e.searchForm.lineUuid,callback:function(t){e.$set(e.searchForm,"lineUuid",t)},expression:"searchForm.lineUuid"}},e._l(e.lines,function(e){return a("el-option",{key:e.lineUuid,attrs:{label:e.lineName,value:e.lineUuid}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"车辆",prop:"busPlateNum"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择一条或者多条"},model:{value:e.searchForm.busPlateNum,callback:function(t){e.$set(e.searchForm,"busPlateNum",t)},expression:"searchForm.busPlateNum"}},e._l(e.buses,function(e){return a("el-option",{key:e.busUuid,attrs:{label:e.busPlateNumber,value:e.busPlateNumber}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{prop:"deviceOnlineStatus"}},[a("el-radio-group",{model:{value:e.searchForm.deviceOnlineStatus,callback:function(t){e.$set(e.searchForm,"deviceOnlineStatus",t)},expression:"searchForm.deviceOnlineStatus"}},[a("el-radio",{attrs:{label:""}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("在线")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("离线")])],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("更新显示")])],1)],1)},staticRenderFns:[]}},BwWB:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("common-wrapper",[a("device-state-search",{on:{search:e.search}})],1),e._v(" "),a("common-wrapper",[a("el-row",{staticClass:"mid-content"},[a("el-col",{attrs:{span:8}},[e._v("\n        总在线设备: "),a("span",{style:{color:e.systemColor}},[e._v(e._s(e.deviceOnlineState.onlineDeviceCount))]),e._v(" 台\n      ")]),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n        总设备数量: "),a("span",{style:{color:e.systemColor}},[e._v(e._s(e.deviceOnlineState.deviceCount))]),e._v(" 台\n      ")]),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n        当前设备在线率: "),a("span",{style:{color:e.systemColor}},[e._v(e._s((e.deviceOnlineState.onlineDeviceCount/e.deviceOnlineState.deviceCount*100).toFixed(2)+"%"))])])],1)],1),e._v(" "),a("common-wrapper",{directives:[{name:"loading",rawName:"v-loading",value:!e.isListLoading,expression:"!isListLoading"}]},[a("common-table",{attrs:{size:"small",flex:265}},[a("template",{slot:"table"},[a("el-table",{attrs:{height:"100%",data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceCode",label:"设备编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lineName",label:"线路"}}),e._v(" "),a("el-table-column",{attrs:{prop:"busPlateNum",label:"车辆",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"当前位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"right",trigger:"click"}},[a("baidu-map-com",{ref:"popover-"+t.$index,attrs:{row:t.row,styleWH:e.styleWH}}),e._v(" "),a("el-button",{attrs:{slot:"reference",icon:"el-icon-location-outline",circle:""},on:{click:function(a){return e.showPop(t)}},slot:"reference"})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"onlineStatus",label:"在线状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s("0"===t.row.onlineStatus?"离线":"在线"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",formatter:e.formatTime,label:"更新时间",width:"180"}})],1)],1),e._v(" "),a("template",{slot:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pagination.pageNum,"page-size":e.pagination.pageSize,total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageNum",t)},"current-change":e.handlePageChange}})],1)],2)],1)],1)},staticRenderFns:[]}},EUJO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4+6g"),i={name:"DeviceStateSearch",data:function(){return{lines:[],buses:[],searchForm:{lineUuid:[],busPlateNum:[],deviceOnlineStatus:1},searchRule:{}}},mounted:function(){var e=this;Object(n.j)({}).then(function(t){e.lines=t}),Object(n.b)({}).then(function(t){e.buses=t}),this.search()},methods:{convertSearchParams:function(){return{lineUuid:this.searchForm.lineUuid,busPlateNum:this.searchForm.busPlateNum,deviceOnlineStatus:this.searchForm.deviceOnlineStatus}},search:function(){this.$emit("search",this.convertSearchParams())}}},l=a("0fHA"),r=a.n(l),s=a("C7Lr")(i,r.a,!1,null,null,null);t.default=s.exports},Mt9x:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4YfN"),i=a.n(n),l=a("ryJa"),r=a.n(l),s=a("R4Sj"),o=a("TVaK"),c=a("0+j4"),u=a("aIe1"),m=a("EUJO"),p=a("m/nF"),d=a("Qw0R"),v={name:"DeviceState",data:function(){return{deviceOnlineState:{deviceCount:0,onlineDeviceCount:0},isListLoading:!1,isLoadingMap:!1,isTableVisible:!1,searchParams:null,tableData:[],pagination:{pageNum:1,pageSize:10,total:0},styleWH:{width:400,height:400}}},computed:i()({},Object(s.b)(["systemTheme"]),{systemColor:function(){return o.a[this.systemTheme]}}),mounted:function(){var e=this;Object(d.a)({}).then(function(t){e.deviceOnlineState.deviceCount=parseInt(t.deviceCount),e.deviceOnlineState.onlineDeviceCount=parseInt(t.onlineDeviceCount)})},methods:{convertParams:function(e){var t=e||this.searchParams;return i()({},t,{pageNum:this.pagination.pageNum,pageSize:this.pagination.pageSize})},search:function(e){this.searchParams=e,this.getTableList(this.convertParams(e))},getTableList:function(e){var t=this;this.isListLoading=!1,Object(d.b)(e).then(function(e){t.tableData=e.list,t.pagination.pageNum=parseInt(e.pageNum),t.pagination.pageSize=parseInt(e.pageSize),t.pagination.total=parseInt(e.total),t.isListLoading=!0})},handlePageChange:function(e){this.pagination.pageNum=e,this.getTableList(this.convertParams())},formatTime:function(e,t){if(e.updateTime)return r()(e.updateTime).utcOffset(8).format("YYYY-MM-DD HH:mm:ss")},showPop:function(e){var t="popover-"+e.$index;this.$refs[t].showMap()}},components:{CommonWrapper:c.a,CommonTable:u.a,DeviceStateSearch:m.default,BaiduMapCom:p.default}},h=a("BwWB"),f=a.n(h);var b=function(e){a("O8ma")},g=a("C7Lr")(v,f.a,!1,b,"data-v-62f369ed",null);t.default=g.exports},O8ma:function(e,t){}});
//# sourceMappingURL=40.5fdd6cc8203b04f85574.js.map
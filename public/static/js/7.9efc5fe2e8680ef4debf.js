webpackJsonp([7,27,30,39],{"+ea7":function(e,t){},"18dR":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"organization"},[a("div",{staticClass:"main"},[a("div",{staticClass:"left-tree"},[a("VuePerfectScrollbar",{staticClass:"scroll-area"},[a("tree",{ref:"tree",attrs:{isCreate:e.isCreate,clickedNodeData:e.clickedNodeData},on:{"update:isCreate":function(t){e.isCreate=t},nodeClick:e.handleNodeClick,openDialog:e.openDialog,updateTree:e.updateTree}})],1)],1),e._v(" "),a("div",{staticClass:"org-content"},[a("org-detail",{ref:"orgDetail",attrs:{nodeData:e.clickedNodeData}})],1)]),e._v(" "),a("org-update",{attrs:{show:e.showUpdateDialog,isCreate:e.isCreate,nodeData:e.clickedNodeData},on:{"update:show":function(t){e.showUpdateDialog=t},updateTree:e.updateTree}})],1)},staticRenderFns:[]}},"6/qR":function(e,t){},"8Quw":function(e,t){},QfR4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mx14"),n={name:"DicDetail",data:function(){return{orgNodeData:null}},props:{nodeData:{type:Object,required:!0}},watch:{nodeData:{handler:function(e){this.getDetail()},deep:!0}},methods:{refresh:function(e){this.getDetail()},initDetail:function(){this.orgNodeData=null},getDetail:function(){var e=this;if(this.nodeData){var t={orgUuid:this.nodeData.id};Object(i.j)(t).then(function(t){e.orgNodeData=t})}}}},o=a("urZN"),s=a.n(o);var r=function(e){a("6/qR")},c=a("VU/8")(n,s.a,!1,r,"data-v-6b404a62",null);t.default=c.exports},Zo2D:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("etTB"),n=a.n(i),o=a("zIUX"),s=a("QfR4"),r=a("jXHh"),c={name:"OrganizationManagement",data:function(){return{clickedNodeData:{},showUpdateDialog:!1,isCreate:!0}},methods:{handleNodeClick:function(e){var t=e.data;e.node,e.nodeCom;this.clickedNodeData=t},updateTree:function(e){this.$refs.tree.update(),"delete"===e?this.$refs.orgDetail.initDetail():this.$refs.orgDetail.refresh()},openDialog:function(e,t){this.clickedNodeData=t,this.showUpdateDialog=!0}},components:{VuePerfectScrollbar:n.a,Tree:o.default,OrgDetail:s.default,OrgUpdate:r.default}},d=a("18dR"),l=a.n(d);var u=function(e){a("8Quw")},m=a("VU/8")(c,l.a,!1,u,"data-v-79a4798c",null);t.default=m.exports},jXHh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),n=a.n(i),o=(a("uTPb"),a("mx14")),s={dicName:"",dicUuid:"",dicNumber:"",dicPid:"",dicPname:""},r={name:"DicUpdate",data:function(){return{showDetailMode:!0,isVisible:!1,isFormDisabled:!1,dicForm:n()({},s),dicFormRules:{dicName:[{required:!0,message:"请填写字典中文名称",trigger:"change"},{max:30,message:"最大长度为30字符",trigger:"change"}],dicNumber:[{required:!0,message:"请填写字典编号",trigger:"change"},{max:30,message:"最大长度为30字符",trigger:"change"}]}}},props:{show:{type:Boolean,required:!0,default:!1},nodeData:{type:Object,required:!0},isCreate:{type:Boolean,required:!0}},mounted:function(){},watch:{show:function(e){e&&(this.isCreate?this.setToCreateState():this.setToEditState()),this.isVisible=e}},methods:{setToCreateState:function(){this.nodeData?(this.dicForm=n()({},s),this.dicForm.dicPname=this.nodeData.name,this.dicForm.dicPid=this.nodeData.id):(this.$message({message:"未找到父节点,无法在此情况下创建组织结构.",type:"error"}),this.isFormDisabled=!0)},setToEditState:function(){var e=this,t={dicUuid:this.nodeData.id};Object(o.j)(t).then(function(t){e.dicForm=n()({},t)})},save:function(){var e=this;this.$refs.dicForm.validate(function(t){if(t){var a=e.isCreate?o.a:o.w,i=e.isCreate?"新建":"修改";a(e.dicForm).then(function(t){t.error||(e.$message({message:i+"成功!",type:"success"}),e.$emit("updateTree"),e.cancel())})}})},cancel:function(){this.isVisible=!1,this.$emit("update:show",!1),this.dicForm=n()({},s),this.$refs.dicForm.resetFields()}}},c=a("wDmU"),d=a.n(c);var l=function(e){a("qR9s")},u=a("VU/8")(r,d.a,!1,l,"data-v-55d9263f",null);t.default=u.exports},p0Yx:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-contextmenu",{ref:"treeMenu"},[a("v-contextmenu-item",{on:{click:e.createOrg}},[e._v("新建字典")]),e._v(" "),a("v-contextmenu-item",{on:{click:e.editOrg}},[e._v("修改字典")]),e._v(" "),a("v-contextmenu-item",{attrs:{disabled:e.contextmenuSelectedNode&&""===e.contextmenuSelectedNode.pId},on:{click:e.deleteOrg}},[e._v("删除字典")])],1),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.orgTreeData,"node-key":"id",props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1,"render-content":e.customRender},on:{"node-contextmenu":e.showContextMenu,"node-click":e.handleNodeClick}})],1)},staticRenderFns:[]}},qR9s:function(e,t){},urZN:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"org-content"},[e.orgNodeData?a("div",{staticClass:"main-content"},[a("div",{staticClass:"org-form"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("字典Id")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.dicUuid))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("字典编码")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.dicNumber))])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("中文名称")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.dicName))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("父节点")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.dicPid))])])],1)],1)]):a("div",{staticClass:"empty"},[a("h3",[e._v("请在左侧选择一个字典")]),e._v(" "),a("h5",[e._v("右击节点可进行操作")])])])},staticRenderFns:[]}},wDmU:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"400px",title:(e.isCreate?"新建":"编辑")+"字典管理",visible:e.isVisible},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[a("div",{staticClass:"org-form"},[a("el-form",{ref:"dicForm",attrs:{inline:!0,model:e.dicForm,rules:e.dicFormRules,disabled:e.isFormDisabled,"label-width":"120px"}},[a("el-row",[e.isCreate?e._e():a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"字典ID",prop:"dicUuid"}},[a("el-input",{attrs:{disabled:""},model:{value:e.dicForm.dicUuid,callback:function(t){e.$set(e.dicForm,"dicUuid",t)},expression:"dicForm.dicUuid"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"字典编码",prop:"dicNumber"}},[a("el-input",{model:{value:e.dicForm.dicNumber,callback:function(t){e.$set(e.dicForm,"dicNumber",t)},expression:"dicForm.dicNumber"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"字典中文名称",prop:"dicName"}},[a("el-input",{model:{value:e.dicForm.dicName,callback:function(t){e.$set(e.dicForm,"dicName",t)},expression:"dicForm.dicName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"父节点",prop:"dicPname"}},[a("el-input",{attrs:{readonly:!0},model:{value:e.dicForm.dicPname,callback:function(t){e.$set(e.dicForm,"dicPname",t)},expression:"dicForm.dicPname"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-right",attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)])},staticRenderFns:[]}},zIUX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("nvbp"),n=a.n(i),o=a("Dd8w"),s=a.n(o),r=a("NYxO"),c=a("TVaK"),d=a("QPLA"),l=a("mx14"),u={name:"OrganizationTree",data:function(){return{orgTreeData:[],contextmenuSelectedNode:null,defaultProps:{label:"name"}}},props:{clickedNodeData:{type:Object}},computed:s()({},Object(r.b)(["systemTheme"]),{selectedNode:function(){return this.clickedNodeData},systemColor:function(){return c.a[this.systemTheme]}}),mounted:function(){this.initOrgTree()},methods:{initOrgTree:function(){var e=this;Object(l.k)().then(function(t){e.orgTreeData=Object(d.a)(t)})},handleNodeClick:function(e,t,a){this.$emit("nodeClick",{data:e,node:t,nodeCom:a})},showContextMenu:function(e,t,a,i){if(a){var n=this.$refs.tree,o=this.$refs.treeMenu;this.contextmenuSelectedNode=t,n.setCurrentKey(t.id),o.show({top:e.clientY,left:e.clientX})}},update:function(){this.initOrgTree()},createOrg:function(){this.$emit("update:isCreate",!0),this.$emit("openDialog","OrgUpdate",this.contextmenuSelectedNode)},editOrg:function(){this.$emit("update:isCreate",!1),this.$emit("openDialog","OrgUpdate",this.contextmenuSelectedNode)},deleteOrg:function(){var e=this,t=this.contextmenuSelectedNode,a=t.name,i=t.id;i&&this.$confirm("此操作将删除字典:["+a+"], 确认要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.g)({orgUuid:i}).then(function(t){t.error||(e.$message({type:"success",message:"删除成功!"}),e.initOrgTree(),e.$emit("updateTree","delete"))})}).catch(function(){})},customRender:function(e,t){var a=t.node,i=t.data,o=(t.store,this.$createElement);return o("span",n()([{class:"custom-tree-node"},{directives:[{name:"contextmenu",arg:"treeMenu"}]}]),[o("span",[a.label]),this.$refs.tree.getCurrentNode()&&i.id===this.$refs.tree.getCurrentNode().id&&o("span",{class:"active",style:{backgroundColor:this.systemColor}})])}}},m=a("p0Yx"),f=a.n(m);var p=function(e){a("+ea7")},h=a("VU/8")(u,f.a,!1,p,"data-v-0167302d",null);t.default=h.exports}});
//# sourceMappingURL=7.9efc5fe2e8680ef4debf.js.map
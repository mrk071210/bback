{"version":3,"sources":["webpack:///source/admin/src/views/BasicInformation/Organization/Components/OrgUpdate.vue","webpack:///./source/admin/src/views/BasicInformation/Organization/Components/OrgUpdate.vue","webpack:///source/admin/src/views/BasicInformation/Organization/Components/OrgDetail.vue","webpack:///./source/admin/src/views/BasicInformation/Organization/Components/OrgDetail.vue","webpack:///./source/admin/src/views/BasicInformation/Organization/index.vue?dbe6","webpack:///./source/admin/src/views/BasicInformation/Organization/Components/OrgDetail.vue?d51c","webpack:///./source/admin/src/views/BasicInformation/Organization/Components/Tree.vue?87f4","webpack:///source/admin/src/views/BasicInformation/Organization/Components/Tree.vue","webpack:///./source/admin/src/views/BasicInformation/Organization/Components/Tree.vue","webpack:///./source/admin/src/views/BasicInformation/Organization/Components/OrgUpdate.vue?1e1c","webpack:///source/admin/src/views/BasicInformation/Organization/index.vue","webpack:///./source/admin/src/views/BasicInformation/Organization/index.vue"],"names":["initFormState","orgName","orgShortName","orgType","orgParentName","orgParentUuid","orgSortIndex","orgEnabled","orgDesc","OrgUpdate","name","data","showDetailMode","isVisible","isFormDisabled","organization","orgForm","assign_default","orgFormRules","required","message","trigger","max","validator","extendValidate","isShortString","strNumber","props","show","type","Boolean","default","nodeData","Object","isCreate","mounted","watch","isShow","this","setToCreateState","setToEditState","methods","id","$message","parentNode","pName","pId","sortIndex","parseInt","orgUuid","save","_this","$refs","validate","isValid","submitText","params","console","log","then","res","error","$emit","cancel","resetFields","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","OrgUpdate_default","a","__webpack_exports__","OrgDetail","orgNodeData","handler","getDetail","deep","refresh","initDetail","OrgDetail_default","module","exports","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","clickedNodeData","on","update:isCreate","$event","update:is-create","nodeClick","handleNodeClick","openDialog","updateTree","_v","showUpdateDialog","update:show","updateDetail","staticRenderFns","span","_s","click","createOrg","editOrg","disabled","contextmenuSelectedNode","deleteOrg","orgTreeData","node-key","defaultProps","default-expand-all","expand-on-click-node","render-content","customRender","node-contextmenu","showContextMenu","node-click","Tree","label","computed","extends_default","vuex_esm","selectedNode","systemColor","theme","systemTheme","initOrgTree","generateTree","node","nodeCom","event","tree","contextMenu","treeMenu","setCurrentKey","top","clientY","left","clientX","update","_this2","_contextmenuSelectedN","$confirm","confirmButtonText","cancelButtonText","catch","createElement","_ref","h","store","_babel_helper_vue_jsx_merge_props_2_0_3_babel_helper_vue_jsx_merge_props_default","class","directives","arg","getCurrentNode","style","backgroundColor","Tree_default","width","title","visible","update:visible","close","inline","model","rules","label-width","prop","clearable","value","callback","$$v","$set","expression","staticStyle","maxlength","rows","placeholder","Organization","orgDetail","componentName","components","VuePerfectScrollbar","dist_default","Organization_default"],"mappings":"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","file":"static/js/11.9760e0c44ca0563eac9a.js","sourcesContent":["<template>\r\n    <el-dialog\r\n    width=\"670px\"\r\n    :title=\"(isCreate ? '新增':'编辑')+'机构'\"\r\n    :visible.sync=\"isVisible\"\r\n    @close=\"cancel\"\r\n    >\r\n        <div class=\"org-form\">\r\n            <el-form :inline=\"true\" ref=\"orgForm\" :model=\"orgForm\" :rules=\"orgFormRules\" :disabled=\"isFormDisabled\" label-width=\"100px\">\r\n                <el-row>\r\n                    <el-col :span=\"12\">\r\n                        <el-form-item label=\"机构名称\" prop=\"orgName\">\r\n                            <el-input v-model=\"orgForm.orgName\" clearable/>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"12\">\r\n                        <el-form-item label=\"机构简称\" prop=\"orgShortName\">\r\n                            <el-input v-model=\"orgForm.orgShortName\" clearable/>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-row>\r\n                    <!--<el-col :span=\"12\">-->\r\n                        <!--<el-form-item label=\"机构类型\" prop=\"orgType\">-->\r\n                            <!--<el-select v-model=\"orgForm.orgType\" style=\"width:178px\">-->\r\n                                <!--<el-option-->\r\n                                <!--v-for=\"(org, index) in organization\"-->\r\n                                <!--:key=\"index\"-->\r\n                                <!--:value=\"org.orgType\"-->\r\n                                <!--:label=\"org.orgTypeName\"-->\r\n                                <!--/>-->\r\n                            <!--</el-select>-->\r\n                        <!--</el-form-item>-->\r\n                    <!--</el-col>-->\r\n                    <el-col :span=\"12\">\r\n                        <el-form-item label=\"上级机构\" prop=\"orgParentName\">\r\n                            <el-input v-model=\"orgForm.orgParentName\" disabled clearable/>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                  <!--<el-col :span=\"12\">-->\r\n                    <!--<el-form-item label=\"状态\" prop=\"orgEnabled\">-->\r\n                      <!--<el-radio-group v-model=\"orgForm.orgEnabled\" >-->\r\n                        <!--<el-radio :label=\"1\">启用</el-radio>-->\r\n                        <!--<el-radio :label=\"0\">禁用</el-radio>-->\r\n                      <!--</el-radio-group>-->\r\n                    <!--</el-form-item>-->\r\n                  <!--</el-col>-->\r\n                </el-row>\r\n                <!--<el-row>-->\r\n                    <!--<el-col :span=\"12\">-->\r\n                        <!--<el-form-item label=\"显示顺序\" prop=\"orgSortIndex\">-->\r\n                            <!--<el-input v-model=\"orgForm.orgSortIndex\" clearable/>-->\r\n                        <!--</el-form-item>-->\r\n                    <!--</el-col>-->\r\n\r\n                <!--</el-row>-->\r\n                <el-row>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"机构描述\" prop=\"orgDesc\" style=\"width:100%\">\r\n                            <el-input type=\"textarea\"\r\n                                style=\"width:495px\"\r\n                                maxlength=\"200\"\r\n                                v-model=\"orgForm.orgDesc\"\r\n                                :rows=\"5\"\r\n                                placeholder=\"填写机构描述，最长200字符\"\r\n                                clearable\r\n                            />\r\n                        </el-form-item>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-row>\r\n                    <el-col :span=\"24\" class=\"flex-right\">\r\n                        <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n                        <el-button @click=\"cancel\">取消</el-button>\r\n                    </el-col>\r\n                </el-row>\r\n            </el-form>\r\n        </div>\r\n    </el-dialog>\r\n</template>\r\n<script>\r\n/**\r\n * Organization Detail Add/Edit Component\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.03.20\r\n */\r\nimport Validator from '@/utils/extendValidate/extendValidate'\r\n// api\r\nimport { getOrgList } from '@/api/common'\r\nimport { createOrgNode, getOrgDetail, updateOrgNode } from '@/api/organization'\r\n\r\n// init Form Data\r\nconst initFormState = {\r\n  orgName: '',\r\n  orgShortName: '',\r\n  orgType: '',\r\n  orgParentName: '',\r\n  orgParentUuid: '',\r\n  orgSortIndex: '1',\r\n  orgEnabled: 1,\r\n  orgDesc: ''\r\n}\r\n\r\nexport default {\r\n  name: 'OrgUpdate',\r\n  data () {\r\n    return {\r\n      showDetailMode: true,\r\n      isVisible: false,\r\n      isFormDisabled: false,\r\n      organization: [],\r\n      orgForm: Object.assign({}, initFormState),\r\n      orgFormRules: {\r\n        orgName: [\r\n          {required: true, message: '请填写机构名称', trigger: 'blur'},\r\n          {max: 30, message: '最大长度为30字符', trigger: 'blur'}\r\n        ],\r\n        orgShortName: [\r\n          {required: true, message: '请填写机构简称', trigger: 'blur'},\r\n          {validator: Validator.isShortString,message:'请输入一到六位英文字母', trigger: 'blur'}\r\n        ],\r\n        orgType: [{required: true, message: '请选择机构类型', trigger: 'blur'}],\r\n        orgSortIndex: [\r\n          {required: true, message: '请输入顺序号', trigger: 'blur'},\r\n          {validator: Validator.strNumber, trigger: 'blur'},\r\n          {max: 3, message: '不能超过3位数字', trigger: 'blur'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      required: true,\r\n      default: false\r\n    },\r\n    nodeData: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    isCreate: {\r\n      type: Boolean,\r\n      required: true\r\n    }\r\n  },\r\n  mounted () {\r\n  },\r\n  watch: {\r\n    show (isShow) {\r\n      if (isShow) {\r\n        // getOrgList().then(res => {\r\n        //   this.organization = res.item\r\n        // })\r\n        // 新增\r\n        if (this.isCreate) {\r\n          this.setToCreateState()\r\n        // 编辑\r\n        } else {\r\n          this.setToEditState()\r\n        }\r\n      }\r\n\r\n      // 设置窗口显示状态\r\n      this.isVisible = isShow\r\n    }\r\n  },\r\n  methods: {\r\n    setToCreateState () {\r\n      const parentNode = this.nodeData\r\n      if (parentNode) {\r\n        this.orgForm = Object.assign({}, initFormState)\r\n        this.orgForm.orgParentName = this.nodeData.orgName\r\n        this.orgForm.orgParentUuid = this.nodeData.id\r\n      } else {\r\n        this.$message({\r\n          message: '未找到父节点,无法在此情况下创建组织结构.',\r\n          type: 'error'\r\n        })\r\n        this.isFormDisabled = true\r\n      }\r\n    },\r\n    setToEditState () {\r\n      const params = {\r\n        orgUuid: this.nodeData.id\r\n      }\r\n      const parentNode = this.nodeData\r\n      this.orgForm = Object.assign({}, parentNode)\r\n      this.orgForm.orgShortName = this.nodeData.name\r\n      this.orgForm.orgParentName = this.nodeData.pName || this.nodeData.name\r\n      this.orgForm.orgParentUuid = this.nodeData.pId\r\n      this.orgForm.orgSortIndex = this.nodeData.sortIndex\r\n      this.orgForm.orgEnabled = parseInt(this.nodeData.orgEnabled)\r\n      this.orgForm.orgUuid = this.nodeData.id\r\n      // getOrgDetail(params).then(res => {\r\n      //   this.orgForm = Object.assign({}, res)\r\n      // })\r\n    },\r\n    save () {\r\n      this.$refs.orgForm.validate(isValid => {\r\n        if (isValid) {\r\n          const submitText = this.isCreate ? '新增' : '修改'\r\n          let params = Object.assign({},this.orgForm)\r\n          console.log(params)\r\n          createOrgNode(params).then(res => {\r\n            if (!res.error) {\r\n              this.$message({\r\n                message: `${submitText}成功!`,\r\n                type: 'success'\r\n              })\r\n              // 重新读取tree\r\n              this.$emit('updateTree')\r\n              if (!this.isCreate) {\r\n                params.sortIndex = params.orgSortIndex\r\n                params.name = params.orgShortName\r\n                console.log(params)\r\n                this.$emit('updateDetail',params)\r\n              }\r\n              this.cancel()\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    cancel () {\r\n      this.isVisible = false\r\n      this.$emit('update:show', false)\r\n      this.orgForm = Object.assign({}, initFormState)\r\n      this.$refs.orgForm.resetFields()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.org-content {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    .org-form{\r\n        width:80%;\r\n        max-width:1000px;\r\n        min-width:600px;\r\n        margin:10px;\r\n        padding:10px;\r\n        border:1px solid $base-light-color;\r\n        border-radius:8px;\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/BasicInformation/Organization/Components/OrgUpdate.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ab4268e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"D:\\\\\\\\workspace\\\\\\\\wms_web\\\\\\\\source\\\\\\\\admin\\\\\\\\src\\\\\\\\common\\\\\\\\style\\\\\\\\common.scss\\\"]}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./OrgUpdate.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./OrgUpdate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./OrgUpdate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ab4268e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./OrgUpdate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5ab4268e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/BasicInformation/Organization/Components/OrgUpdate.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"org-content\">\r\n        <div class=\"empty\" v-if=\"!orgNodeData\">\r\n            <h3>请在左侧选择一个机构</h3>\r\n            <h5>右击节点可进行操作</h5>\r\n        </div>\r\n        <div class=\"main-content\" v-else>\r\n            <div class=\"org-form\">\r\n                <el-row>\r\n                    <el-col :span=\"12\">\r\n                        <span class=\"label\">机构全称</span>\r\n                        <span class=\"content\">{{ orgNodeData.orgName }}</span>\r\n                    </el-col>\r\n                    <el-col :span=\"12\">\r\n                        <span class=\"label\">机构简称</span>\r\n                        <span class=\"content\">{{ orgNodeData.name }}</span>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-row>\r\n                    <!-- <el-col :span=\"12\">\r\n                        <span class=\"label\">机构类型</span>\r\n                        <span class=\"content\">{{ orgNodeData.orgType }}</span>\r\n                    </el-col> -->\r\n                    <el-col :span=\"12\">\r\n                        <span class=\"label\">上级机构</span>\r\n                        <span class=\"content\">{{ orgNodeData.pName ||  orgNodeData.name}}</span>\r\n                    </el-col>\r\n                    <!--<el-col :span=\"12\">-->\r\n                        <!--<span class=\"label\">显示顺序</span>-->\r\n                        <!--<span class=\"content\">{{ orgNodeData.sortIndex }}</span>-->\r\n                    <!--</el-col>-->\r\n                  <!--<el-col :span=\"12\">-->\r\n                    <!--<span class=\"label\">状态</span>-->\r\n                    <!--<span class=\"content\">{{ orgNodeData.orgEnabled == 1 ? '启用' : '禁用' }}</span>-->\r\n                  <!--</el-col>-->\r\n                </el-row>\r\n                <el-row>\r\n\r\n                </el-row>\r\n                <el-row>\r\n                    <el-col :span=\"24\">\r\n                        <span class=\"label\">机构描述</span>\r\n                        <span class=\"content\">{{ orgNodeData.orgDesc }}</span>\r\n                    </el-col>\r\n                </el-row>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n/**\r\n * Organization Detail Component\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.03.20\r\n */\r\n// api\r\nimport { getOrgDetail } from '@/api/organization'\r\n\r\nexport default {\r\n  name: 'OrgDetail',\r\n  data () {\r\n    return {\r\n      orgNodeData: null\r\n    }\r\n  },\r\n  props: {\r\n    nodeData: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  watch: {\r\n    nodeData: {\r\n      handler (nodeData) {\r\n        this.getDetail()\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  methods: {\r\n    refresh (type) {\r\n      this.getDetail()\r\n    },\r\n    initDetail () {\r\n      this.orgNodeData = null\r\n    },\r\n    getDetail () {\r\n      if (this.nodeData) {\r\n          this.orgNodeData = Object.assign({},this.nodeData)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.org-content {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    .empty{\r\n        padding:30px;\r\n        font-size:2rem;\r\n        color: darken($base-light-color, 15%);\r\n    }\r\n\r\n    .main-content {\r\n        width:100%;\r\n        max-width:1200px;\r\n\r\n        .org-form{\r\n            margin:10px;\r\n            padding:10px;\r\n            border:1px solid darken($base-light-color, 5%);\r\n            border-radius:8px;\r\n            font-size:1.2rem;\r\n            box-sizing: border-box;\r\n\r\n            .el-row {\r\n                border-bottom:1px solid darken($base-light-color, 5%);\r\n\r\n                span {\r\n                    display: inline-block;\r\n                    padding:10px 5px;\r\n\r\n                    &.label {\r\n                        font-weight:600;\r\n                    }\r\n                }\r\n\r\n                &:last-child {\r\n                    border-bottom: none;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/BasicInformation/Organization/Components/OrgDetail.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3fe8f154\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"D:\\\\\\\\workspace\\\\\\\\wms_web\\\\\\\\source\\\\\\\\admin\\\\\\\\src\\\\\\\\common\\\\\\\\style\\\\\\\\common.scss\\\"]}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./OrgDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./OrgDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./OrgDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3fe8f154\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./OrgDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3fe8f154\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/BasicInformation/Organization/Components/OrgDetail.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"organization\"},[_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"left-tree\"},[_c('VuePerfectScrollbar',{staticClass:\"scroll-area\"},[_c('tree',{ref:\"tree\",attrs:{\"isCreate\":_vm.isCreate,\"clickedNodeData\":_vm.clickedNodeData},on:{\"update:isCreate\":function($event){_vm.isCreate=$event},\"update:is-create\":function($event){_vm.isCreate=$event},\"nodeClick\":_vm.handleNodeClick,\"openDialog\":_vm.openDialog,\"updateTree\":_vm.updateTree}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"org-content\"},[_c('org-detail',{ref:\"orgDetail\",attrs:{\"nodeData\":_vm.clickedNodeData}})],1)]),_vm._v(\" \"),_c('org-update',{attrs:{\"show\":_vm.showUpdateDialog,\"isCreate\":_vm.isCreate,\"nodeData\":_vm.clickedNodeData},on:{\"update:show\":function($event){_vm.showUpdateDialog=$event},\"updateDetail\":_vm.updateDetail,\"updateTree\":_vm.updateTree}})],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-558242d0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/BasicInformation/Organization/index.vue\n// module id = JQFL\n// module chunks = 11","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"org-content\"},[(!_vm.orgNodeData)?_c('div',{staticClass:\"empty\"},[_c('h3',[_vm._v(\"请在左侧选择一个机构\")]),_vm._v(\" \"),_c('h5',[_vm._v(\"右击节点可进行操作\")])]):_c('div',{staticClass:\"main-content\"},[_c('div',{staticClass:\"org-form\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('span',{staticClass:\"label\"},[_vm._v(\"机构全称\")]),_vm._v(\" \"),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.orgNodeData.orgName))])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('span',{staticClass:\"label\"},[_vm._v(\"机构简称\")]),_vm._v(\" \"),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.orgNodeData.name))])])],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('span',{staticClass:\"label\"},[_vm._v(\"上级机构\")]),_vm._v(\" \"),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.orgNodeData.pName ||  _vm.orgNodeData.name))])])],1),_vm._v(\" \"),_c('el-row'),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('span',{staticClass:\"label\"},[_vm._v(\"机构描述\")]),_vm._v(\" \"),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.orgNodeData.orgDesc))])])],1)],1)])])}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3fe8f154\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/BasicInformation/Organization/Components/OrgDetail.vue\n// module id = YCbL\n// module chunks = 11 94","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-contextmenu',{ref:\"treeMenu\"},[_c('v-contextmenu-item',{on:{\"click\":_vm.createOrg}},[_vm._v(\"新增机构\")]),_vm._v(\" \"),_c('v-contextmenu-item',{on:{\"click\":_vm.editOrg}},[_vm._v(\"修改机构\")]),_vm._v(\" \"),_c('v-contextmenu-item',{attrs:{\"disabled\":_vm.contextmenuSelectedNode && _vm.contextmenuSelectedNode.pId === ''},on:{\"click\":_vm.deleteOrg}},[_vm._v(\"删除机构\")])],1),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.orgTreeData,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"default-expand-all\":\"\",\"expand-on-click-node\":false,\"render-content\":_vm.customRender},on:{\"node-contextmenu\":_vm.showContextMenu,\"node-click\":_vm.handleNodeClick}})],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-64a075f4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/BasicInformation/Organization/Components/Tree.vue\n// module id = ZP6G\n// module chunks = 11 78","<template>\r\n  <div>\r\n\r\n      <v-contextmenu ref=\"treeMenu\">\r\n        <v-contextmenu-item @click=\"createOrg\">新增机构</v-contextmenu-item>\r\n        <v-contextmenu-item @click=\"editOrg\">修改机构</v-contextmenu-item>\r\n        <v-contextmenu-item @click=\"deleteOrg\" :disabled=\"contextmenuSelectedNode && contextmenuSelectedNode.pId === '' \">删除机构</v-contextmenu-item>\r\n      </v-contextmenu>\r\n\r\n      <el-tree\r\n        ref=\"tree\"\r\n        :data=\"orgTreeData\"\r\n        node-key=\"id\"\r\n        :props=\"defaultProps\"\r\n        default-expand-all\r\n        :expand-on-click-node=\"false\"\r\n        @node-contextmenu=\"showContextMenu\"\r\n        @node-click=\"handleNodeClick\"\r\n        :render-content=\"customRender\"\r\n      >\r\n      </el-tree>\r\n  </div>\r\n</template>\r\n<script>\r\n/**\r\n * Organization Tree Component\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.03.20\r\n */\r\nimport { mapGetters } from 'vuex'\r\nimport { baseTheme } from '@/utils/theme'\r\nimport { generateTree } from '@/utils/generateTree'\r\n// api\r\nimport { getOrgTree, deleteOrgNode } from '@/api/organization'\r\n\r\nexport default {\r\n  name: 'OrganizationTree',\r\n  data () {\r\n    return {\r\n      orgTreeData: [],\r\n      contextmenuSelectedNode: null,\r\n      defaultProps: {\r\n        label: 'orgName'\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    clickedNodeData: {\r\n      type: Object\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['systemTheme']),\r\n    selectedNode () {\r\n      return this.clickedNodeData\r\n    },\r\n    systemColor () {\r\n      return baseTheme[this.systemTheme]\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initOrgTree()\r\n  },\r\n  methods: {\r\n    initOrgTree () {\r\n      getOrgTree().then(res => {\r\n        this.orgTreeData = generateTree(res)\r\n        console.log(this.orgTreeData)\r\n      })\r\n    },\r\n    // 节点点击事件\r\n    handleNodeClick (data, node, nodeCom) {\r\n      this.$emit('nodeClick', { data, node, nodeCom })\r\n    },\r\n    // 节点右键弹出菜单\r\n    showContextMenu (event, data, node, nodeCom) {\r\n      if (node) {\r\n        const tree = this.$refs.tree\r\n        const contextMenu = this.$refs.treeMenu\r\n        // 右键设置当前树节点为选中状态\r\n        this.contextmenuSelectedNode = data\r\n        tree.setCurrentKey(data.id)\r\n        // 弹出菜单\r\n        contextMenu.show({top: event.clientY, left: event.clientX})\r\n      }\r\n    },\r\n    update () {\r\n      this.initOrgTree()\r\n      // console.log('tree updated.')\r\n    },\r\n    // 菜单 -- 新增\r\n    createOrg () {\r\n      this.$emit('update:isCreate', true)\r\n      this.$emit('openDialog', 'OrgUpdate', this.contextmenuSelectedNode)\r\n    },\r\n    // 菜单 -- 编辑\r\n    editOrg () {\r\n      this.$emit('update:isCreate', false)\r\n      this.$emit('openDialog', 'OrgUpdate', this.contextmenuSelectedNode)\r\n    },\r\n    // 菜单 -- 删除\r\n    deleteOrg () {\r\n      const { name, id } = this.contextmenuSelectedNode\r\n      if (id) {\r\n        let suggest = `确认删除该机构及其下属机构吗?`\r\n        this.$confirm(suggest, '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          deleteOrgNode({orgUuid: id}).then(res => {\r\n            if (!res.error) {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '删除成功!'\r\n              })\r\n              this.initOrgTree()\r\n              this.$emit('updateTree', 'delete')\r\n            }\r\n          })\r\n        }).catch(() => {})\r\n      }\r\n    },\r\n    // 树节点自定义渲染格式 (JSX)\r\n    customRender (createElement, {node, data, store}) {\r\n      // directive 参数参考指令钩子函数中的定义: https://cn.vuejs.org/v2/guide/custom-directive.html\r\n      const directives = [{name: 'contextmenu', arg: 'treeMenu'}]\r\n      return (\r\n        <span class=\"custom-tree-node\" { ...{directives} } >\r\n          <span>{node.label}</span>\r\n          {\r\n            (this.$refs.tree.getCurrentNode() && data.id === this.$refs.tree.getCurrentNode().id) &&\r\n            <span class=\"active\" style={{backgroundColor: this.systemColor}}></span>\r\n          }\r\n        </span>\r\n      )\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.custom-tree-node {\r\n  position:relative;\r\n  width:100%;\r\n\r\n  .active {\r\n    position: absolute;\r\n    display: inline-block;\r\n    width:10px;\r\n    height:10px;\r\n    right:10px;\r\n    top:3px;\r\n    border-radius:10px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/BasicInformation/Organization/Components/Tree.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-64a075f4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"D:\\\\\\\\workspace\\\\\\\\wms_web\\\\\\\\source\\\\\\\\admin\\\\\\\\src\\\\\\\\common\\\\\\\\style\\\\\\\\common.scss\\\"]}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Tree.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-64a075f4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Tree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-64a075f4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/BasicInformation/Organization/Components/Tree.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"width\":\"670px\",\"title\":(_vm.isCreate ? '新增':'编辑')+'机构',\"visible\":_vm.isVisible},on:{\"update:visible\":function($event){_vm.isVisible=$event},\"close\":_vm.cancel}},[_c('div',{staticClass:\"org-form\"},[_c('el-form',{ref:\"orgForm\",attrs:{\"inline\":true,\"model\":_vm.orgForm,\"rules\":_vm.orgFormRules,\"disabled\":_vm.isFormDisabled,\"label-width\":\"100px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"机构名称\",\"prop\":\"orgName\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.orgForm.orgName),callback:function ($$v) {_vm.$set(_vm.orgForm, \"orgName\", $$v)},expression:\"orgForm.orgName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"机构简称\",\"prop\":\"orgShortName\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.orgForm.orgShortName),callback:function ($$v) {_vm.$set(_vm.orgForm, \"orgShortName\", $$v)},expression:\"orgForm.orgShortName\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"上级机构\",\"prop\":\"orgParentName\"}},[_c('el-input',{attrs:{\"disabled\":\"\",\"clearable\":\"\"},model:{value:(_vm.orgForm.orgParentName),callback:function ($$v) {_vm.$set(_vm.orgForm, \"orgParentName\", $$v)},expression:\"orgForm.orgParentName\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"机构描述\",\"prop\":\"orgDesc\"}},[_c('el-input',{staticStyle:{\"width\":\"495px\"},attrs:{\"type\":\"textarea\",\"maxlength\":\"200\",\"rows\":5,\"placeholder\":\"填写机构描述，最长200字符\",\"clearable\":\"\"},model:{value:(_vm.orgForm.orgDesc),callback:function ($$v) {_vm.$set(_vm.orgForm, \"orgDesc\", $$v)},expression:\"orgForm.orgDesc\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{staticClass:\"flex-right\",attrs:{\"span\":24}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1)],1)],1)])}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-5ab4268e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/BasicInformation/Organization/Components/OrgUpdate.vue\n// module id = llM8\n// module chunks = 11 82","<template>\r\n  <div class=\"organization\">\r\n    <!-- <header-breadcrumb :breadData=\"$route.matched\" /> -->\r\n    <div class=\"main\">\r\n      <div class=\"left-tree\">\r\n        <VuePerfectScrollbar class=\"scroll-area\" >\r\n          <tree\r\n            ref=\"tree\"\r\n            :isCreate.sync=\"isCreate\"\r\n            :clickedNodeData=\"clickedNodeData\"\r\n            @nodeClick=\"handleNodeClick\"\r\n            @openDialog=\"openDialog\"\r\n            @updateTree=\"updateTree\"\r\n          />\r\n        </VuePerfectScrollbar>\r\n      </div>\r\n      <div class=\"org-content\">\r\n        <org-detail ref=\"orgDetail\" :nodeData=\"clickedNodeData\" />\r\n      </div>\r\n    </div>\r\n    <!-- update Dialog -->\r\n    <org-update\r\n      :show.sync=\"showUpdateDialog\"\r\n      :isCreate=\"isCreate\"\r\n      :nodeData=\"clickedNodeData\"\r\n      @updateDetail=\"updateDetail\"\r\n      @updateTree=\"updateTree\"\r\n    />\r\n  </div>\r\n</template>\r\n<script>\r\n/**\r\n * Organization Management Module\r\n * ----------------------\r\n * Author: zhou qi\r\n * Date: 2018.03.20\r\n */\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\r\n\r\nimport Tree from './Components/Tree'\r\nimport OrgDetail from './Components/OrgDetail'\r\nimport OrgUpdate from './Components/OrgUpdate'\r\n\r\nexport default {\r\n  name: 'OrganizationManagement',\r\n  data () {\r\n    return {\r\n      clickedNodeData: {},\r\n      showUpdateDialog: false,\r\n      isCreate: true // 当前是新增还是编辑\r\n    }\r\n  },\r\n  methods: {\r\n    handleNodeClick ({data, node, nodeCom}) {\r\n      this.clickedNodeData = data\r\n    },\r\n    // type 为子组件在调用该方法时传递的类型字符串,\r\n    updateTree (type) {\r\n      this.$refs.tree.update()\r\n      // 目前 当type 为'delete'时, 组织机构详情的内容会重置为空,而不是重新刷新当前数据\r\n      type === 'delete'\r\n        ? this.$refs.orgDetail.initDetail()\r\n        : this.$refs.orgDetail.refresh()\r\n    },\r\n    updateDetail (data) {\r\n      this.clickedNodeData = data\r\n      // console.log(data,this.clickedNodeData)\r\n    },\r\n    openDialog (componentName, nodeData) {\r\n      console.log(componentName)\r\n      this.clickedNodeData = nodeData\r\n      this.showUpdateDialog = true\r\n    }\r\n  },\r\n  components: { VuePerfectScrollbar, Tree, OrgDetail, OrgUpdate }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.organization {\r\n  width:100%;\r\n  height:100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  .main {\r\n    display: flex;\r\n    height:100%;\r\n    flex-direction: row;\r\n\r\n    .left-tree {\r\n      min-width:230px;\r\n      padding:15px 0;\r\n      background: #fff;\r\n      border-right:2px solid darken($base-light-color, 5%);\r\n      margin-bottom: 50px;\r\n      .scroll-area {\r\n        width:100%;\r\n        height:100%;\r\n      }\r\n    }\r\n\r\n    .org-content {\r\n      flex:1 auto;\r\n    }\r\n  }\r\n\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/BasicInformation/Organization/index.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-558242d0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"D:\\\\\\\\workspace\\\\\\\\wms_web\\\\\\\\source\\\\\\\\admin\\\\\\\\src\\\\\\\\common\\\\\\\\style\\\\\\\\common.scss\\\"]}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-558242d0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-558242d0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/BasicInformation/Organization/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
webpackJsonp([5,24,26,35],{"8fd+":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"organization"},[a("div",{staticClass:"main"},[a("div",{staticClass:"left-tree"},[a("VuePerfectScrollbar",{staticClass:"scroll-area"},[a("tree",{ref:"tree",attrs:{isCreate:e.isCreate,clickedNodeData:e.clickedNodeData},on:{"update:isCreate":function(t){e.isCreate=t},nodeClick:e.handleNodeClick,openDialog:e.openDialog,updateTree:e.updateTree}})],1)],1),e._v(" "),a("div",{staticClass:"org-content"},[a("org-detail",{ref:"orgDetail",attrs:{nodeData:e.clickedNodeData}})],1)]),e._v(" "),a("org-update",{attrs:{show:e.showUpdateDialog,isCreate:e.isCreate,nodeData:e.clickedNodeData},on:{"update:show":function(t){e.showUpdateDialog=t},updateTree:e.updateTree}})],1)},staticRenderFns:[]}},"99EJ":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-contextmenu",{ref:"treeMenu"},[a("v-contextmenu-item",{on:{click:e.createOrg}},[e._v("新建机构")]),e._v(" "),a("v-contextmenu-item",{on:{click:e.editOrg}},[e._v("修改机构")]),e._v(" "),a("v-contextmenu-item",{attrs:{disabled:e.contextmenuSelectedNode&&""===e.contextmenuSelectedNode.pId},on:{click:e.deleteOrg}},[e._v("删除机构")])],1),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.orgTreeData,"node-key":"id",props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1,"render-content":e.customRender},on:{"node-contextmenu":e.showContextMenu,"node-click":e.handleNodeClick}})],1)},staticRenderFns:[]}},EGDi:function(e,t){},Fb61:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),o=a.n(r),n=a("uTPb"),s=a("4+6g"),i=a("KWYu"),l={orgName:"",orgShortName:"",orgType:"",orgParentName:"",orgParentUuid:"",orgSortIndex:"1",orgEnabled:1,orgDesc:""},c={name:"OrgUpdate",data:function(){return{showDetailMode:!0,isVisible:!1,isFormDisabled:!1,organization:[],orgForm:o()({},l),orgFormRules:{orgName:[{required:!0,message:"请填写机构名称",trigger:"blur"},{max:30,message:"最大长度为30字符",trigger:"blur"}],orgShortName:[{required:!0,message:"请填写机构简称",trigger:"blur"},{max:30,message:"最大长度为30字符",trigger:"blur"}],orgType:[{required:!0,message:"请选择机构类型",trigger:"blur"}],orgSortIndex:[{required:!0,message:"请输入顺序号",trigger:"blur"},{validator:n.a.strNumber,trigger:"blur"},{max:3,message:"不能超过3位数字",trigger:"blur"}]}}},props:{show:{type:Boolean,required:!0,default:!1},nodeData:{type:Object,required:!0},isCreate:{type:Boolean,required:!0}},mounted:function(){},watch:{show:function(e){var t=this;e&&(Object(s.d)().then(function(e){t.organization=e.item}),this.isCreate?this.setToCreateState():this.setToEditState()),this.isVisible=e}},methods:{setToCreateState:function(){this.nodeData?(this.orgForm=o()({},l),this.orgForm.orgParentName=this.nodeData.name,this.orgForm.orgParentUuid=this.nodeData.id):(this.$message({message:"未找到父节点,无法在此情况下创建组织结构.",type:"error"}),this.isFormDisabled=!0)},setToEditState:function(){var e=this,t={orgUuid:this.nodeData.id};Object(i.c)(t).then(function(t){e.orgForm=o()({},t)})},save:function(){var e=this;this.$refs.orgForm.validate(function(t){if(t){var a=e.isCreate?i.a:i.e,r=e.isCreate?"新建":"修改";a(e.orgForm).then(function(t){t.error||(e.$message({message:r+"成功!",type:"success"}),e.$emit("updateTree"),e.cancel())})}})},cancel:function(){this.isVisible=!1,this.$emit("update:show",!1),this.orgForm=o()({},l),this.$refs.orgForm.resetFields()}}},d=a("k1Xm"),u=a.n(d);var g=function(e){a("EGDi")},m=a("VU/8")(c,u.a,!1,g,"data-v-24223600",null);t.default=m.exports},HiZM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),o=a.n(r),n=(a("KWYu"),{name:"OrgDetail",data:function(){return{orgNodeData:null}},props:{nodeData:{type:Object,required:!0}},watch:{nodeData:{handler:function(e){this.getDetail()},deep:!0}},methods:{refresh:function(e){this.getDetail()},initDetail:function(){this.orgNodeData=null},getDetail:function(){this.nodeData&&(this.orgNodeData=o()({},this.nodeData))}}}),s=a("iANy"),i=a.n(s);var l=function(e){a("SfLa")},c=a("VU/8")(n,i.a,!1,l,"data-v-71ba747e",null);t.default=c.exports},IrZj:function(e,t){},SfLa:function(e,t){},a6JO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("nvbp"),o=a.n(r),n=a("Dd8w"),s=a.n(n),i=a("NYxO"),l=a("TVaK"),c=a("QPLA"),d=a("KWYu"),u={name:"OrganizationTree",data:function(){return{orgTreeData:[],contextmenuSelectedNode:null,defaultProps:{label:"name"}}},props:{clickedNodeData:{type:Object}},computed:s()({},Object(i.b)(["systemTheme"]),{selectedNode:function(){return this.clickedNodeData},systemColor:function(){return l.a[this.systemTheme]}}),mounted:function(){this.initOrgTree()},methods:{initOrgTree:function(){var e=this;Object(d.d)().then(function(t){e.orgTreeData=Object(c.a)(t)})},handleNodeClick:function(e,t,a){this.$emit("nodeClick",{data:e,node:t,nodeCom:a})},showContextMenu:function(e,t,a,r){if(a){var o=this.$refs.tree,n=this.$refs.treeMenu;this.contextmenuSelectedNode=t,o.setCurrentKey(t.id),n.show({top:e.clientY,left:e.clientX})}},update:function(){this.initOrgTree()},createOrg:function(){this.$emit("update:isCreate",!0),this.$emit("openDialog","OrgUpdate",this.contextmenuSelectedNode)},editOrg:function(){this.$emit("update:isCreate",!1),this.$emit("openDialog","OrgUpdate",this.contextmenuSelectedNode)},deleteOrg:function(){var e=this,t=this.contextmenuSelectedNode,a=t.name,r=t.id;r&&this.$confirm("此操作将删除机构:["+a+"], 确认要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.b)({orgUuid:r}).then(function(t){t.error||(e.$message({type:"success",message:"删除成功!"}),e.initOrgTree(),e.$emit("updateTree","delete"))})}).catch(function(){})},customRender:function(e,t){var a=t.node,r=t.data,n=(t.store,this.$createElement);return n("span",o()([{class:"custom-tree-node"},{directives:[{name:"contextmenu",arg:"treeMenu"}]}]),[n("span",[a.label]),this.$refs.tree.getCurrentNode()&&r.id===this.$refs.tree.getCurrentNode().id&&n("span",{class:"active",style:{backgroundColor:this.systemColor}})])}}},g=a("99EJ"),m=a.n(g);var p=function(e){a("IrZj")},f=a("VU/8")(u,m.a,!1,p,"data-v-6b5d68f6",null);t.default=f.exports},iANy:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"org-content"},[e.orgNodeData?a("div",{staticClass:"main-content"},[a("div",{staticClass:"org-form"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("机构名称")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.orgName))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("机构简称")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.name))])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("机构类型")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.orgType))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("上级机构")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.orgParentName))])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("显示顺序")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.sortIndex))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"label"},[e._v("状态")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(1===e.orgNodeData.orgEnabled?"启用":"禁用"))])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"label"},[e._v("机构描述")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orgNodeData.orgDesc))])])],1)],1)]):a("div",{staticClass:"empty"},[a("h3",[e._v("请在左侧选择一个组织机构")]),e._v(" "),a("h5",[e._v("右击节点可进行操作")])])])},staticRenderFns:[]}},k1Xm:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"670px",title:(e.isCreate?"新建":"编辑")+"组织机构",visible:e.isVisible},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[a("div",{staticClass:"org-form"},[a("el-form",{ref:"orgForm",attrs:{inline:!0,model:e.orgForm,rules:e.orgFormRules,disabled:e.isFormDisabled,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构全称",prop:"orgName"}},[a("el-input",{model:{value:e.orgForm.orgName,callback:function(t){e.$set(e.orgForm,"orgName",t)},expression:"orgForm.orgName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构简称",prop:"orgShortName"}},[a("el-input",{model:{value:e.orgForm.orgShortName,callback:function(t){e.$set(e.orgForm,"orgShortName",t)},expression:"orgForm.orgShortName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机构类型",prop:"orgType"}},[a("el-select",{staticStyle:{width:"178px"},model:{value:e.orgForm.orgType,callback:function(t){e.$set(e.orgForm,"orgType",t)},expression:"orgForm.orgType"}},e._l(e.organization,function(e,t){return a("el-option",{key:t,attrs:{value:e.orgType,label:e.orgTypeName}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上级机构",prop:"orgParentName"}},[a("el-input",{attrs:{readonly:!0},model:{value:e.orgForm.orgParentName,callback:function(t){e.$set(e.orgForm,"orgParentName",t)},expression:"orgForm.orgParentName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"显示顺序",prop:"orgSortIndex"}},[a("el-input",{model:{value:e.orgForm.orgSortIndex,callback:function(t){e.$set(e.orgForm,"orgSortIndex",t)},expression:"orgForm.orgSortIndex"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态",prop:"orgEnabled"}},[a("el-radio-group",{model:{value:e.orgForm.orgEnabled,callback:function(t){e.$set(e.orgForm,"orgEnabled",t)},expression:"orgForm.orgEnabled"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"机构描述",prop:"orgDesc"}},[a("el-input",{staticStyle:{width:"495px"},attrs:{type:"textarea",rows:5,placeholder:"填写机构描述"},model:{value:e.orgForm.orgDesc,callback:function(t){e.$set(e.orgForm,"orgDesc",t)},expression:"orgForm.orgDesc"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-right",attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)])},staticRenderFns:[]}},obja:function(e,t){},wt5c:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("etTB"),o=a.n(r),n=a("a6JO"),s=a("HiZM"),i=a("Fb61"),l={name:"OrganizationManagement",data:function(){return{clickedNodeData:{},showUpdateDialog:!1,isCreate:!0}},methods:{handleNodeClick:function(e){var t=e.data;e.node,e.nodeCom;this.clickedNodeData=t},updateTree:function(e){this.$refs.tree.update(),"delete"===e?this.$refs.orgDetail.initDetail():this.$refs.orgDetail.refresh()},openDialog:function(e,t){this.clickedNodeData=t,this.showUpdateDialog=!0}},components:{VuePerfectScrollbar:o.a,Tree:n.default,OrgDetail:s.default,OrgUpdate:i.default}},c=a("8fd+"),d=a.n(c);var u=function(e){a("obja")},g=a("VU/8")(l,d.a,!1,u,"data-v-71af1568",null);t.default=g.exports}});
//# sourceMappingURL=5.9f9b598e10e6f0590152.js.map
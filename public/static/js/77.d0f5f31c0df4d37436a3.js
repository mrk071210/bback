webpackJsonp([77],{HHPP:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"600px",title:"菜单授权",visible:e.isVisible},on:{close:e.cancel}},[a("div",{staticClass:"tree-content"},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,"node-key":"id",props:e.defaultProps,"show-checkbox":!0,"default-checked-keys":e.checkedNodes,"default-expanded-keys":e.expandNodes},on:{check:e.handleCheckNode}})],1),e._v(" "),a("template",{staticClass:"flex-right",slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],2)},staticRenderFns:[]}},bpT1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("IYkF"),r=a.n(n),s=a("HzJ8"),i=a.n(s),c=a("QPLA"),o=a("baPR"),l={name:"RoleMenuRes",data:function(){return{isVisible:!1,treeData:[],originalTreeData:null,checkedNodes:[],expandNodes:[],defaultProps:{label:"name"}}},props:{show:{type:Boolean,required:!0},roleData:{type:Object,required:!0},searchParams:{type:Object}},watch:{show:function(e){e&&this.initLineTree(),this.isVisible=e}},methods:{initLineTree:function(){var e=this;this.checkedNodes=[],this.originalTreeData=[],this.treeData=[];var t=this.roleData.roleUuid;Object(o.f)({roleParentId:t}).then(function(t){e.originalTreeData=t,e.treeData=Object(c.a)(t);var a=[],n=[];t.forEach(function(t){""===t.pId&&e.expandNodes.push(t.id),!0===t.checked&&a.push(t)});var r=e.getOnlyChildrenNodes(a),s=!0,o=!1,l=void 0;try{for(var d,h=i()(r);!(s=(d=h.next()).done);s=!0){var u=d.value;n.push(u.id)}}catch(e){o=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(o)throw l}}e.$refs.tree.setCheckedKeys(n,!0)}).then(function(){})},getOnlyChildrenNodes:function(e){return e.filter(function(e){return!e.children.length})},handleCheckNode:function(e,t,a){var n=this.$refs.tree.getCheckedKeys(),r=this.$refs.tree.getHalfCheckedKeys(),s=n.concat(r);this.checkedNodes=s},save:function(){var e=this;this.handleCheckNode();var t={roleResourceRoleId:this.roleData.roleUuid,roleResourceResourceId:this.checkedNodes.join(",")};Object(o.i)(t).then(function(t){e.$message({message:"菜单授权成功!",type:"success"}),e.$emit("updateList",e.searchParams),e.cancel()})},cancel:function(){this.$emit("update:show",!1),this.$emit("update:roleData",r()(null)),this.isVisible=!1}}},d=a("HHPP"),h=a.n(d);var u=function(e){a("hGc0")},f=a("C7Lr")(l,h.a,!1,u,"data-v-64c2ef51",null);t.default=f.exports},hGc0:function(e,t){}});
//# sourceMappingURL=77.d0f5f31c0df4d37436a3.js.map
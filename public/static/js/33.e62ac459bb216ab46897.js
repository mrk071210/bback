webpackJsonp([33],{eMzx:function(e,t){},lQZw:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-contextmenu",{ref:"treeMenu"},[n("v-contextmenu-item",{on:{click:e.createOrg}},[e._v("新增菜单")]),e._v(" "),n("v-contextmenu-item",{on:{click:e.editOrg}},[e._v("修改菜单")]),e._v(" "),n("v-contextmenu-item",{on:{click:e.deleteOrg}},[e._v("删除菜单")])],1),e._v(" "),n("el-button",{staticClass:"addRoot",on:{click:e.addRoot}},[e._v("创建根节点")]),e._v(" "),n("el-tree",{ref:"tree",attrs:{data:e.orgTreeData,"node-key":"id",props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1,"render-content":e.customRender},on:{"node-contextmenu":e.showContextMenu,"node-click":e.handleNodeClick}})],1)},staticRenderFns:[]}},syVS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("nvbp"),i=n.n(o),r=n("Dd8w"),c=n.n(r),a=n("NYxO"),s=n("TVaK"),d=n("QPLA"),u=n("mx14"),l={name:"SystemMenuTree",data:function(){return{orgTreeData:[],contextmenuSelectedNode:null,defaultProps:{label:"name"}}},props:{clickedNodeData:{type:Object}},computed:c()({},Object(a.b)(["systemTheme"]),{selectedNode:function(){return this.clickedNodeData},systemColor:function(){return s.a[this.systemTheme]}}),mounted:function(){this.initOrgTree()},methods:{initOrgTree:function(){var e=this;Object(u.v)().then(function(t){e.orgTreeData=Object(d.a)(t)})},handleNodeClick:function(e,t,n){this.$emit("nodeClick",{data:e,node:t,nodeCom:n})},showContextMenu:function(e,t,n,o){if(n){var i=this.$refs.tree,r=this.$refs.treeMenu;this.contextmenuSelectedNode=t,i.setCurrentKey(t.id),r.show({top:e.clientY,left:e.clientX})}},update:function(){this.initOrgTree()},addRoot:function(){this.$emit("update:isCreate",!0),this.$emit("openDialog","MenuUpdate",{addRoot:!0})},createOrg:function(){this.$emit("update:isCreate",!0),this.$emit("openDialog","MenuUpdate",this.contextmenuSelectedNode)},editOrg:function(){this.$emit("update:isCreate",!1),this.$emit("openDialog","MenuUpdate",this.contextmenuSelectedNode)},deleteOrg:function(){var e=this,t=this.contextmenuSelectedNode,n=t.name,o=t.id;o&&this.$confirm("确认要删除:["+n+"]菜单吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.s)({resourceUuid:o}).then(function(t){t.error||(e.$message({type:"success",message:"删除成功!"}),e.initOrgTree(),e.$emit("updateTree","delete"))})}).catch(function(){})},customRender:function(e,t){var n=t.node,o=t.data,r=(t.store,this.$createElement);return r("span",i()([{class:"custom-tree-node"},{directives:[{name:"contextmenu",arg:"treeMenu"}]}]),[r("span",[n.label]),this.$refs.tree.getCurrentNode()&&o.id===this.$refs.tree.getCurrentNode().id&&r("span",{class:"active",style:{backgroundColor:this.systemColor}})])}}},m=n("lQZw"),f=n.n(m);var h=function(e){n("eMzx")},p=n("VU/8")(l,f.a,!1,h,"data-v-36c44f42",null);t.default=p.exports}});
//# sourceMappingURL=33.e62ac459bb216ab46897.js.map
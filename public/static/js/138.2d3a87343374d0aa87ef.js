webpackJsonp([138],{SgIg:function(e,i){e.exports={render:function(){var e=this,i=e.$createElement,l=e._self._c||i;return l("div",[l("el-dialog",{attrs:{width:"640px",title:"编辑线路信息",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(i){e.isVisible=i},close:e.cancel}},[l("el-form",{ref:"lineForm",attrs:{model:e.lineForm,rules:e.formRules,"label-width":"110px"}},[l("el-row",[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"线路名称",prop:"lineName"}},[l("el-input",{attrs:{placeholder:"请输入线路名称"},model:{value:e.lineForm.lineName,callback:function(i){e.$set(e.lineForm,"lineName",i)},expression:"lineForm.lineName"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"所属机构",prop:"lineOrgUuid"}},[l("el-select",{on:{change:function(i){return e.getLineList(e.lineForm.lineOrgUuid)}},model:{value:e.lineForm.lineOrgUuid,callback:function(i){e.$set(e.lineForm,"lineOrgUuid",i)},expression:"lineForm.lineOrgUuid"}},e._l(e.lineOrgs,function(e){return l("el-option",{key:e.orgUuid,attrs:{label:e.orgName,value:e.orgUuid}})}),1)],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"是否可用",prop:"lineIsvalid"}},[l("el-select",{model:{value:e.lineForm.lineIsvalid,callback:function(i){e.$set(e.lineForm,"lineIsvalid",i)},expression:"lineForm.lineIsvalid"}},[l("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"所属线路",prop:"parLineUuid"}},[l("el-select",{model:{value:e.lineForm.parLineUuid,callback:function(i){e.$set(e.lineForm,"parLineUuid",i)},expression:"lineForm.parLineUuid"}},e._l(e.lines,function(e){return l("el-option",{key:e.lineUuid,attrs:{label:e.lineName,value:e.lineUuid}})}),1)],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"首班时间",prop:"lineFirstTime"}},[l("el-select",{attrs:{placeholder:"起始时间"},on:{change:e.firstChange},model:{value:e.lineForm.lineFirstTime,callback:function(i){e.$set(e.lineForm,"lineFirstTime",i)},expression:"lineForm.lineFirstTime"}},e._l(e.firstTimes,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"末班时间",prop:"lineLastTime"}},[l("el-select",{attrs:{placeholder:"结束时间"},on:{change:e.endChange},model:{value:e.lineForm.lineLastTime,callback:function(i){e.$set(e.lineForm,"lineLastTime",i)},expression:"lineForm.lineLastTime"}},e._l(e.endTimes,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1)],1),e._v(" "),e._l(e.lineForm.lineDevices,function(i,n){return l("el-row",{key:n},[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"设备线路编号",prop:"lineDevices."+n+".bldDeviceLineId",rules:[{required:!0,message:"请输入设备线路编号",trigger:"blur"},{type:"number",message:"设备线路编号必须为数字值"}]}},[l("el-input",{attrs:{placeholder:"请输入设备线路编号"},on:{change:function(l){return e.checkbldDeviceLine(i.bldDeviceLineId)}},model:{value:i.bldDeviceLineId,callback:function(l){e.$set(i,"bldDeviceLineId",e._n(l))},expression:"line.bldDeviceLineId"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"线路编号",prop:"lineDevices."+n+".bldOriginalLineId",rules:{required:!0,message:"请输入线路编号",trigger:"blur"}}},[l("el-input",{attrs:{placeholder:"请输入线路编号"},model:{value:i.bldOriginalLineId,callback:function(l){e.$set(i,"bldOriginalLineId",l)},expression:"line.bldOriginalLineId"}})],1)],1)],1)}),e._v(" "),l("el-row",[l("el-col",{attrs:{span:6,offset:18}},[l("el-button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],2)],1)],1)},staticRenderFns:[]}},"Vi+u":function(e,i,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=l("aA9S"),t=l.n(n),s=l("4+6g"),r=l("z7pT"),a={name:"LineUpdate",data:function(){return{firstTimes:[],endTimes:[],lineOrgs:[],lines:[],isVisible:!1,lineForm:{lineName:"",parLineUuid:"",lineIsvalid:"",lineOrgUuid:"",lineFirstTime:"",lineLastTime:"",lineDevices:[{bldDeviceLineId:"",bldOriginalLineId:""}]},formRules:{lineName:[{required:!0,message:"请输入线路名称",trigger:"blur"}],lineOrgUuid:[{required:!0,message:"请选择所属机构",trigger:"change"}],lineIsvalid:[{required:!0,message:"请选择是否可用",trigger:"change"}]}}},props:{showEdit:{type:Boolean,default:!1},roleData:{type:Object}},watch:{showEdit:function(e){this.lineForm=t()({},this.roleData),this.isVisible=e}},mounted:function(){for(var e=this,i=(parseInt("23:15".split(":")[0])-parseInt("5:00".split(":")[0]))*(60/parseInt("15"))+(parseInt("23:15".split(":")[1])/parseInt("15")-parseInt("5:00".split(":")[1])/parseInt("15")),l=0;l<i;l++){var n=parseInt("5:00".split(":")[1]),t=parseInt("5:00".split(":")[0]);n+=parseInt("15")*l%60,t+=parseInt(parseInt("15")*l/60),60===n&&(n=0,t+=1);var r=t<10?"0"+t:t,a=n<10?"0"+n:n;this.firstTimes.push({value:r+":"+a,label:r+":"+a,disabled:!1,index:l}),this.endTimes.push({value:r+":"+a,label:r+":"+a,disabled:!1,index:l})}Object(s.g)().then(function(i){e.lineOrgs=i});Object(s.j)({lineOrgUuid:"",lineIsvalid:"1",lineDropFlag:0}).then(function(i){e.lines=i})},methods:{firstChange:function(e){for(var i=0;i<this.endTimes.length;i++)if(this.endTimes[i].disabled=!1,this.endTimes[i].value===e)for(var l=0;l<=i;l++)this.endTimes[l].disabled=!0,this.endTimes[l].value===this.lineForm.lineLastTime&&(this.lineForm.lineLastTime="")},endChange:function(e){},getLineList:function(e){var i=this;this.lineForm.parLineUuid="",this.lines=[];var l={lineOrgUuid:e,lineIsvalid:"1",lineDropFlag:0};Object(s.j)(l).then(function(e){i.lines=e})},save:function(){var e=this;this.$refs.lineForm.validate(function(i){if(i){var l=t()({},e.lineForm);Object(r.u)(l).then(function(i){i.error||(e.$message({message:"编辑路线成功!",type:"success"}),e.cancel(),e.$emit("updateList"))})}})},cancel:function(){this.$refs.lineForm.resetFields(),this.$emit("update:showEdit",!1),this.isVisible=!1},checkbldDeviceLine:function(e){console.log(e)},addRow:function(){this.lineForm.lineDevices.push({bldDeviceLineId:"",bldOriginalLineId:""})},deletRow:function(e,i){this.lineForm.lineDevices.splice(i,1)}}},o=l("SgIg"),c=l.n(o),d=l("C7Lr")(a,c.a,!1,null,null,null);i.default=d.exports}});
//# sourceMappingURL=138.2d3a87343374d0aa87ef.js.map
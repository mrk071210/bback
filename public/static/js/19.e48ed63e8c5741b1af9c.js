webpackJsonp([19,100,142,143],{"0c+u":function(e,t){},D5ze:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{width:"700px",title:"新增车辆信息",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[s("el-form",{ref:"busForm",attrs:{model:e.busForm,rules:e.formRules,"label-width":"110px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"所属机构",prop:"busOrgUuid"}},[s("el-select",{on:{change:function(t){return e.getLineList(e.busForm.busOrgUuid)}},model:{value:e.busForm.busOrgUuid,callback:function(t){e.$set(e.busForm,"busOrgUuid",t)},expression:"busForm.busOrgUuid"}},e._l(e.lineOrgs,function(e){return s("el-option",{key:e.orgUuid,attrs:{label:e.orgName,value:e.orgUuid}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"车牌号",prop:"busPlateNumber"}},[s("el-input",{attrs:{placeholder:"请输入车牌号"},model:{value:e.busForm.busPlateNumber,callback:function(t){e.$set(e.busForm,"busPlateNumber",t)},expression:"busForm.busPlateNumber"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"所属线路",prop:"busLineUuid"}},[s("el-select",{model:{value:e.busForm.busLineUuid,callback:function(t){e.$set(e.busForm,"busLineUuid",t)},expression:"busForm.busLineUuid"}},e._l(e.lines,function(e){return s("el-option",{key:e.lineUuid,attrs:{label:e.lineName,value:e.lineUuid}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"车辆自编号",prop:"busSelfCode"}},[s("el-input",{attrs:{placeholder:"请输入车辆自编号"},model:{value:e.busForm.busSelfCode,callback:function(t){e.$set(e.busForm,"busSelfCode",t)},expression:"busForm.busSelfCode"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"设备编号",prop:"busDevUuid"}},[s("el-select",{model:{value:e.busForm.busDevUuid,callback:function(t){e.$set(e.busForm,"busDevUuid",t)},expression:"busForm.busDevUuid"}},e._l(e.devices,function(e){return s("el-option",{key:e.devUuid,attrs:{label:e.devCode,value:e.devUuid}})}),1)],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:6,offset:18}},[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),s("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},KLwE:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("nav-button",[s("el-button-group",[s("nav-premisson-button",{attrs:{comp:e.comp,buttonData:e.buttonData}})],1),e._v(" "),s("el-button-group")],1),e._v(" "),s("common-wrapper",[s("bus-management-search",{staticClass:"search",on:{search:e.queryList,rest:e.rest}})],1),e._v(" "),s("common-wrapper",[s("common-table",{attrs:{flex:230}},[s("template",{slot:"table"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isListLoading,expression:"isListLoading"}],ref:"roleTable",attrs:{height:"100%",stripe:"",data:e.tableData},on:{"selection-change":function(t){return e.selectRow=t}}},[s("el-table-column",{attrs:{type:"selection","min-width":"30"}}),e._v(" "),s("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号","min-width":"50"}}),e._v(" "),s("el-table-column",{attrs:{label:"车辆自编号","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.busSelfCode||null))]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"busPlateNumber",label:"车牌号","min-width":"120"}}),e._v(" "),s("el-table-column",{attrs:{prop:"lineName",label:"所属线路","min-width":"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"orgName",label:"所属机构","min-width":"140"}}),e._v(" "),s("el-table-column",{attrs:{prop:"devCode",label:"设备编号","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.devCode||null))]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"启禁状态","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{round:""},on:{click:function(s){return e.validBus(t.$index,t.row)}}},[e._v(e._s("0"===t.row.busIsvalid?"禁用":"启用"))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"busUpdateTime",label:"更新时间",formatter:e.formatCreateDate,"min-width":"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"busUpdateUser",label:"更新人","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.busUpdateUser||null))]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑",placement:"bottom"}},[s("el-button",{attrs:{size:"mini",round:"",icon:"fdddfont icon-modify"},on:{click:function(s){return s.stopPropagation(),e.handleEdit(t.$index,t.row)}}})],1),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"删除",placement:"bottom"}},[s("el-button",{attrs:{size:"mini",round:"",icon:"fdddfont icon-delete"},on:{click:function(s){return s.stopPropagation(),e.handleDel(t.$index,t.row)}}})],1)]}}])})],1)],1),e._v(" "),s("template",{slot:"pagination"},[s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pagination.pageNum,"page-size":e.pagination.pageSize,total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageNum",t)},"current-change":e.changePage}})],1)],2)],1),e._v(" "),s("bus-create",{attrs:{show:e.isCreate},on:{"update:show":function(t){e.isCreate=t},updateList:e.queryList}}),e._v(" "),s("bus-update",{attrs:{show:e.isEdit,roleData:e.editRole},on:{"update:show":function(t){e.isEdit=t},"update:roleData":function(t){e.editRole=t},"update:role-data":function(t){e.editRole=t},updateList:e.queryList}}),e._v(" "),s("upload-file",{attrs:{showUpload:e.showUpload,uploadFileUrl:e.uploadFileUrl,limit:e.limit,size:e.size,acceptType:e.acceptType,pojo:e.pojo,isShowDown:e.isShowDown,isHasToken:e.isHasToken},on:{"update:showUpload":function(t){e.showUpload=t},"update:show-upload":function(t){e.showUpload=t},complete:e.getUploadData}}),e._v(" "),e.uploadData.data?s("upload-file-table",{attrs:{showUploadTable:e.showUploadTable,pojo:e.pojo,uploadData:e.uploadData},on:{"update:showUploadTable":function(t){e.showUploadTable=t},"update:show-upload-table":function(t){e.showUploadTable=t},"update:uploadData":function(t){e.uploadData=t},"update:upload-data":function(t){e.uploadData=t},updateList:e.queryList}}):e._e()],1)},staticRenderFns:[]}},Khqx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("aA9S"),a=s.n(i),n=s("4+6g"),o=s("z7pT"),u=s("uTPb"),l={name:"BusCreate",data:function(){return{lineOrgs:[],lines:[],devices:[],devUuid:"",isVisible:!1,busForm:{busOrgUuid:"",busLineUuid:"",busPlateNumber:"",busSelfCode:"",busDevUuid:""},formRules:{busOrgUuid:[{required:!0,message:"请选择所属机构",trigger:"change"}],busLineUuid:[{required:!0,message:"请选择线路",trigger:"change"}],busPlateNumber:[{required:!0,message:"请输入车牌号",trigger:"blur"},{validator:u.a.isVehicleNumber,message:"车牌号格式有误",trigger:"blur"}],busDevUuid:[{required:!0,message:"请输入设备编号",trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1}},watch:{show:function(e){var t=this;Object(n.d)({devUuid:""}).then(function(e){t.devices=e}),this.busForm.busLineUuid="",this.lines=[],this.isVisible=e}},mounted:function(){var e=this;Object(n.g)().then(function(t){e.lineOrgs=t}),Object(n.d)({devUuid:""}).then(function(t){e.devices=t})},methods:{save:function(){var e=this;this.$refs.busForm.validate(function(t){if(t){var s=a()({},e.busForm);Object(o.b)(s).then(function(t){e.$message({message:"新增路线成功!",type:"success"}),e.cancel(),e.$emit("updateList")})}})},cancel:function(){this.busForm.busLineUuid="",this.lines=[],this.$refs.busForm.resetFields(),this.$emit("update:show",!1),this.isVisible=!1},getLineList:function(e){var t=this;this.busForm.busLineUuid="",this.lines=[];var s={lineOrgUuid:e,lineIsvalid:"1",lineDropFlag:0};Object(n.j)(s).then(function(e){t.lines=e})}}},r=s("D5ze"),c=s.n(r),d=s("C7Lr")(l,c.a,!1,null,null,null);t.default=d.exports},TfQn:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"80px"}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"机构",prop:"busOrgUuid"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getLineList(e.searchForm.busOrgUuid)}},model:{value:e.searchForm.busOrgUuid,callback:function(t){e.$set(e.searchForm,"busOrgUuid",t)},expression:"searchForm.busOrgUuid"}},e._l(e.lineOrgs,function(e){return s("el-option",{key:e.orgUuid,attrs:{label:e.orgName,value:e.orgUuid}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"线路",prop:"busLineUuid"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getBusesList(e.searchForm.busLineUuid)}},model:{value:e.searchForm.busLineUuid,callback:function(t){e.$set(e.searchForm,"busLineUuid",t)},expression:"searchForm.busLineUuid"}},e._l(e.lines,function(e){return s("el-option",{key:e.lineUuid,attrs:{label:e.lineName,value:e.lineUuid}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"车牌号",prop:"busUuid"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.busUuid,callback:function(t){e.$set(e.searchForm,"busUuid",t)},expression:"searchForm.busUuid"}},e._l(e.buses,function(e){return s("el-option",{key:e.busUuid,attrs:{label:e.busPlateNumber,value:e.busUuid}})}),1)],1)],1),e._v(" "),s("el-col",{staticClass:"flex-right",attrs:{span:6}},[s("el-form-item",[s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[e._v("查询")]),e._v(" "),s("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]}},apwP:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("aA9S"),a=s.n(i),n=s("4+6g"),o={name:"LineManagementSearch",data:function(){return{lineOrgs:[],lines:[],buses:[],searchForm:{busOrgUuid:"",busLineUuid:"",busUuid:""}}},mounted:function(){var e=this;Object(n.g)().then(function(t){e.lineOrgs=t}),this.search()},methods:{search:function(){this.$emit("search",a()({},this.searchForm))},resetForm:function(e){this.$refs[e].resetFields(),this.$emit("rest",a()({},this.searchForm)),this.lines=[],this.buses=[]},getLineList:function(e){var t=this;this.searchForm.busLineUuid="",this.searchForm.busUuid="",this.lines=[],this.buses=[];var s={lineOrgUuid:e,lineIsvalid:"1",lineDropFlag:0};Object(n.j)(s).then(function(e){t.lines=e})},getBusesList:function(e){var t=this;this.searchForm.busUuid="",this.buses=[];var s={busLineUuid:e,busDropFlag:0};Object(n.b)(s).then(function(e){t.buses=e})}}},u=s("TfQn"),l=s.n(u);var r=function(e){s("0c+u")},c=s("C7Lr")(o,l.a,!1,r,"data-v-348a58dc",null);t.default=c.exports},jRz4:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{width:"700px",title:"编辑车辆信息",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[s("el-form",{ref:"busForm",attrs:{model:e.busForm,rules:e.formRules,"label-width":"110px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"所属机构",prop:"busOrgUuid"}},[s("el-select",{on:{change:function(t){return e.getLineList(e.busForm.busOrgUuid)}},model:{value:e.busForm.busOrgUuid,callback:function(t){e.$set(e.busForm,"busOrgUuid",t)},expression:"busForm.busOrgUuid"}},e._l(e.lineOrgs,function(e){return s("el-option",{key:e.orgUuid,attrs:{label:e.orgName,value:e.orgUuid}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"车牌号",prop:"busPlateNumber"}},[s("el-input",{attrs:{placeholder:"请输入车牌号"},model:{value:e.busForm.busPlateNumber,callback:function(t){e.$set(e.busForm,"busPlateNumber",t)},expression:"busForm.busPlateNumber"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"所属线路",prop:"busLineUuid"}},[s("el-select",{model:{value:e.busForm.busLineUuid,callback:function(t){e.$set(e.busForm,"busLineUuid",t)},expression:"busForm.busLineUuid"}},e._l(e.lines,function(e){return s("el-option",{key:e.lineUuid,attrs:{label:e.lineName,value:e.lineUuid}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"车辆自编号",prop:"busSelfCode"}},[s("el-input",{attrs:{placeholder:"请输入车辆自编号"},model:{value:e.busForm.busSelfCode,callback:function(t){e.$set(e.busForm,"busSelfCode",t)},expression:"busForm.busSelfCode"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"设备编号",prop:"busDevUuid"}},[s("el-select",{model:{value:e.busForm.busDevUuid,callback:function(t){e.$set(e.busForm,"busDevUuid",t)},expression:"busForm.busDevUuid"}},e._l(e.devices,function(e){return s("el-option",{key:e.devUuid,attrs:{label:e.devCode,value:e.devUuid}})}),1)],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:6,offset:18}},[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),s("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},pl1f:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("aA9S"),a=s.n(i),n=s("4+6g"),o=s("z7pT"),u=s("uTPb"),l={name:"BusUpdate",data:function(){return{lineOrgs:[],lines:[],devices:[],devUuid:"",isVisible:!1,busForm:{busOrgUuid:"",busLineUuid:"",busPlateNumber:"",busSelfCode:"",busDevUuid:""},formRules:{busOrgUuid:[{required:!0,message:"请选择所属机构",trigger:"change"}],busLineUuid:[{required:!0,message:"请选择线路",trigger:"change"}],busPlateNumber:[{required:!0,message:"请输入车牌号",trigger:"blur"},{validator:u.a.isVehicleNumber,message:"车牌号格式有误",trigger:"blur"}],busDevUuid:[{required:!0,message:"请输入设备编号",trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1},roleData:{type:Object}},watch:{show:function(e){var t=this;this.busForm=a()({},this.roleData),this.isVisible=e;var s={lineOrgUuid:this.busForm.busOrgUuid,lineIsvalid:"1",lineDropFlag:0};Object(n.j)(s).then(function(e){t.lines=e}),Object(n.d)({devUuid:this.busForm.busDevUuid}).then(function(e){t.devices=e})}},mounted:function(){var e=this;Object(n.g)().then(function(t){e.lineOrgs=t})},methods:{save:function(){var e=this;this.$refs.busForm.validate(function(t){if(t){var s=a()({},e.busForm);Object(o.r)(s).then(function(t){e.$message({message:"编辑路线成功!",type:"success"}),e.cancel(),e.$emit("updateList")})}})},cancel:function(){this.$refs.busForm.resetFields(),this.$emit("update:show",!1),this.isVisible=!1},getLineList:function(e){var t=this;this.busForm.busLineUuid="",this.lines=[];var s={lineOrgUuid:e,lineIsvalid:"1",lineDropFlag:0};Object(n.j)(s).then(function(e){t.lines=e})}}},r=s("jRz4"),c=s.n(r),d=s("C7Lr")(l,c.a,!1,null,null,null);t.default=d.exports},qw6O:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("rVsN"),a=s.n(i),n=s("4YfN"),o=s.n(n),u=s("ryJa"),l=s.n(u),r=s("dF+P"),c=s("Jky9"),d=s("Jns3"),b=s("0+j4"),p=s("aIe1"),m=s("apwP"),f=s("pl1f"),h=s("Khqx"),g=s("aQ5O"),v=s("8ZKe"),U=s("X2t0"),F=s("z7pT"),w={name:"BusManagement",mixins:[r.a],data:function(){return{comp:this,buttonData:[],tableData:[],selectRow:[],editRole:{},isEdit:!1,isListLoading:!1,isCreate:!1,showUpload:!1,uploadFileUrl:"/excel/uploadFile",limit:1,size:.5,acceptType:".xls",pojo:"TBus",isShowDown:!0,isHasToken:!0,showUploadTable:!1,uploadData:{},pagination:{pageNum:1,pageSize:10,total:0},searchParams:{}}},activated:function(){this.$refs.roleTable.doLayout()},mounted:function(){},methods:{queryList:function(e){var t=this.searchParams=e;this.getRoles(o()({},t,{pageNum:this.pagination.pageNum,pageSize:this.pagination.pageSize}))},getRoles:function(e){var t=this;this.isListLoading=!0,Object(F.a)(e).then(function(e){t.tableData=e.list,t.pagination.total=e.total,t.pagination.pageNum=e.pageNum,t.pagination.pageSize=e.pageSize,t.isListLoading=!1})},rest:function(e){var t=this.searchParams=e;this.getRoles(o()({},t,{pageNum:1,pageSize:this.pagination.pageSize}))},changePage:function(e){this.pagination.pageNum=e,this.queryList(this.searchParams)},indexMethod:function(e){return e+1+(this.pagination.pageNum-1)*this.pagination.pageSize},formatCreateDate:function(e){if(e.busUpdateTime)return l()(e.busUpdateTime).utcOffset(8).format("YYYY-MM-DD")},isButtonDisabled:function(){return!!this.selectRow.length},handleAdd:function(){this.isCreate=!0},handleEdit:function(e,t){this.editRole=t,this.isEdit=!0},deleteBuses:function(e){var t=this;return Object(F.f)(e).then(function(e){e.error||(t.$message({message:"删除成功",type:"success"}),t.queryList())})},batchRemove:function(){var e=this;this.$confirm("确认删除选中的车辆吗？","提示",{type:"warning"}).then(function(){var t=[];e.selectRow.map(function(e){return t.push(e.busUuid)}),e.isListLoading=!0,e.deleteBuses(t).then(function(){e.isListLoading=!1}).catch(function(){})})},handleDel:function(e,t){var s=this;this.$confirm("确认删除该车辆吗?","提示",{type:"warning"}).then(function(){s.deleteBuses([t.busUuid])}).catch(function(){})},validBus:function(e,t){var s=this,i="0"===t.busIsvalid?"启用":"禁用";this.$confirm("确认状态修改为"+i+"?","提示",{type:"warning"}).then(function(){var e={busUuid:t.busUuid,busIsvalid:t.busIsvalid};Object(F.l)(e).then(function(e){console.log(e),s.queryList()})}).catch(function(){})},exportsFile:function(){this.showUpload=!0},getUploadData:function(e){var t=this;setTimeout(function(){t.showUploadTable=!0},500),new a.a(function(t,s){t(e)}).then(function(e){t.uploadData=e})},exportsLog:function(){this.$nextPage({title:"导入日志详情",props:{modelName:"车辆信息批量导入"},component:U.default,cache:!0})}},components:{NavButton:c.a,NavPremissonButton:d.a,CommonWrapper:b.a,CommonTable:p.a,BusManagementSearch:m.default,BusUpdate:f.default,BusCreate:h.default,UploadFile:g.default,UploadFileTable:v.default}},_=s("KLwE"),L=s.n(_),O=s("C7Lr")(w,L.a,!1,null,null,null);t.default=O.exports}});
//# sourceMappingURL=19.e48ed63e8c5741b1af9c.js.map
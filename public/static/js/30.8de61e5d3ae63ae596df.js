webpackJsonp([30,72],{"8s6G":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("rVsN"),s=a.n(r),n=a("0+j4"),o=a("aIe1"),i=a("Jky9"),l=a("fBur"),c=a("ary2"),u=a("4+6g"),h=a("f2j0"),d={name:"Regular",data:function(){return{warehouseList:this.$store.getters.warehouseList,merchantsList:[],brandList:[],modelList:[],modelBrand:[],tableData:[],isListLoading:!1,pagination:{pageNum:1,pageSize:10,total:0},searchParams:{}}},mounted:function(){this.getMerchantsList(),this.getBrandModel({warehouseUuid:Object(l.b)("warehouseUuid")})},methods:{getMerchantsList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{warehouseUuid:Object(l.b)("warehouseUuid")};return new s.a(function(a){Object(u.f)(t).then(function(t){t.error||(e.merchantsList=t,a())})})},getBrandModel:function(e){var t=this;Object(u.h)(e).then(function(e){e.error||(t.brandList=[],t.modelList=[],e.forEach(function(e,a){t.brandList.push(e.productBrand),e.productModel.forEach(function(e){t.modelList.push(e)})}),t.modelBrand=e)})},queryList:function(e){var t=this.searchParams=e;this.getTable(t)},rest:function(e){var t=this.searchParams=e;this.getTable(t)},changePage:function(e){this.pagination.pageNum=e},indexMethod:function(e){return e+1+(this.pagination.pageNum-1)*this.pagination.pageSize},getTable:function(e){var t=this;this.isListLoading=!0,Object(h.d)(e).then(function(e){e.error||(t.tableData=e,t.pagination.total=e.length,t.isListLoading=!1)})},exportDetail:function(){var e=this.searchParams;Object(h.i)(e).then(function(e){var t=e.data,a=new Blob([t],{type:"application/ms-excel"}),r="上架数据统计"+moment(new Date).format("YYYYMMDD")+".xls";if("download"in document.createElement("a")){var s=document.createElement("a");s.download=r,s.style.display="none",s.href=URL.createObjectURL(a),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}else navigator.msSaveBlob(a,r)})}},components:{Search:c.default,CommonWrapper:n.a,CommonTable:o.a,NavButton:i.a}},m=a("AZOt"),p=a.n(m);var b=function(e){a("QJiK")},g=a("C7Lr")(d,p.a,!1,b,"data-v-556083f4",null);t.default=g.exports},AZOt:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("common-wrapper",[a("search",{attrs:{warehouseList:e.warehouseList,merchantsList:e.merchantsList,modelBrand:e.modelBrand,brandList:e.brandList,allModelList:e.modelList},on:{getMerchants:e.getMerchantsList,getBrandModel:e.getBrandModel,search:e.queryList,rest:e.rest}})],1),e._v(" "),a("nav-button",[a("el-button-group",[a("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.exportDetail}},[e._v("导出明细")])],1)],1),e._v(" "),a("common-wrapper",[a("common-table",{attrs:{flex:230}},[a("template",{slot:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isListLoading,expression:"isListLoading"}],ref:"dataTable",attrs:{height:"100%",stripe:"",data:e.tableData.slice((e.pagination.pageNum-1)*e.pagination.pageSize,e.pagination.pageNum*e.pagination.pageSize)}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"warehouseName",label:"项目"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"userRealName",label:"商户"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"upShelveDate",label:"日期","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"upShelveTasks",label:"总上架任务"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"finishedOntime",label:"已按时完成"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"overdue",label:"未按时完成"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"seriouslyOverdue",label:"严重超期未完成"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"finished",label:"当前已完成"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"finishedRate",label:"当前已完成率"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"finishedOntimeRate",label:"上架完成及时率"}})],1)],1),e._v(" "),a("template",{slot:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pagination.pageNum,"page-size":e.pagination.pageSize,total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageNum",t)},"current-change":e.changePage}})],1)],2)],1)],1)},staticRenderFns:[]}},EefI:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"searchForm",staticClass:"dataSearchForm",attrs:{model:e.searchForm,"label-width":"50px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"仓库",prop:"warehouseUuid"}},[a("el-select",{staticClass:"w100p",attrs:{filterable:"",placeholder:"请选择仓库"},on:{change:e.getMerchantsList},model:{value:e.searchForm.warehouseUuid,callback:function(t){e.$set(e.searchForm,"warehouseUuid",t)},expression:"searchForm.warehouseUuid"}},e._l(e.warehouseList,function(e,t){return a("el-option",{key:t,attrs:{label:e.warehouseName,value:e.warehouseUuid}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"商户",prop:"userUuid"}},[a("el-select",{staticClass:"w100p",attrs:{filterable:"",clearable:"",placeholder:"请选择商户"},on:{change:e.getBrandList},model:{value:e.searchForm.userUuid,callback:function(t){e.$set(e.searchForm,"userUuid",t)},expression:"searchForm.userUuid"}},e._l(e.merchantsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.userName,value:e.userUuid}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"品牌",prop:"brandId"}},[a("el-select",{staticClass:"w100p",attrs:{clearable:"",filterable:"",clearable:"",placeholder:"请选择品牌"},model:{value:e.searchForm.brandId,callback:function(t){e.$set(e.searchForm,"brandId",t)},expression:"searchForm.brandId"}},e._l(e.brandList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"考核标准日期",prop:"checkHour","label-width":"120px"}},[a("el-input",{attrs:{clearable:""},model:{value:e.searchForm.checkHour,callback:function(t){e.$set(e.searchForm,"checkHour",t)},expression:"searchForm.checkHour"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"开始日期","label-width":"80px",prop:"beginDate"}},[a("el-date-picker",{staticClass:"w100p",attrs:{type:"date",align:"right",clearable:"","unlink-panels":"","range-separator":"至",placeholder:"请选择开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"mini"},model:{value:e.searchForm.beginDate,callback:function(t){e.$set(e.searchForm,"beginDate",t)},expression:"searchForm.beginDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"结束日期","label-width":"80px",prop:"endDate"}},[a("el-date-picker",{staticClass:"w100p",attrs:{type:"date",align:"right",clearable:"","unlink-panels":"","range-separator":"至",placeholder:"请选择结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"mini"},model:{value:e.searchForm.endDate,callback:function(t){e.$set(e.searchForm,"endDate",t)},expression:"searchForm.endDate"}})],1)],1),e._v(" "),a("el-col",{staticClass:"text-right",attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]}},QJiK:function(e,t){},ary2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("aA9S"),s=a.n(r),n=a("fBur"),o=a("ryJa"),i=a.n(o),l={name:"Search",data:function(){return{searchForm:{warehouseUuid:"",userUuid:"",brandId:"",checkHour:"24",dateRange:[],beginDate:"",endDate:""}}},props:{warehouseList:{type:Array},merchantsList:{type:Array},brandList:{type:Array},allModelList:{type:Array},modelBrand:{type:Array}},mounted:function(){this.searchForm.warehouseUuid=Object(n.b)("warehouseUuid"),this.searchForm.dateRange=[i()().subtract(1,"days").utcOffset(8).format("YYYY-MM-DD"),i()().utcOffset(8).format("YYYY-MM-DD")],this.$emit("search",s()({},this.searchForm))},methods:{getMerchantsList:function(e){Object(n.e)("warehouseUuid",e),this.searchForm.brandId="",this.searchForm.userUuid="",this.$emit("getMerchants",s()({},this.searchForm)),this.$emit("getBrandModel",{warehouseUuid:this.searchForm.warehouseUuid})},getBrandList:function(){this.searchForm.brandId="",this.$emit("getBrandModel",{warehouseUuid:this.searchForm.warehouseUuid,merchantUuid:this.searchForm.userUuid})},search:function(){if(this.searchForm.endDate&&this.searchForm.beginDate&&(i()(this.searchForm.endDate).isBefore(this.searchForm.beginDate)||i()(this.searchForm.endDate).isSame(this.searchForm.beginDate)))return this.$message({message:"结束日期不能早于开始日期，请重新选择！",type:"warning"}),void(this.searchForm.endDate=null);this.$emit("search",s()({},this.searchForm))},resetForm:function(e){this.$refs[e].resetFields(),this.searchForm.warehouseUuid=Object(n.b)("warehouseUuid"),this.$emit("rest",s()({},this.searchForm))}}},c=a("EefI"),u=a.n(c);var h=function(e){a("g45Z")},d=a("C7Lr")(l,u.a,!1,h,null,null);t.default=d.exports},g45Z:function(e,t){}});
//# sourceMappingURL=30.8de61e5d3ae63ae596df.js.map
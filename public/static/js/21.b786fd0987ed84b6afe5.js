webpackJsonp([21,51,65],{"7IJ8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("3cXf"),o=a.n(r),n=a("rVsN"),i=a.n(n),s=a("4YfN"),l=a.n(s),c=a("ryJa"),u=a.n(c),d=a("dF+P"),m=a("Jky9"),p=a("Jns3"),h=a("0+j4"),f=a("aIe1"),b=a("X5Gr"),g=a("FpoJ"),v=a("4+6g"),y=a("I8tE"),w=a("fBur"),L={name:"transactionDetail",mixins:[d.a],components:{NavButton:m.a,NavPremissonButton:p.a,CommonWrapper:h.a,CommonTable:f.a,MainManagementSearch:b.default,MainDetail:g.default},data:function(){return{comp:this,buttonData:[],tableData:[],selectRow:[],choosedIds:[],isListLoading:!1,isDetailVisible:!1,warehouseList:this.$store.getters.warehouseList,merchantsList:[],brandList:[],modelList:[],modelBrand:[],isCreateFormVisible:!1,isEditFormVisible:!1,isRoleAuthVisible:!1,modifyUser:null,pagination:{pageNum:1,pageSize:10,total:0},searchParams:{},queryInfo:null}},activated:function(){this.$refs.userTable.doLayout()},mounted:function(){this.getMerchantsList(),this.getBrandModel({warehouseUuid:Object(w.b)("warehouseUuid")})},methods:{queryList:function(e){var t=this.searchParams=e;this.getUsers(l()({},t,{pageNum:this.pagination.pageNum,pageSize:this.pagination.pageSize}))},getBrandModel:function(e){var t=this;Object(v.h)(e).then(function(e){e.error||(t.brandList=[],t.modelList=[],e.forEach(function(e,a){t.brandList.push(e.productBrand),e.productModel.forEach(function(e){t.modelList.push(e)})}),t.modelBrand=e)})},getMerchantsList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{warehouseUuid:Object(w.b)("warehouseUuid")?Object(w.b)("warehouseUuid"):this.warehouseList[0].warehouseUuid,userUuid:""};return new i.a(function(a){Object(v.f)(t).then(function(t){t.error||(e.merchantsList=t,a())})})},getUsers:function(e){var t=this;this.isListLoading=!0,Object(y.E)(e).then(function(a){if(!a.error){if(0==a.item.length&&a.pageNum>1)return t.pagination.pageNum=1,e.pageNum=1,void t.getUsers(e);t.tableData=a.item,t.pagination.total=a.total,t.pagination.pageNum=a.pageNum,t.pagination.pageSize=a.pageSize,t.isListLoading=!1}})},rest:function(e){var t=this.searchParams=e;this.getUsers(l()({},t,{pageNum:1,pageSize:this.pagination.pageSize}))},handleSelectionChange:function(e){this.selectRow=e;var t=[];this.choosedIds=this.selectRow.map(function(e){return t.push(e.id)}).join(",")},isButtonIsDisabled:function(){return!!this.selectRow.length},handleExport:function(){var e=this.searchParams;Object(y.D)(e).then(function(e){var t=e.data,a=new Blob([t],{type:"application/ms-excel"}),r="交易明细"+u()(new Date).format("YYYYMMDD")+".xls";if("download"in document.createElement("a")){var o=document.createElement("a");o.download=r,o.style.display="none",o.href=URL.createObjectURL(a),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(a,r)})},isButtonDisabled:function(){return!!this.selectRow.length},getUserDetail:function(e,t){console.log("click",e,"index",t),"0"==e.maintype&&(this.queryInfo=JSON.parse(o()(e)),this.isDetailVisible=!0)},changePage:function(e){this.pagination.pageNum=e,this.queryList(this.searchParams)},indexMethod:function(e){return e+1+(this.pagination.pageNum-1)*this.pagination.pageSize},formatStatus:function(e,t){return"1"===e.userEnable?"启用":"0"===e.userEnable?"禁用":"未知"},formatType:function(e){if(e.maintype)return"0"==e.maintype?"小件":"1"==e.maintype?"套件":"2"==e.maintype?"单品":"未知"},formatEntry:function(e){return e.entryTime?u()(e.entryTime).utcOffset(8).format("YYYY-MM-DD HH:mm:ss"):""},formatLaunch:function(e){return e.launchTime?u()(e.launchTime).utcOffset(8).format("YYYY-MM-DD HH:mm:ss"):""},formatExport:function(e){return e.exportTime?u()(e.exportTime).utcOffset(8).format("YYYY-MM-DD HH:mm:ss"):""}}},_=a("L3Q9"),F=a.n(_),M=a("C7Lr")(L,F.a,!1,null,null,null);t.default=M.exports},FpoJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("wppO"),o=a.n(r),n=a("Jky9"),i=a("0+j4"),s=a("aIe1"),l=(a("fBur"),a("I8tE")),c={name:"CustomerQuery",components:{VuePerfectScrollbar:o.a,NavButton:n.a,CommonWrapper:i.a,CommonTable:s.a},props:{queryInfo:{type:Object},show:{type:Boolean,default:!1}},data:function(){return{isVisible:!1,tableData:[],isListLoading:!1}},watch:{show:function(e){this.isVisible=e,e&&this.getDetail()}},mounted:function(){},methods:{getDetail:function(){var e=this;this.isListLoading=!0,Object(l.i)({id:this.queryInfo.id}).then(function(t){t.error||(e.tableData=t,e.isListLoading=!1)})},formatDate:function(e,t){if(e[t.property])return moment(e[t.property]).format("YYYY-MM-DD")},cancel:function(){this.$emit("update:show",!1),this.$emit("update:queryInfo",null),this.$emit("updateList"),this.isVisible=!1}}},u=a("so2h"),d=a.n(u);var m=function(e){a("OJED")},p=a("C7Lr")(c,d.a,!1,m,"data-v-860df842",null);t.default=p.exports},G6up:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,inline:"","label-width":"80px"}},[a("el-form-item",{attrs:{label:"仓库",prop:"warehouseUuid"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择仓库"},on:{change:e.getMerchantsList},model:{value:e.searchForm.warehouseUuid,callback:function(t){e.$set(e.searchForm,"warehouseUuid",t)},expression:"searchForm.warehouseUuid"}},e._l(e.warehouseList,function(t,r){return a("el-option",{key:r,attrs:{label:t.warehouseName,value:t.warehouseUuid}},[e._v(e._s(t.warehouseName))])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商户",prop:"merchantUuid"}},[a("el-select",{attrs:{placeholder:"请选择商户",filterable:"",clearable:""},on:{change:e.getBrand},model:{value:e.searchForm.merchantUuid,callback:function(t){e.$set(e.searchForm,"merchantUuid",t)},expression:"searchForm.merchantUuid"}},e._l(e.merchantsList,function(t,r){return a("el-option",{key:r,attrs:{label:t.userName,value:t.userUuid}},[e._v(e._s(t.userName))])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌",prop:"productBrand"}},[a("el-select",{attrs:{placeholder:"请选择品牌",filterable:"",clearable:""},on:{change:e.brandChange},model:{value:e.searchForm.productBrand,callback:function(t){e.$set(e.searchForm,"productBrand",t)},expression:"searchForm.productBrand"}},e._l(e.brandList,function(t,r){return a("el-option",{key:r,attrs:{label:t,value:t}},[e._v(e._s(t))])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"型号",prop:"productModelName"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择型号"},model:{value:e.searchForm.productModelName,callback:function(t){e.$set(e.searchForm,"productModelName",t)},expression:"searchForm.productModelName"}},e._l(e.modelList,function(t,r){return a("el-option",{key:r,staticClass:"radio",attrs:{value:t,label:t}},[e._v(e._s(t))])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"货品名称",prop:"productTempleteName","label-width":"80px"}},[a("el-input",{attrs:{maxlength:"200",clearable:"",placeholder:"请输入货品名称"},model:{value:e.searchForm.productTempleteName,callback:function(t){e.$set(e.searchForm,"productTempleteName",t)},expression:"searchForm.productTempleteName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"颜色",prop:"color","label-width":"80px"}},[a("el-input",{attrs:{maxlength:"200",clearable:"",placeholder:"请输入货品颜色"},model:{value:e.searchForm.color,callback:function(t){e.$set(e.searchForm,"color",t)},expression:"searchForm.color"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格",prop:"standard","label-width":"80px"}},[a("el-input",{attrs:{maxlength:"200",clearable:"",placeholder:"请输入货品规格"},model:{value:e.searchForm.standard,callback:function(t){e.$set(e.searchForm,"standard",t)},expression:"searchForm.standard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入库时间",prop:"beginDate"}},[a("el-date-picker",{staticStyle:{width:"173px"},attrs:{type:"date",align:"right","unlink-panels":"","range-separator":"至",placeholder:"请选择入库时间",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",size:"mini",clearable:""},model:{value:e.searchForm.beginDate,callback:function(t){e.$set(e.searchForm,"beginDate",t)},expression:"searchForm.beginDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出库时间",prop:"endDate"}},[a("el-date-picker",{staticStyle:{width:"173px"},attrs:{type:"date",align:"right","unlink-panels":"","range-separator":"至",placeholder:"请选择出库时间",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",size:"mini",clearable:""},model:{value:e.searchForm.endDate,callback:function(t){e.$set(e.searchForm,"endDate",t)},expression:"searchForm.endDate"}})],1),e._v(" "),a("span",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]}},L3Q9:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("common-wrapper",[a("main-management-search",{staticClass:"search",attrs:{warehouseList:e.warehouseList,merchantsList:e.merchantsList,modelBrand:e.modelBrand,brandList:e.brandList,allModelList:e.modelList},on:{getMerchants:e.getMerchantsList,getBrandModel:e.getBrandModel,search:e.queryList,rest:e.rest}})],1),e._v(" "),a("nav-button",[a("el-button-group",[a("el-button",{attrs:{icon:"fdddfont icon-shujudaoru"},on:{click:e.handleExport}},[e._v("导出交易明细")])],1)],1),e._v(" "),a("common-wrapper",[a("common-table",{attrs:{flex:290}},[a("template",{slot:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isListLoading,expression:"isListLoading"}],ref:"userTable",attrs:{height:"100%",stripe:"",border:!0,"tooltip-effect":"light",data:e.tableData},on:{"row-dblclick":e.getUserDetail,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"merchants",label:"商户","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"band",label:"品牌","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"productTempleteName",label:"货品名称","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"子件名","min-width":"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"model",label:"型号","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"color",label:"颜色",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"standard",label:"规格","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maintype",label:"货品类型"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.maintype?a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"查看小件出库明细",placement:"bottom"}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.getUserDetail(t.row)}}},[e._v(e._s(e.formatType(t.row)))])],1):a("span",[e._v(e._s(e.formatType(t.row)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"entryTime",label:"入库时间",sortable:"","min-width":"150",formatter:e.formatEntry}}),e._v(" "),a("el-table-column",{attrs:{prop:"launchTime",label:"上架时间",sortable:"","min-width":"150",formatter:e.formatLaunch}}),e._v(" "),a("el-table-column",{attrs:{prop:"exportTime",label:"出库时间",sortable:"","min-width":"150",formatter:e.formatExport}}),e._v(" "),a("el-table-column",{attrs:{prop:"exportNumber",label:"出库单号",sortable:"","min-width":"180","show-tooltip-when-overflow":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"60",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.maintype?a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"查看小件出库明细",placement:"bottom"}},[a("el-button",{attrs:{size:"mini",round:"",icon:"el-icon-view"},on:{click:function(a){return a.stopPropagation(),e.getUserDetail(t.row,t.$index)}}})],1):e._e()]}}])})],1)],1),e._v(" "),a("template",{slot:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pagination.pageNum,"page-size":e.pagination.pageSize,total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageNum",t)},"current-change":e.changePage}})],1)],2)],1),e._v(" "),a("main-detail",{attrs:{show:e.isDetailVisible,searchParams:e.searchParams,queryInfo:e.queryInfo},on:{"update:show":function(t){e.isDetailVisible=t},"update:queryInfo":function(t){e.queryInfo=t},"update:query-info":function(t){e.queryInfo=t}}})],1)},staticRenderFns:[]}},OJED:function(e,t){},X5Gr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("aA9S"),o=a.n(r),n=a("fBur"),i=(a("ryJa"),{name:"MainManagementSearch",data:function(){return{searchForm:{inventoryUuid:"",warehouseUuid:"",productTempleteUuid:"",standard:"",color:"",productModelName:"",productTempleteName:"",productType:"",brandUuid:"",storageUuid:"",createUserUuid:"",createTimeBegin:"",createTimeEnd:"",merchantUuid:"",beginDate:"",endDate:"",timeRange:[]},modelList:[]}},mounted:function(){this.searchForm.warehouseUuid=Object(n.b)("warehouseUuid"),this.search()},props:{warehouseList:{type:Array,required:!0},merchantsList:{type:Array,required:!0},brandList:{type:Array},allModelList:{type:Array},modelBrand:{type:Array}},watch:{allModelList:function(e){this.modelList=o()({},e)}},methods:{getMerchantsList:function(e){Object(n.e)("warehouseUuid",e),this.searchForm.productBrand="",this.searchForm.merchantUuid="",this.searchForm.productModelName="",this.$emit("getBrandModel",o()({},this.searchForm)),this.$emit("getMerchants",o()({},this.searchForm))},getBrand:function(){this.searchForm.productBrand="",this.searchForm.productModelName="",this.$emit("getBrandModel",o()({},this.searchForm))},brandChange:function(e){if(this.searchForm.productModelName="",""===e)this.modelList=o()({},this.allModelList);else{var t;t=this.modelBrand.find(function(t){return t.productBrand===e}),this.modelList=t.productModel}},search:function(){this.$emit("search",o()({},this.searchForm))},resetForm:function(e){this.$refs[e].resetFields(),this.searchForm.warehouseUuid=Object(n.b)("warehouseUuid"),this.$emit("rest",o()({},this.searchForm))}}}),s=a("G6up"),l=a.n(s);var c=function(e){a("osBN")},u=a("C7Lr")(i,l.a,!1,c,"data-v-c0345782",null);t.default=u.exports},osBN:function(e,t){},so2h:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"800px",title:"小件出库明细",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0,"lock-scroll":!0,center:""},on:{"update:visible":function(t){e.isVisible=t},close:e.cancel}},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isListLoading,expression:"isListLoading"}],ref:"userTable",attrs:{height:"100%",stripe:"",border:!0,"tooltip-effect":"light",data:e.tableData}},[a("el-table-column",{attrs:{prop:"deliverOrderUuid",label:"出库单号","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exportTime",label:"出库时间",formatter:e.formatDate,"min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"productDeliverCount",label:"出库数量","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pickUserName",label:"拣货人","min-width":"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"deliverUserName",label:"发货人","min-width":"120","show-overflow-tooltip":!0}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=21.b786fd0987ed84b6afe5.js.map
{"version":3,"sources":["webpack:///./source/admin/src/views/SystemManagement/Menu/Components/Tree.vue?109e","webpack:///source/admin/src/views/SystemManagement/Menu/Components/Tree.vue","webpack:///./source/admin/src/views/SystemManagement/Menu/Components/Tree.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","ref","on","click","createOrg","_v","editOrg","deleteOrg","staticClass","addRoot","attrs","data","orgTreeData","node-key","props","defaultProps","default-expand-all","expand-on-click-node","render-content","customRender","node-contextmenu","showContextMenu","node-click","handleNodeClick","staticRenderFns","Tree","name","contextmenuSelectedNode","label","clickedNodeData","type","Object","computed","extends_default","vuex_esm","selectedNode","systemColor","theme","systemTheme","mounted","initOrgTree","methods","_this","systemparams","then","res","generateTree","node","nodeCom","$emit","event","tree","$refs","contextMenu","treeMenu","setCurrentKey","id","show","top","clientY","left","clientX","update","_this2","_contextmenuSelectedN","$confirm","confirmButtonText","cancelButtonText","resourceUuid","error","$message","message","catch","createElement","_ref","h","store","babel_helper_vue_jsx_merge_props_default","class","directives","arg","getCurrentNode","style","backgroundColor","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","Tree_default","a","__webpack_exports__"],"mappings":"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","file":"static/js/33.e62ac459bb216ab46897.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-contextmenu',{ref:\"treeMenu\"},[_c('v-contextmenu-item',{on:{\"click\":_vm.createOrg}},[_vm._v(\"新增菜单\")]),_vm._v(\" \"),_c('v-contextmenu-item',{on:{\"click\":_vm.editOrg}},[_vm._v(\"修改菜单\")]),_vm._v(\" \"),_c('v-contextmenu-item',{on:{\"click\":_vm.deleteOrg}},[_vm._v(\"删除菜单\")])],1),_vm._v(\" \"),_c('el-button',{staticClass:\"addRoot\",on:{\"click\":_vm.addRoot}},[_vm._v(\"创建根节点\")]),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.orgTreeData,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"default-expand-all\":\"\",\"expand-on-click-node\":false,\"render-content\":_vm.customRender},on:{\"node-contextmenu\":_vm.showContextMenu,\"node-click\":_vm.handleNodeClick}})],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-36c44f42\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/SystemManagement/Menu/Components/Tree.vue\n// module id = lQZw\n// module chunks = 6 33","<template>\n  <div>\n    <v-contextmenu ref=\"treeMenu\">\n      <v-contextmenu-item @click=\"createOrg\">新增菜单</v-contextmenu-item>\n      <v-contextmenu-item @click=\"editOrg\">修改菜单</v-contextmenu-item>\n      <v-contextmenu-item @click=\"deleteOrg\">删除菜单</v-contextmenu-item>\n    </v-contextmenu>\n    <el-button @click=\"addRoot\" class=\"addRoot\">创建根节点</el-button>\n    <el-tree\n      ref=\"tree\"\n      :data=\"orgTreeData\"\n      node-key=\"id\"\n      :props=\"defaultProps\"\n      default-expand-all\n      :expand-on-click-node=\"false\"\n      @node-contextmenu=\"showContextMenu\"\n      @node-click=\"handleNodeClick\"\n      :render-content=\"customRender\"\n    >\n    </el-tree>\n  </div>\n</template>\n<script>\n  /**\n   * System Menu Tree Component\n   * ----------------------\n   * Author: zhou qi\n   * Date: 2018.06.13\n   */\n  import { mapGetters } from 'vuex'\n  import { baseTheme } from '@/utils/theme'\n  import { generateTree } from '@/utils/generateTree'\n  // api\n  import { systemMenuTreeList, systemMenuDelete } from '@/api/systemparams'\n\n  export default {\n    name: 'SystemMenuTree',\n    data () {\n      return {\n        orgTreeData: [],\n        contextmenuSelectedNode: null,\n        defaultProps: {\n          label: 'name'\n        }\n      }\n    },\n    props: {\n      clickedNodeData: {\n        type: Object\n      }\n    },\n    computed: {\n      ...mapGetters(['systemTheme']),\n      selectedNode () {\n        return this.clickedNodeData\n      },\n      systemColor () {\n        return baseTheme[this.systemTheme]\n      }\n    },\n    mounted () {\n      this.initOrgTree()\n    },\n    methods: {\n      initOrgTree () {\n        systemMenuTreeList().then(res => {\n          this.orgTreeData = generateTree(res)\n        })\n      },\n      // 节点点击事件\n      handleNodeClick (data, node, nodeCom) {\n        this.$emit('nodeClick', { data, node, nodeCom })\n      },\n      // 节点右键弹出菜单\n      showContextMenu (event, data, node, nodeCom) {\n        if (node) {\n          const tree = this.$refs.tree\n          const contextMenu = this.$refs.treeMenu\n          // 右键设置当前树节点为选中状态\n          this.contextmenuSelectedNode = data\n          tree.setCurrentKey(data.id)\n          // 弹出菜单\n          contextMenu.show({top: event.clientY, left: event.clientX})\n        }\n      },\n      update () {\n        this.initOrgTree()\n        //   console.log('tree updated.')\n      },\n      // 新增根节点\n      addRoot () {\n        this.$emit('update:isCreate', true)\n        this.$emit('openDialog', 'MenuUpdate', {addRoot:true})\n      },\n      // 菜单 -- 新增\n      createOrg () {\n        this.$emit('update:isCreate', true)\n        this.$emit('openDialog', 'MenuUpdate', this.contextmenuSelectedNode)\n      },\n      // 菜单 -- 编辑\n      editOrg () {\n        this.$emit('update:isCreate', false)\n        this.$emit('openDialog', 'MenuUpdate', this.contextmenuSelectedNode)\n      },\n      // 菜单 -- 删除\n      deleteOrg () {\n        const { name, id } = this.contextmenuSelectedNode\n        if (id) {\n          this.$confirm(`确认要删除:[${name}]菜单吗?`, '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(() => {\n            systemMenuDelete({ resourceUuid: id }).then(res => {\n              if (!res.error) {\n                this.$message({\n                  type: 'success',\n                  message: '删除成功!'\n                })\n                this.initOrgTree()\n                this.$emit('updateTree', 'delete')\n              }\n            })\n          }).catch(() => {})\n        }\n      },\n      // 树节点自定义渲染格式 (JSX)\n      customRender (createElement, {node, data, store}) {\n        // directive 参数参考指令钩子函数中的定义: https://cn.vuejs.org/v2/guide/custom-directive.html\n        const directives = [{name: 'contextmenu', arg: 'treeMenu'}]\n        return (\n          <span class=\"custom-tree-node\" { ...{directives} } >\n      <span>{node.label}</span>\n        {\n          (this.$refs.tree.getCurrentNode() && data.id === this.$refs.tree.getCurrentNode().id) &&\n          <span class=\"active\" style={{backgroundColor: this.systemColor}}></span>\n        }\n      </span>\n      )\n      }\n    }\n  }\n</script>\n<style lang=\"scss\" scoped>\n  .custom-tree-node {\n    position:relative;\n    width:100%;\n\n    .active {\n      position: absolute;\n      display: inline-block;\n      width:10px;\n      height:10px;\n      right:10px;\n      top:3px;\n      border-radius:10px;\n    }\n    .addRoot{\n      margin-left: 20px;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/SystemManagement/Menu/Components/Tree.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-36c44f42\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"/Users/mrk/Desktop/xhcode/okr_web/source/admin/src/common/style/common.scss\\\"]}!../../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Tree.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-36c44f42\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Tree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-36c44f42\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/SystemManagement/Menu/Components/Tree.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
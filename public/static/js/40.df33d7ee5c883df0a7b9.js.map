{"version":3,"sources":["webpack:///source/admin/src/views/SystemManagement/User/Components/UserRoleAuth.vue","webpack:///./source/admin/src/views/SystemManagement/User/Components/UserRoleAuth.vue","webpack:///./source/admin/src/views/SystemManagement/User/Components/UserRoleAuth.vue?7a1b"],"names":["UserRoleAuth","name","data","isVisible","tableData","currentId","selectRow","isListLoading","pagination","pageNum","pageSize","total","props","show","type","Boolean","required","selectedUsers","Object","watch","isShow","this","queryList","userUuid","methods","params","searchParams","getRoles","extends_default","_this","role","then","res","item","forEach","row","checked","roleUuid","changePage","indexMethod","index","formatStatus","column","roleEnable","formatCreateDate","moment_default","roleCreateTime","format","rowClick","save","_this2","userRoleUserUuid","userRoleRoleUuid","user","error","$message","message","cancel","$emit","components","CommonWrapper","commonWrapper","CommonTable","commonTable","Component","__webpack_require__","normalizeComponent","UserRoleAuth_default","a","__webpack_exports__","module","exports","render","_vm","_h","$createElement","_c","_self","attrs","width","title","visible","close-on-click-modal","close-on-press-escape","on","update:visible","$event","close","staticStyle","margin","slot","directives","rawName","value","expression","ref","height","stripe","row-click","align","scopedSlots","_u","key","fn","scope","staticClass","label","model","callback","$$v","_v","prop","formatter","background","layout","current-page","page-size","update:currentPage","$set","current-change","show-icon","closable","disabled","length","click","staticRenderFns"],"mappings":"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","file":"static/js/40.df33d7ee5c883df0a7b9.js","sourcesContent":["<template>\n    <el-dialog\n        width=\"600px\"\n        title=\"角色授权\"\n        :visible.sync=\"isVisible\"\n        :close-on-click-modal=\"false\"\n        :close-on-press-escape=\"false\"\n         @close=\"cancel\"\n    >\n      <common-wrapper style=\"margin:10px 0;\">\n          <common-table>\n              <template slot=\"table\">\n                  <el-table\n                      ref=\"roleTable\"\n                      height=\"350px\"\n                      stripe\n                      v-loading=\"isListLoading\"\n                      :data=\"tableData\"\n                      @row-click = \"rowClick\">\n                      <el-table-column width=\"55\" align=\"center\">\n                        <template slot-scope=\"scope\">\n                          <el-radio class=\"radio\" :label=\"scope.row.roleUuid\" v-model=\"currentId\">&nbsp</el-radio>\n                        </template>\n                      </el-table-column>\n                      <el-table-column type=\"index\" :index=\"indexMethod\" label=\"序号\" width=\"50\"></el-table-column>\n                      <el-table-column prop=\"roleName\" label=\"角色名称\"></el-table-column>\n                      <el-table-column prop=\"roleEnable\" label=\"状态\" :formatter=\"formatStatus\"></el-table-column>\n                      <el-table-column prop=\"roleCreateTime\" label=\"创建时间\" :formatter=\"formatCreateDate\"></el-table-column>\n                  </el-table>\n              </template>\n              <template slot=\"pagination\">\n                  <el-pagination   background   layout=\"total, prev, pager, next\"\n                  :current-page.sync=\"pagination.pageNum\"\n                  :page-size=\"pagination.pageSize\"\n                  :total=\"pagination.total\"\n                  @current-change=\"changePage\"\n                  ></el-pagination>\n              </template>\n          </common-table>\n      </common-wrapper>\n      <el-alert title=\"您勾选的角色信息将覆盖账号原角色信息.\" type=\"warning\" show-icon :closable=\"false\"></el-alert>\n      <template slot=\"footer\">\n          <el-button type=\"primary\" @click=\"save\" :disabled=\"!selectRow.length\">保存</el-button>\n          <el-button @click=\"cancel\">取消</el-button>\n      </template>\n    </el-dialog>\n</template>\n<script>\n/**\n * User Role Authorization Component\n * ----------------------\n * Author: zhou qi\n * Date: 2018.03.20\n */\nimport moment from 'moment'\nimport CommonWrapper from '@/components/commonWrapper'\nimport CommonTable from '@/components/commonTable'\n\n// api\nimport { setUserRole } from '@/api/user'\nimport { getRoleList } from '@/api/role'\n\nexport default {\n  name: 'UserRoleAuth',\n  data () {\n    return {\n      isVisible: false,\n      tableData: [],\n      currentId: '',\n      selectRow: {}, // 列表选中列\n      isListLoading: false,\n      pagination: { // 翻页数据\n        pageNum: 1,\n        pageSize: 10,\n        total: 0\n      }\n    }\n  },\n  props: {\n    show: {\n      type: Boolean,\n      required: true\n    },\n    selectedUsers: {\n      type: Object,\n      required: true\n    }\n  },\n  watch: {\n    show (isShow) {\n      if (isShow) {\n        this.queryList({userUuid: this.selectedUsers.userUuid})\n      }\n      this.isVisible = isShow\n    }\n  },\n  methods: {\n    // 查询和初始化查询\n    // 查询/翻页公用方法\n    queryList (params) {\n      const searchParams = this.searchParams = params\n      this.getRoles(\n        {\n          ...searchParams,\n          pageNum: this.pagination.pageNum,\n          pageSize: this.pagination.pageSize\n        }\n      )\n    },\n    // 获取列表\n    getRoles (params) {\n      this.isListLoading = true\n      getRoleList(params).then(res => {\n        this.tableData = res.item\n        this.pagination.total = res.total\n        this.pagination.pageNum = res.pageNum\n        this.pagination.pageSize = res.pageSize\n        this.isListLoading = false\n        this.tableData.forEach(row => {\n          if(row.checked){\n            this.currentId = row.roleUuid;\n          }\n        });\n      })\n    },\n    // 列表翻页\n    changePage (pageNum) {\n      this.pagination.pageNum = pageNum\n      this.queryList(this.searchParams)\n    },\n    // 生成列表序号\n    indexMethod (index) {\n      return (index + 1) + (this.pagination.pageNum - 1) * this.pagination.pageSize\n    },\n    // 列表状态显示格式化\n    formatStatus (row, column) {\n      return row.roleEnable === 1 ? '正常' : row.roleEnable === 0 ? '禁用' : '未知'\n    },\n    // 列表日期格式化\n    formatCreateDate (row) {\n      return moment(row.roleCreateTime).format('YYYY-MM-DD')\n    },\n    rowClick (row) {\n      this.currentId = row.roleUuid;\n    },\n    save () {\n      const userRoleUserUuid = this.selectedUsers.userUuid\n      const userRoleRoleUuid = this.currentId\n      setUserRole({userRoleUserUuid, userRoleRoleUuid}).then(res => {\n        if(!res.error){\n          this.$message({\n            message: '用户授权成功!',\n            type: 'success'\n          })\n          this.cancel()\n          this.$emit('updateList')\n        }\n      })\n    },\n    cancel () {\n      this.$emit('update:show', false)\n      this.isVisible = false\n    }\n  },\n  components: {\n    CommonWrapper,\n    CommonTable\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// source/admin/src/views/SystemManagement/User/Components/UserRoleAuth.vue","var normalizeComponent = require(\"!../../../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserRoleAuth.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserRoleAuth.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-13c94b46\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UserRoleAuth.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/admin/src/views/SystemManagement/User/Components/UserRoleAuth.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"width\":\"600px\",\"title\":\"角色授权\",\"visible\":_vm.isVisible,\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.isVisible=$event},\"close\":_vm.cancel}},[_c('common-wrapper',{staticStyle:{\"margin\":\"10px 0\"}},[_c('common-table',[_c('template',{slot:\"table\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isListLoading),expression:\"isListLoading\"}],ref:\"roleTable\",attrs:{\"height\":\"350px\",\"stripe\":\"\",\"data\":_vm.tableData},on:{\"row-click\":_vm.rowClick}},[_c('el-table-column',{attrs:{\"width\":\"55\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-radio',{staticClass:\"radio\",attrs:{\"label\":scope.row.roleUuid},model:{value:(_vm.currentId),callback:function ($$v) {_vm.currentId=$$v},expression:\"currentId\"}},[_vm._v(\" \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"type\":\"index\",\"index\":_vm.indexMethod,\"label\":\"序号\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleEnable\",\"label\":\"状态\",\"formatter\":_vm.formatStatus}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleCreateTime\",\"label\":\"创建时间\",\"formatter\":_vm.formatCreateDate}})],1)],1),_vm._v(\" \"),_c('template',{slot:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next\",\"current-page\":_vm.pagination.pageNum,\"page-size\":_vm.pagination.pageSize,\"total\":_vm.pagination.total},on:{\"update:currentPage\":function($event){_vm.$set(_vm.pagination, \"pageNum\", $event)},\"current-change\":_vm.changePage}})],1)],2)],1),_vm._v(\" \"),_c('el-alert',{attrs:{\"title\":\"您勾选的角色信息将覆盖账号原角色信息.\",\"type\":\"warning\",\"show-icon\":\"\",\"closable\":false}}),_vm._v(\" \"),_c('template',{slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.selectRow.length},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],2)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-13c94b46\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./source/admin/src/views/SystemManagement/User/Components/UserRoleAuth.vue\n// module id = wJR1\n// module chunks = 3 40"],"sourceRoot":""}